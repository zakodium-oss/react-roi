(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))tt(nt);new MutationObserver(nt=>{for(const rt of nt)if(rt.type==="childList")for(const it of rt.addedNodes)it.tagName==="LINK"&&it.rel==="modulepreload"&&tt(it)}).observe(document,{childList:!0,subtree:!0});function et(nt){const rt={};return nt.integrity&&(rt.integrity=nt.integrity),nt.referrerPolicy&&(rt.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?rt.credentials="include":nt.crossOrigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function tt(nt){if(nt.ep)return;nt.ep=!0;const rt=et(nt);fetch(nt.href,rt)}})();function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(_){return _===null||typeof _!="object"?null:(_=z$1&&_[z$1]||_["@@iterator"],typeof _=="function"?_:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(_,_e,et){this.props=_,this.context=_e,this.refs=D$1,this.updater=et||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(_,_e){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,_e,"setState")};E$1.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(_,_e,et){this.props=_,this.context=_e,this.refs=D$1,this.updater=et||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_,_e,et){var tt,nt={},rt=null,it=null;if(_e!=null)for(tt in _e.ref!==void 0&&(it=_e.ref),_e.key!==void 0&&(rt=""+_e.key),_e)J.call(_e,tt)&&!L$1.hasOwnProperty(tt)&&(nt[tt]=_e[tt]);var ot=arguments.length-2;if(ot===1)nt.children=et;else if(1<ot){for(var lt=Array(ot),st=0;st<ot;st++)lt[st]=arguments[st+2];nt.children=lt}if(_&&_.defaultProps)for(tt in ot=_.defaultProps,ot)nt[tt]===void 0&&(nt[tt]=ot[tt]);return{$$typeof:l$3,type:_,key:rt,ref:it,props:nt,_owner:K$1.current}}function N$2(_,_e){return{$$typeof:l$3,type:_.type,key:_e,ref:_.ref,props:_.props,_owner:_._owner}}function O$1(_){return typeof _=="object"&&_!==null&&_.$$typeof===l$3}function escape(_){var _e={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(et){return _e[et]})}var P$1=/\/+/g;function Q$1(_,_e){return typeof _=="object"&&_!==null&&_.key!=null?escape(""+_.key):_e.toString(36)}function R$1(_,_e,et,tt,nt){var rt=typeof _;(rt==="undefined"||rt==="boolean")&&(_=null);var it=!1;if(_===null)it=!0;else switch(rt){case"string":case"number":it=!0;break;case"object":switch(_.$$typeof){case l$3:case n$3:it=!0}}if(it)return it=_,nt=nt(it),_=tt===""?"."+Q$1(it,0):tt,I$1(nt)?(et="",_!=null&&(et=_.replace(P$1,"$&/")+"/"),R$1(nt,_e,et,"",function(st){return st})):nt!=null&&(O$1(nt)&&(nt=N$2(nt,et+(!nt.key||it&&it.key===nt.key?"":(""+nt.key).replace(P$1,"$&/")+"/")+_)),_e.push(nt)),1;if(it=0,tt=tt===""?".":tt+":",I$1(_))for(var ot=0;ot<_.length;ot++){rt=_[ot];var lt=tt+Q$1(rt,ot);it+=R$1(rt,_e,et,lt,nt)}else if(lt=A$1(_),typeof lt=="function")for(_=lt.call(_),ot=0;!(rt=_.next()).done;)rt=rt.value,lt=tt+Q$1(rt,ot++),it+=R$1(rt,_e,et,lt,nt);else if(rt==="object")throw _e=String(_),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return it}function S$2(_,_e,et){if(_==null)return _;var tt=[],nt=0;return R$1(_,tt,"","",function(rt){return _e.call(et,rt,nt++)}),tt}function T$1(_){if(_._status===-1){var _e=_._result;_e=_e(),_e.then(function(et){(_._status===0||_._status===-1)&&(_._status=1,_._result=et)},function(et){(_._status===0||_._status===-1)&&(_._status=2,_._result=et)}),_._status===-1&&(_._status=0,_._result=_e)}if(_._status===1)return _._result.default;throw _._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$2,forEach:function(_,_e,et){S$2(_,function(){_e.apply(this,arguments)},et)},count:function(_){var _e=0;return S$2(_,function(){_e++}),_e},toArray:function(_){return S$2(_,function(_e){return _e})||[]},only:function(_){if(!O$1(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};react_production_min.Component=E$1;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(_,_e,et){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var tt=C$1({},_.props),nt=_.key,rt=_.ref,it=_._owner;if(_e!=null){if(_e.ref!==void 0&&(rt=_e.ref,it=K$1.current),_e.key!==void 0&&(nt=""+_e.key),_.type&&_.type.defaultProps)var ot=_.type.defaultProps;for(lt in _e)J.call(_e,lt)&&!L$1.hasOwnProperty(lt)&&(tt[lt]=_e[lt]===void 0&&ot!==void 0?ot[lt]:_e[lt])}var lt=arguments.length-2;if(lt===1)tt.children=et;else if(1<lt){ot=Array(lt);for(var st=0;st<lt;st++)ot[st]=arguments[st+2];tt.children=ot}return{$$typeof:l$3,type:_.type,key:nt,ref:rt,props:tt,_owner:it}};react_production_min.createContext=function(_){return _={$$typeof:u$2,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:t$2,_context:_},_.Consumer=_};react_production_min.createElement=M$3;react_production_min.createFactory=function(_){var _e=M$3.bind(null,_);return _e.type=_,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_){return{$$typeof:v$2,render:_}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_){return{$$typeof:y$1,_payload:{_status:-1,_result:_},_init:T$1}};react_production_min.memo=function(_,_e){return{$$typeof:x$1,type:_,compare:_e===void 0?null:_e}};react_production_min.startTransition=function(_){var _e=V$1.transition;V$1.transition={};try{_()}finally{V$1.transition=_e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_,_e){return U$1.current.useCallback(_,_e)};react_production_min.useContext=function(_){return U$1.current.useContext(_)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_){return U$1.current.useDeferredValue(_)};react_production_min.useEffect=function(_,_e){return U$1.current.useEffect(_,_e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(_,_e,et){return U$1.current.useImperativeHandle(_,_e,et)};react_production_min.useInsertionEffect=function(_,_e){return U$1.current.useInsertionEffect(_,_e)};react_production_min.useLayoutEffect=function(_,_e){return U$1.current.useLayoutEffect(_,_e)};react_production_min.useMemo=function(_,_e){return U$1.current.useMemo(_,_e)};react_production_min.useReducer=function(_,_e,et){return U$1.current.useReducer(_,_e,et)};react_production_min.useRef=function(_){return U$1.current.useRef(_)};react_production_min.useState=function(_){return U$1.current.useState(_)};react_production_min.useSyncExternalStore=function(_,_e,et){return U$1.current.useSyncExternalStore(_,_e,et)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q(_,_e,et){var tt,nt={},rt=null,it=null;et!==void 0&&(rt=""+et),_e.key!==void 0&&(rt=""+_e.key),_e.ref!==void 0&&(it=_e.ref);for(tt in _e)m$2.call(_e,tt)&&!p$3.hasOwnProperty(tt)&&(nt[tt]=_e[tt]);if(_&&_.defaultProps)for(tt in _e=_.defaultProps,_e)nt[tt]===void 0&&(nt[tt]=_e[tt]);return{$$typeof:k$1,type:_,key:rt,ref:it,props:nt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_){function _e(Tt,Dt){var At=Tt.length;Tt.push(Dt);e:for(;0<At;){var zt=At-1>>>1,jt=Tt[zt];if(0<nt(jt,Dt))Tt[zt]=Dt,Tt[At]=jt,At=zt;else break e}}function et(Tt){return Tt.length===0?null:Tt[0]}function tt(Tt){if(Tt.length===0)return null;var Dt=Tt[0],At=Tt.pop();if(At!==Dt){Tt[0]=At;e:for(var zt=0,jt=Tt.length,Nt=jt>>>1;zt<Nt;){var Pt=2*(zt+1)-1,Ot=Tt[Pt],Vt=Pt+1,Zt=Tt[Vt];if(0>nt(Ot,At))Vt<jt&&0>nt(Zt,Ot)?(Tt[zt]=Zt,Tt[Vt]=At,zt=Vt):(Tt[zt]=Ot,Tt[Pt]=At,zt=Pt);else if(Vt<jt&&0>nt(Zt,At))Tt[zt]=Zt,Tt[Vt]=At,zt=Vt;else break e}}return Dt}function nt(Tt,Dt){var At=Tt.sortIndex-Dt.sortIndex;return At!==0?At:Tt.id-Dt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var rt=performance;_.unstable_now=function(){return rt.now()}}else{var it=Date,ot=it.now();_.unstable_now=function(){return it.now()-ot}}var lt=[],st=[],at=1,ut=null,ct=3,ht=!1,dt=!1,vt=!1,yt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,xt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(Tt){for(var Dt=et(st);Dt!==null;){if(Dt.callback===null)tt(st);else if(Dt.startTime<=Tt)tt(st),Dt.sortIndex=Dt.expirationTime,_e(lt,Dt);else break;Dt=et(st)}}function pt(Tt){if(vt=!1,ft(Tt),!dt)if(et(lt)!==null)dt=!0,Ft(mt);else{var Dt=et(st);Dt!==null&&Lt(pt,Dt.startTime-Tt)}}function mt(Tt,Dt){dt=!1,vt&&(vt=!1,gt(Et),Et=-1),ht=!0;var At=ct;try{for(ft(Dt),ut=et(lt);ut!==null&&(!(ut.expirationTime>Dt)||Tt&&!bt());){var zt=ut.callback;if(typeof zt=="function"){ut.callback=null,ct=ut.priorityLevel;var jt=zt(ut.expirationTime<=Dt);Dt=_.unstable_now(),typeof jt=="function"?ut.callback=jt:ut===et(lt)&&tt(lt),ft(Dt)}else tt(lt);ut=et(lt)}if(ut!==null)var Nt=!0;else{var Pt=et(st);Pt!==null&&Lt(pt,Pt.startTime-Dt),Nt=!1}return Nt}finally{ut=null,ct=At,ht=!1}}var _t=!1,St=null,Et=-1,kt=5,wt=-1;function bt(){return!(_.unstable_now()-wt<kt)}function Mt(){if(St!==null){var Tt=_.unstable_now();wt=Tt;var Dt=!0;try{Dt=St(!0,Tt)}finally{Dt?Rt():(_t=!1,St=null)}}else _t=!1}var Rt;if(typeof xt=="function")Rt=function(){xt(Mt)};else if(typeof MessageChannel<"u"){var It=new MessageChannel,$t=It.port2;It.port1.onmessage=Mt,Rt=function(){$t.postMessage(null)}}else Rt=function(){yt(Mt,0)};function Ft(Tt){St=Tt,_t||(_t=!0,Rt())}function Lt(Tt,Dt){Et=yt(function(){Tt(_.unstable_now())},Dt)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(Tt){Tt.callback=null},_.unstable_continueExecution=function(){dt||ht||(dt=!0,Ft(mt))},_.unstable_forceFrameRate=function(Tt){0>Tt||125<Tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<Tt?Math.floor(1e3/Tt):5},_.unstable_getCurrentPriorityLevel=function(){return ct},_.unstable_getFirstCallbackNode=function(){return et(lt)},_.unstable_next=function(Tt){switch(ct){case 1:case 2:case 3:var Dt=3;break;default:Dt=ct}var At=ct;ct=Dt;try{return Tt()}finally{ct=At}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=function(){},_.unstable_runWithPriority=function(Tt,Dt){switch(Tt){case 1:case 2:case 3:case 4:case 5:break;default:Tt=3}var At=ct;ct=Tt;try{return Dt()}finally{ct=At}},_.unstable_scheduleCallback=function(Tt,Dt,At){var zt=_.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?zt+At:zt):At=zt,Tt){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=At+jt,Tt={id:at++,callback:Dt,priorityLevel:Tt,startTime:At,expirationTime:jt,sortIndex:-1},At>zt?(Tt.sortIndex=At,_e(st,Tt),et(lt)===null&&Tt===et(st)&&(vt?(gt(Et),Et=-1):vt=!0,Lt(pt,At-zt))):(Tt.sortIndex=jt,_e(lt,Tt),dt||ht||(dt=!0,Ft(mt))),Tt},_.unstable_shouldYield=bt,_.unstable_wrapCallback=function(Tt){var Dt=ct;return function(){var At=ct;ct=Dt;try{return Tt.apply(this,arguments)}finally{ct=At}}}})(scheduler_production_min);scheduler$1.exports=scheduler_production_min;var schedulerExports=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+_,et=1;et<arguments.length;et++)_e+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+_+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_,_e){ha(_,_e),ha(_+"Capture",_e)}function ha(_,_e){for(ea[_]=_e,_=0;_<_e.length;_++)da.add(_e[_])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_){return ja.call(ma,_)?!0:ja.call(la,_)?!1:ka.test(_)?ma[_]=!0:(la[_]=!0,!1)}function pa(_,_e,et,tt){if(et!==null&&et.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return tt?!1:et!==null?!et.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function qa(_,_e,et,tt){if(_e===null||typeof _e>"u"||pa(_,_e,et,tt))return!0;if(tt)return!1;if(et!==null)switch(et.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$1(_,_e,et,tt,nt,rt,it){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=tt,this.attributeNamespace=nt,this.mustUseProperty=et,this.propertyName=_,this.type=_e,this.sanitizeURL=rt,this.removeEmptyString=it}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){z[_]=new v$1(_,0,!1,_,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var _e=_[0];z[_e]=new v$1(_e,1,!1,_[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_){z[_]=new v$1(_,2,!1,_.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){z[_]=new v$1(_,2,!1,_,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){z[_]=new v$1(_,3,!1,_.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_){z[_]=new v$1(_,3,!0,_,null,!1,!1)});["capture","download"].forEach(function(_){z[_]=new v$1(_,4,!1,_,null,!1,!1)});["cols","rows","size","span"].forEach(function(_){z[_]=new v$1(_,6,!1,_,null,!1,!1)});["rowSpan","start"].forEach(function(_){z[_]=new v$1(_,5,!1,_.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var _e=_.replace(ra,sa);z[_e]=new v$1(_e,1,!1,_,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var _e=_.replace(ra,sa);z[_e]=new v$1(_e,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_){var _e=_.replace(ra,sa);z[_e]=new v$1(_e,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_){z[_]=new v$1(_,1,!1,_.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_){z[_]=new v$1(_,1,!1,_.toLowerCase(),null,!0,!0)});function ta(_,_e,et,tt){var nt=z.hasOwnProperty(_e)?z[_e]:null;(nt!==null?nt.type!==0:tt||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,et,nt,tt)&&(et=null),tt||nt===null?oa(_e)&&(et===null?_.removeAttribute(_e):_.setAttribute(_e,""+et)):nt.mustUseProperty?_[nt.propertyName]=et===null?nt.type===3?!1:"":et:(_e=nt.attributeName,tt=nt.attributeNamespace,et===null?_.removeAttribute(_e):(nt=nt.type,et=nt===3||nt===4&&et===!0?"":""+et,tt?_.setAttributeNS(tt,_e,et):_.setAttribute(_e,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_){return _===null||typeof _!="object"?null:(_=Ja&&_[Ja]||_["@@iterator"],typeof _=="function"?_:null)}var A=Object.assign,La;function Ma(_){if(La===void 0)try{throw Error()}catch(et){var _e=et.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+_}var Na=!1;function Oa(_,_e){if(!_||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(st){var tt=st}Reflect.construct(_,[],_e)}else{try{_e.call()}catch(st){tt=st}_.call(_e.prototype)}else{try{throw Error()}catch(st){tt=st}_()}}catch(st){if(st&&tt&&typeof st.stack=="string"){for(var nt=st.stack.split(`
`),rt=tt.stack.split(`
`),it=nt.length-1,ot=rt.length-1;1<=it&&0<=ot&&nt[it]!==rt[ot];)ot--;for(;1<=it&&0<=ot;it--,ot--)if(nt[it]!==rt[ot]){if(it!==1||ot!==1)do if(it--,ot--,0>ot||nt[it]!==rt[ot]){var lt=`
`+nt[it].replace(" at new "," at ");return _.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",_.displayName)),lt}while(1<=it&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(_=_?_.displayName||_.name:"")?Ma(_):""}function Pa(_){switch(_.tag){case 5:return Ma(_.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _=Oa(_.type,!1),_;case 11:return _=Oa(_.type.render,!1),_;case 1:return _=Oa(_.type,!0),_;default:return""}}function Qa(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case Ca:return(_.displayName||"Context")+".Consumer";case Ba:return(_._context.displayName||"Context")+".Provider";case Da:var _e=_.render;return _=_.displayName,_||(_=_e.displayName||_e.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case Ga:return _e=_.displayName||null,_e!==null?_e:Qa(_.type)||"Memo";case Ha:_e=_._payload,_=_._init;try{return Qa(_(_e))}catch{}}return null}function Ra(_){var _e=_.type;switch(_.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=_e.render,_=_.displayName||_.name||"",_e.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function Ta(_){var _e=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua(_){var _e=Ta(_)?"checked":"value",et=Object.getOwnPropertyDescriptor(_.constructor.prototype,_e),tt=""+_[_e];if(!_.hasOwnProperty(_e)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var nt=et.get,rt=et.set;return Object.defineProperty(_,_e,{configurable:!0,get:function(){return nt.call(this)},set:function(it){tt=""+it,rt.call(this,it)}}),Object.defineProperty(_,_e,{enumerable:et.enumerable}),{getValue:function(){return tt},setValue:function(it){tt=""+it},stopTracking:function(){_._valueTracker=null,delete _[_e]}}}}function Va(_){_._valueTracker||(_._valueTracker=Ua(_))}function Wa(_){if(!_)return!1;var _e=_._valueTracker;if(!_e)return!0;var et=_e.getValue(),tt="";return _&&(tt=Ta(_)?_.checked?"true":"false":_.value),_=tt,_!==et?(_e.setValue(_),!0):!1}function Xa(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function Ya(_,_e){var et=_e.checked;return A({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??_._wrapperState.initialChecked})}function Za(_,_e){var et=_e.defaultValue==null?"":_e.defaultValue,tt=_e.checked!=null?_e.checked:_e.defaultChecked;et=Sa(_e.value!=null?_e.value:et),_._wrapperState={initialChecked:tt,initialValue:et,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab(_,_e){_e=_e.checked,_e!=null&&ta(_,"checked",_e,!1)}function bb(_,_e){ab(_,_e);var et=Sa(_e.value),tt=_e.type;if(et!=null)tt==="number"?(et===0&&_.value===""||_.value!=et)&&(_.value=""+et):_.value!==""+et&&(_.value=""+et);else if(tt==="submit"||tt==="reset"){_.removeAttribute("value");return}_e.hasOwnProperty("value")?cb(_,_e.type,et):_e.hasOwnProperty("defaultValue")&&cb(_,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&(_.defaultChecked=!!_e.defaultChecked)}function db(_,_e,et){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var tt=_e.type;if(!(tt!=="submit"&&tt!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+_._wrapperState.initialValue,et||_e===_.value||(_.value=_e),_.defaultValue=_e}et=_.name,et!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,et!==""&&(_.name=et)}function cb(_,_e,et){(_e!=="number"||Xa(_.ownerDocument)!==_)&&(et==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+et&&(_.defaultValue=""+et))}var eb=Array.isArray;function fb(_,_e,et,tt){if(_=_.options,_e){_e={};for(var nt=0;nt<et.length;nt++)_e["$"+et[nt]]=!0;for(et=0;et<_.length;et++)nt=_e.hasOwnProperty("$"+_[et].value),_[et].selected!==nt&&(_[et].selected=nt),nt&&tt&&(_[et].defaultSelected=!0)}else{for(et=""+Sa(et),_e=null,nt=0;nt<_.length;nt++){if(_[nt].value===et){_[nt].selected=!0,tt&&(_[nt].defaultSelected=!0);return}_e!==null||_[nt].disabled||(_e=_[nt])}_e!==null&&(_e.selected=!0)}}function gb(_,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A({},_e,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function hb(_,_e){var et=_e.value;if(et==null){if(et=_e.children,_e=_e.defaultValue,et!=null){if(_e!=null)throw Error(p$2(92));if(eb(et)){if(1<et.length)throw Error(p$2(93));et=et[0]}_e=et}_e==null&&(_e=""),et=_e}_._wrapperState={initialValue:Sa(et)}}function ib(_,_e){var et=Sa(_e.value),tt=Sa(_e.defaultValue);et!=null&&(et=""+et,et!==_.value&&(_.value=et),_e.defaultValue==null&&_.defaultValue!==et&&(_.defaultValue=et)),tt!=null&&(_.defaultValue=""+tt)}function jb(_){var _e=_.textContent;_e===_._wrapperState.initialValue&&_e!==""&&_e!==null&&(_.value=_e)}function kb(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_,_e){return _==null||_==="http://www.w3.org/1999/xhtml"?kb(_e):_==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var mb,nb=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,et,tt,nt){MSApp.execUnsafeLocalFunction(function(){return _(_e,et,tt,nt)})}:_}(function(_,_e){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;_e.firstChild;)_.appendChild(_e.firstChild)}});function ob(_,_e){if(_e){var et=_.firstChild;if(et&&et===_.lastChild&&et.nodeType===3){et.nodeValue=_e;return}}_.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_){qb.forEach(function(_e){_e=_e+_.charAt(0).toUpperCase()+_.substring(1),pb[_e]=pb[_]})});function rb(_,_e,et){return _e==null||typeof _e=="boolean"||_e===""?"":et||typeof _e!="number"||_e===0||pb.hasOwnProperty(_)&&pb[_]?(""+_e).trim():_e+"px"}function sb(_,_e){_=_.style;for(var et in _e)if(_e.hasOwnProperty(et)){var tt=et.indexOf("--")===0,nt=rb(et,_e[et],tt);et==="float"&&(et="cssFloat"),tt?_.setProperty(et,nt):_[et]=nt}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_,_e){if(_e){if(tb[_]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$2(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$2(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$2(62))}}function vb(_,_e){if(_.indexOf("-")===-1)return typeof _e.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var yb=null,zb=null,Ab=null;function Bb(_){if(_=Cb(_)){if(typeof yb!="function")throw Error(p$2(280));var _e=_.stateNode;_e&&(_e=Db(_e),yb(_.stateNode,_.type,_e))}}function Eb(_){zb?Ab?Ab.push(_):Ab=[_]:zb=_}function Fb(){if(zb){var _=zb,_e=Ab;if(Ab=zb=null,Bb(_),_e)for(_=0;_<_e.length;_++)Bb(_e[_])}}function Gb(_,_e){return _(_e)}function Hb(){}var Ib=!1;function Jb(_,_e,et){if(Ib)return _(_e,et);Ib=!0;try{return Gb(_,_e,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_,_e){var et=_.stateNode;if(et===null)return null;var tt=Db(et);if(tt===null)return null;et=tt[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(_=_.type,tt=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!tt;break e;default:_=!1}if(_)return null;if(et&&typeof et!="function")throw Error(p$2(231,_e,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_,_e,et,tt,nt,rt,it,ot,lt){var st=Array.prototype.slice.call(arguments,3);try{_e.apply(et,st)}catch(at){this.onError(at)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_){Ob=!0,Pb=_}};function Tb(_,_e,et,tt,nt,rt,it,ot,lt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_,_e,et,tt,nt,rt,it,ot,lt){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=st)}}function Vb(_){var _e=_,et=_;if(_.alternate)for(;_e.return;)_e=_e.return;else{_=_e;do _e=_,_e.flags&4098&&(et=_e.return),_=_e.return;while(_)}return _e.tag===3?et:null}function Wb(_){if(_.tag===13){var _e=_.memoizedState;if(_e===null&&(_=_.alternate,_!==null&&(_e=_.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb(_){if(Vb(_)!==_)throw Error(p$2(188))}function Yb(_){var _e=_.alternate;if(!_e){if(_e=Vb(_),_e===null)throw Error(p$2(188));return _e!==_?null:_}for(var et=_,tt=_e;;){var nt=et.return;if(nt===null)break;var rt=nt.alternate;if(rt===null){if(tt=nt.return,tt!==null){et=tt;continue}break}if(nt.child===rt.child){for(rt=nt.child;rt;){if(rt===et)return Xb(nt),_;if(rt===tt)return Xb(nt),_e;rt=rt.sibling}throw Error(p$2(188))}if(et.return!==tt.return)et=nt,tt=rt;else{for(var it=!1,ot=nt.child;ot;){if(ot===et){it=!0,et=nt,tt=rt;break}if(ot===tt){it=!0,tt=nt,et=rt;break}ot=ot.sibling}if(!it){for(ot=rt.child;ot;){if(ot===et){it=!0,et=rt,tt=nt;break}if(ot===tt){it=!0,tt=rt,et=nt;break}ot=ot.sibling}if(!it)throw Error(p$2(189))}}if(et.alternate!==tt)throw Error(p$2(190))}if(et.tag!==3)throw Error(p$2(188));return et.stateNode.current===et?_:_e}function Zb(_){return _=Yb(_),_!==null?$b(_):null}function $b(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var _e=$b(_);if(_e!==null)return _e;_=_.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_,void 0,(_.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_){return _>>>=0,_===0?32:31-(pc(_)/qc|0)|0}var rc=64,sc=4194304;function tc(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function uc(_,_e){var et=_.pendingLanes;if(et===0)return 0;var tt=0,nt=_.suspendedLanes,rt=_.pingedLanes,it=et&268435455;if(it!==0){var ot=it&~nt;ot!==0?tt=tc(ot):(rt&=it,rt!==0&&(tt=tc(rt)))}else it=et&~nt,it!==0?tt=tc(it):rt!==0&&(tt=tc(rt));if(tt===0)return 0;if(_e!==0&&_e!==tt&&!(_e&nt)&&(nt=tt&-tt,rt=_e&-_e,nt>=rt||nt===16&&(rt&4194240)!==0))return _e;if(tt&4&&(tt|=et&16),_e=_.entangledLanes,_e!==0)for(_=_.entanglements,_e&=tt;0<_e;)et=31-oc(_e),nt=1<<et,tt|=_[et],_e&=~nt;return tt}function vc(_,_e){switch(_){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_,_e){for(var et=_.suspendedLanes,tt=_.pingedLanes,nt=_.expirationTimes,rt=_.pendingLanes;0<rt;){var it=31-oc(rt),ot=1<<it,lt=nt[it];lt===-1?(!(ot&et)||ot&tt)&&(nt[it]=vc(ot,_e)):lt<=_e&&(_.expiredLanes|=ot),rt&=~ot}}function xc(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function yc(){var _=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_}function zc(_){for(var _e=[],et=0;31>et;et++)_e.push(_);return _e}function Ac(_,_e,et){_.pendingLanes|=_e,_e!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,_e=31-oc(_e),_[_e]=et}function Bc(_,_e){var et=_.pendingLanes&~_e;_.pendingLanes=_e,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=_e,_.mutableReadLanes&=_e,_.entangledLanes&=_e,_e=_.entanglements;var tt=_.eventTimes;for(_=_.expirationTimes;0<et;){var nt=31-oc(et),rt=1<<nt;_e[nt]=0,tt[nt]=-1,_[nt]=-1,et&=~rt}}function Cc(_,_e){var et=_.entangledLanes|=_e;for(_=_.entanglements;et;){var tt=31-oc(et),nt=1<<tt;nt&_e|_[tt]&_e&&(_[tt]|=_e),et&=~nt}}var C=0;function Dc(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_,_e){switch(_){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc(_,_e,et,tt,nt,rt){return _===null||_.nativeEvent!==rt?(_={blockedOn:_e,domEventName:et,eventSystemFlags:tt,nativeEvent:rt,targetContainers:[nt]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),_):(_.eventSystemFlags|=tt,_e=_.targetContainers,nt!==null&&_e.indexOf(nt)===-1&&_e.push(nt),_)}function Uc(_,_e,et,tt,nt){switch(_e){case"focusin":return Lc=Tc(Lc,_,_e,et,tt,nt),!0;case"dragenter":return Mc=Tc(Mc,_,_e,et,tt,nt),!0;case"mouseover":return Nc=Tc(Nc,_,_e,et,tt,nt),!0;case"pointerover":var rt=nt.pointerId;return Oc.set(rt,Tc(Oc.get(rt)||null,_,_e,et,tt,nt)),!0;case"gotpointercapture":return rt=nt.pointerId,Pc.set(rt,Tc(Pc.get(rt)||null,_,_e,et,tt,nt)),!0}return!1}function Vc(_){var _e=Wc(_.target);if(_e!==null){var et=Vb(_e);if(et!==null){if(_e=et.tag,_e===13){if(_e=Wb(et),_e!==null){_.blockedOn=_e,Ic(_.priority,function(){Gc(et)});return}}else if(_e===3&&et.stateNode.current.memoizedState.isDehydrated){_.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}_.blockedOn=null}function Xc(_){if(_.blockedOn!==null)return!1;for(var _e=_.targetContainers;0<_e.length;){var et=Yc(_.domEventName,_.eventSystemFlags,_e[0],_.nativeEvent);if(et===null){et=_.nativeEvent;var tt=new et.constructor(et.type,et);wb=tt,et.target.dispatchEvent(tt),wb=null}else return _e=Cb(et),_e!==null&&Fc(_e),_.blockedOn=et,!1;_e.shift()}return!0}function Zc(_,_e,et){Xc(_)&&et.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_,_e){_.blockedOn===_e&&(_.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_){function _e(nt){return ad(nt,_)}if(0<Kc.length){ad(Kc[0],_);for(var et=1;et<Kc.length;et++){var tt=Kc[et];tt.blockedOn===_&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_),Mc!==null&&ad(Mc,_),Nc!==null&&ad(Nc,_),Oc.forEach(_e),Pc.forEach(_e),et=0;et<Qc.length;et++)tt=Qc[et],tt.blockedOn===_&&(tt.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_,_e,et,tt){var nt=C,rt=cd.transition;cd.transition=null;try{C=1,fd(_,_e,et,tt)}finally{C=nt,cd.transition=rt}}function gd(_,_e,et,tt){var nt=C,rt=cd.transition;cd.transition=null;try{C=4,fd(_,_e,et,tt)}finally{C=nt,cd.transition=rt}}function fd(_,_e,et,tt){if(dd){var nt=Yc(_,_e,et,tt);if(nt===null)hd(_,_e,tt,id,et),Sc(_,tt);else if(Uc(nt,_,_e,et,tt))tt.stopPropagation();else if(Sc(_,tt),_e&4&&-1<Rc.indexOf(_)){for(;nt!==null;){var rt=Cb(nt);if(rt!==null&&Ec(rt),rt=Yc(_,_e,et,tt),rt===null&&hd(_,_e,tt,id,et),rt===nt)break;nt=rt}nt!==null&&tt.stopPropagation()}else hd(_,_e,tt,null,et)}}var id=null;function Yc(_,_e,et,tt){if(id=null,_=xb(tt),_=Wc(_),_!==null)if(_e=Vb(_),_e===null)_=null;else if(et=_e.tag,et===13){if(_=Wb(_e),_!==null)return _;_=null}else if(et===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;_=null}else _e!==_&&(_=null);return id=_,null}function jd(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _,_e=ld,et=_e.length,tt,nt="value"in kd?kd.value:kd.textContent,rt=nt.length;for(_=0;_<et&&_e[_]===nt[_];_++);var it=et-_;for(tt=1;tt<=it&&_e[et-tt]===nt[rt-tt];tt++);return md=nt.slice(_,1<tt?1-tt:void 0)}function od(_){var _e=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&_e===13&&(_=13)):_=_e,_===10&&(_=13),32<=_||_===13?_:0}function pd(){return!0}function qd(){return!1}function rd(_){function _e(et,tt,nt,rt,it){this._reactName=et,this._targetInst=nt,this.type=tt,this.nativeEvent=rt,this.target=it,this.currentTarget=null;for(var ot in _)_.hasOwnProperty(ot)&&(et=_[ot],this[ot]=et?et(rt):rt[ot]);return this.isDefaultPrevented=(rt.defaultPrevented!=null?rt.defaultPrevented:rt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==yd&&(yd&&_.type==="mousemove"?(wd=_.screenX-yd.screenX,xd=_.screenY-yd.screenY):xd=wd=0,yd=_),wd)},movementY:function(_){return"movementY"in _?_.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState(_):(_=Od[_])?!!_e[_]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(_){if(_.key){var _e=Md[_.key]||_.key;if(_e!=="Unidentified")return _e}return _.type==="keypress"?(_=od(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Nd[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_){return _.type==="keypress"?od(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?od(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(_,_e){switch(_){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var ie=!1;function je(_,_e){switch(_){case"compositionend":return he(_e);case"keypress":return _e.which!==32?null:(fe=!0,ee);case"textInput":return _=_e.data,_===ee&&fe?null:_;default:return null}}function ke(_,_e){if(ie)return _==="compositionend"||!ae&&ge(_,_e)?(_=nd(),md=ld=kd=null,ie=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de&&_e.locale!=="ko"?null:_e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_){var _e=_&&_.nodeName&&_.nodeName.toLowerCase();return _e==="input"?!!le[_.type]:_e==="textarea"}function ne(_,_e,et,tt){Eb(tt),_e=oe(_e,"onChange"),0<_e.length&&(et=new td("onChange","change",null,et,tt),_.push({event:et,listeners:_e}))}var pe=null,qe=null;function re(_){se(_,0)}function te(_){var _e=ue(_);if(Wa(_e))return _}function ve(_,_e){if(_==="change")return _e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_){if(_.propertyName==="value"&&te(qe)){var _e=[];ne(_e,qe,_,xb(_)),Jb(re,_e)}}function Ce(_,_e,et){_==="focusin"?(Ae(),pe=_e,qe=et,pe.attachEvent("onpropertychange",Be)):_==="focusout"&&Ae()}function De(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return te(qe)}function Ee(_,_e){if(_==="click")return te(_e)}function Fe(_,_e){if(_==="input"||_==="change")return te(_e)}function Ge(_,_e){return _===_e&&(_!==0||1/_===1/_e)||_!==_&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_,_e){if(He(_,_e))return!0;if(typeof _!="object"||_===null||typeof _e!="object"||_e===null)return!1;var et=Object.keys(_),tt=Object.keys(_e);if(et.length!==tt.length)return!1;for(tt=0;tt<et.length;tt++){var nt=et[tt];if(!ja.call(_e,nt)||!He(_[nt],_e[nt]))return!1}return!0}function Je(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function Ke(_,_e){var et=Je(_);_=0;for(var tt;et;){if(et.nodeType===3){if(tt=_+et.textContent.length,_<=_e&&tt>=_e)return{node:et,offset:_e-_};_=tt}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le(_,_e){return _&&_e?_===_e?!0:_&&_.nodeType===3?!1:_e&&_e.nodeType===3?Le(_,_e.parentNode):"contains"in _?_.contains(_e):_.compareDocumentPosition?!!(_.compareDocumentPosition(_e)&16):!1:!1}function Me(){for(var _=window,_e=Xa();_e instanceof _.HTMLIFrameElement;){try{var et=typeof _e.contentWindow.location.href=="string"}catch{et=!1}if(et)_=_e.contentWindow;else break;_e=Xa(_.document)}return _e}function Ne(_){var _e=_&&_.nodeName&&_.nodeName.toLowerCase();return _e&&(_e==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||_e==="textarea"||_.contentEditable==="true")}function Oe(_){var _e=Me(),et=_.focusedElem,tt=_.selectionRange;if(_e!==et&&et&&et.ownerDocument&&Le(et.ownerDocument.documentElement,et)){if(tt!==null&&Ne(et)){if(_e=tt.start,_=tt.end,_===void 0&&(_=_e),"selectionStart"in et)et.selectionStart=_e,et.selectionEnd=Math.min(_,et.value.length);else if(_=(_e=et.ownerDocument||document)&&_e.defaultView||window,_.getSelection){_=_.getSelection();var nt=et.textContent.length,rt=Math.min(tt.start,nt);tt=tt.end===void 0?rt:Math.min(tt.end,nt),!_.extend&&rt>tt&&(nt=tt,tt=rt,rt=nt),nt=Ke(et,rt);var it=Ke(et,tt);nt&&it&&(_.rangeCount!==1||_.anchorNode!==nt.node||_.anchorOffset!==nt.offset||_.focusNode!==it.node||_.focusOffset!==it.offset)&&(_e=_e.createRange(),_e.setStart(nt.node,nt.offset),_.removeAllRanges(),rt>tt?(_.addRange(_e),_.extend(it.node,it.offset)):(_e.setEnd(it.node,it.offset),_.addRange(_e)))}}for(_e=[],_=et;_=_.parentNode;)_.nodeType===1&&_e.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<_e.length;et++)_=_e[et],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_,_e,et){var tt=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_e=new td("onSelect","select",null,_e,et),_.push({event:_e,listeners:tt}),_e.target=Qe)))}function Ve(_,_e){var et={};return et[_.toLowerCase()]=_e.toLowerCase(),et["Webkit"+_]="webkit"+_e,et["Moz"+_]="moz"+_e,et}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_){if(Xe[_])return Xe[_];if(!We[_])return _;var _e=We[_],et;for(et in _e)if(_e.hasOwnProperty(et)&&et in Ye)return Xe[_]=_e[et];return _}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_,_e){df.set(_,_e),fa(_e,[_])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_,_e,et){var tt=_.type||"unknown-event";_.currentTarget=et,Ub(tt,_e,void 0,_),_.currentTarget=null}function se(_,_e){_e=(_e&4)!==0;for(var et=0;et<_.length;et++){var tt=_[et],nt=tt.event;tt=tt.listeners;e:{var rt=void 0;if(_e)for(var it=tt.length-1;0<=it;it--){var ot=tt[it],lt=ot.instance,st=ot.currentTarget;if(ot=ot.listener,lt!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,st),rt=lt}else for(it=0;it<tt.length;it++){if(ot=tt[it],lt=ot.instance,st=ot.currentTarget,ot=ot.listener,lt!==rt&&nt.isPropagationStopped())break e;nf(nt,ot,st),rt=lt}}}if(Qb)throw _=Rb,Qb=!1,Rb=null,_}function D(_,_e){var et=_e[of];et===void 0&&(et=_e[of]=new Set);var tt=_+"__bubble";et.has(tt)||(pf(_e,_,2,!1),et.add(tt))}function qf(_,_e,et){var tt=0;_e&&(tt|=4),pf(et,_,tt,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_){if(!_[rf]){_[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,_),qf(et,!0,_))});var _e=_.nodeType===9?_:_.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf(_,_e,et,tt){switch(jd(_e)){case 1:var nt=ed;break;case 4:nt=gd;break;default:nt=fd}et=nt.bind(null,_e,et,_),nt=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(nt=!0),tt?nt!==void 0?_.addEventListener(_e,et,{capture:!0,passive:nt}):_.addEventListener(_e,et,!0):nt!==void 0?_.addEventListener(_e,et,{passive:nt}):_.addEventListener(_e,et,!1)}function hd(_,_e,et,tt,nt){var rt=tt;if(!(_e&1)&&!(_e&2)&&tt!==null)e:for(;;){if(tt===null)return;var it=tt.tag;if(it===3||it===4){var ot=tt.stateNode.containerInfo;if(ot===nt||ot.nodeType===8&&ot.parentNode===nt)break;if(it===4)for(it=tt.return;it!==null;){var lt=it.tag;if((lt===3||lt===4)&&(lt=it.stateNode.containerInfo,lt===nt||lt.nodeType===8&&lt.parentNode===nt))return;it=it.return}for(;ot!==null;){if(it=Wc(ot),it===null)return;if(lt=it.tag,lt===5||lt===6){tt=rt=it;continue e}ot=ot.parentNode}}tt=tt.return}Jb(function(){var st=rt,at=xb(et),ut=[];e:{var ct=df.get(_);if(ct!==void 0){var ht=td,dt=_;switch(_){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":ht=Rd;break;case"focusin":dt="focus",ht=Fd;break;case"focusout":dt="blur",ht=Fd;break;case"beforeblur":case"afterblur":ht=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Vd;break;case $e:case af:case bf:ht=Hd;break;case cf:ht=Xd;break;case"scroll":ht=vd;break;case"wheel":ht=Zd;break;case"copy":case"cut":case"paste":ht=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Td}var vt=(_e&4)!==0,yt=!vt&&_==="scroll",gt=vt?ct!==null?ct+"Capture":null:ct;vt=[];for(var xt=st,ft;xt!==null;){ft=xt;var pt=ft.stateNode;if(ft.tag===5&&pt!==null&&(ft=pt,gt!==null&&(pt=Kb(xt,gt),pt!=null&&vt.push(tf(xt,pt,ft)))),yt)break;xt=xt.return}0<vt.length&&(ct=new ht(ct,dt,null,et,at),ut.push({event:ct,listeners:vt}))}}if(!(_e&7)){e:{if(ct=_==="mouseover"||_==="pointerover",ht=_==="mouseout"||_==="pointerout",ct&&et!==wb&&(dt=et.relatedTarget||et.fromElement)&&(Wc(dt)||dt[uf]))break e;if((ht||ct)&&(ct=at.window===at?at:(ct=at.ownerDocument)?ct.defaultView||ct.parentWindow:window,ht?(dt=et.relatedTarget||et.toElement,ht=st,dt=dt?Wc(dt):null,dt!==null&&(yt=Vb(dt),dt!==yt||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(ht=null,dt=st),ht!==dt)){if(vt=Bd,pt="onMouseLeave",gt="onMouseEnter",xt="mouse",(_==="pointerout"||_==="pointerover")&&(vt=Td,pt="onPointerLeave",gt="onPointerEnter",xt="pointer"),yt=ht==null?ct:ue(ht),ft=dt==null?ct:ue(dt),ct=new vt(pt,xt+"leave",ht,et,at),ct.target=yt,ct.relatedTarget=ft,pt=null,Wc(at)===st&&(vt=new vt(gt,xt+"enter",dt,et,at),vt.target=ft,vt.relatedTarget=yt,pt=vt),yt=pt,ht&&dt)t:{for(vt=ht,gt=dt,xt=0,ft=vt;ft;ft=vf(ft))xt++;for(ft=0,pt=gt;pt;pt=vf(pt))ft++;for(;0<xt-ft;)vt=vf(vt),xt--;for(;0<ft-xt;)gt=vf(gt),ft--;for(;xt--;){if(vt===gt||gt!==null&&vt===gt.alternate)break t;vt=vf(vt),gt=vf(gt)}vt=null}else vt=null;ht!==null&&wf(ut,ct,ht,vt,!1),dt!==null&&yt!==null&&wf(ut,yt,dt,vt,!0)}}e:{if(ct=st?ue(st):window,ht=ct.nodeName&&ct.nodeName.toLowerCase(),ht==="select"||ht==="input"&&ct.type==="file")var mt=ve;else if(me(ct))if(we)mt=Fe;else{mt=De;var _t=Ce}else(ht=ct.nodeName)&&ht.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(mt=Ee);if(mt&&(mt=mt(_,st))){ne(ut,mt,et,at);break e}_t&&_t(_,ct,st),_==="focusout"&&(_t=ct._wrapperState)&&_t.controlled&&ct.type==="number"&&cb(ct,"number",ct.value)}switch(_t=st?ue(st):window,_){case"focusin":(me(_t)||_t.contentEditable==="true")&&(Qe=_t,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,et,at);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,et,at)}var St;if(ae)e:{switch(_){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else ie?ge(_,et)&&(Et="onCompositionEnd"):_==="keydown"&&et.keyCode===229&&(Et="onCompositionStart");Et&&(de&&et.locale!=="ko"&&(ie||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&ie&&(St=nd()):(kd=at,ld="value"in kd?kd.value:kd.textContent,ie=!0)),_t=oe(st,Et),0<_t.length&&(Et=new Ld(Et,_,null,et,at),ut.push({event:Et,listeners:_t}),St?Et.data=St:(St=he(et),St!==null&&(Et.data=St)))),(St=ce?je(_,et):ke(_,et))&&(st=oe(st,"onBeforeInput"),0<st.length&&(at=new Ld("onBeforeInput","beforeinput",null,et,at),ut.push({event:at,listeners:st}),at.data=St))}se(ut,_e)})}function tf(_,_e,et){return{instance:_,listener:_e,currentTarget:et}}function oe(_,_e){for(var et=_e+"Capture",tt=[];_!==null;){var nt=_,rt=nt.stateNode;nt.tag===5&&rt!==null&&(nt=rt,rt=Kb(_,et),rt!=null&&tt.unshift(tf(_,rt,nt)),rt=Kb(_,_e),rt!=null&&tt.push(tf(_,rt,nt))),_=_.return}return tt}function vf(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function wf(_,_e,et,tt,nt){for(var rt=_e._reactName,it=[];et!==null&&et!==tt;){var ot=et,lt=ot.alternate,st=ot.stateNode;if(lt!==null&&lt===tt)break;ot.tag===5&&st!==null&&(ot=st,nt?(lt=Kb(et,rt),lt!=null&&it.unshift(tf(et,lt,ot))):nt||(lt=Kb(et,rt),lt!=null&&it.push(tf(et,lt,ot)))),et=et.return}it.length!==0&&_.push({event:_e,listeners:it})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_){return(typeof _=="string"?_:""+_).replace(xf,`
`).replace(yf,"")}function Af(_,_e,et){if(_e=zf(_e),zf(_)!==_e&&et)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_,_e){return _==="textarea"||_==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_){return Hf.resolve(null).then(_).catch(If)}:Ff;function If(_){setTimeout(function(){throw _})}function Kf(_,_e){var et=_e,tt=0;do{var nt=et.nextSibling;if(_.removeChild(et),nt&&nt.nodeType===8)if(et=nt.data,et==="/$"){if(tt===0){_.removeChild(nt),bd(_e);return}tt--}else et!=="$"&&et!=="$?"&&et!=="$!"||tt++;et=nt}while(et);bd(_e)}function Lf(_){for(;_!=null;_=_.nextSibling){var _e=_.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=_.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return _}function Mf(_){_=_.previousSibling;for(var _e=0;_;){if(_.nodeType===8){var et=_.data;if(et==="$"||et==="$!"||et==="$?"){if(_e===0)return _;_e--}else et==="/$"&&_e++}_=_.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_){var _e=_[Of];if(_e)return _e;for(var et=_.parentNode;et;){if(_e=et[uf]||et[Of]){if(et=_e.alternate,_e.child!==null||et!==null&&et.child!==null)for(_=Mf(_);_!==null;){if(et=_[Of])return et;_=Mf(_)}return _e}_=et,et=_.parentNode}return null}function Cb(_){return _=_[Of]||_[uf],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function ue(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(p$2(33))}function Db(_){return _[Pf]||null}var Sf=[],Tf=-1;function Uf(_){return{current:_}}function E(_){0>Tf||(_.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_,_e){Tf++,Sf[Tf]=_.current,_.current=_e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_,_e){var et=_.type.contextTypes;if(!et)return Vf;var tt=_.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_e)return tt.__reactInternalMemoizedMaskedChildContext;var nt={},rt;for(rt in et)nt[rt]=_e[rt];return tt&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=_e,_.__reactInternalMemoizedMaskedChildContext=nt),nt}function Zf(_){return _=_.childContextTypes,_!=null}function $f(){E(Wf),E(H$1)}function ag(_,_e,et){if(H$1.current!==Vf)throw Error(p$2(168));G(H$1,_e),G(Wf,et)}function bg(_,_e,et){var tt=_.stateNode;if(_e=_e.childContextTypes,typeof tt.getChildContext!="function")return et;tt=tt.getChildContext();for(var nt in tt)if(!(nt in _e))throw Error(p$2(108,Ra(_)||"Unknown",nt));return A({},et,tt)}function cg(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,_),G(Wf,Wf.current),!0}function dg(_,_e,et){var tt=_.stateNode;if(!tt)throw Error(p$2(169));et?(_=bg(_,_e,Xf),tt.__reactInternalMemoizedMergedChildContext=_,E(Wf),E(H$1),G(H$1,_)):E(Wf),G(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(_){eg===null?eg=[_]:eg.push(_)}function ig(_){fg=!0,hg(_)}function jg(){if(!gg&&eg!==null){gg=!0;var _=0,_e=C;try{var et=eg;for(C=1;_<et.length;_++){var tt=et[_];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(nt){throw eg!==null&&(eg=eg.slice(_+1)),ac(fc,jg),nt}finally{C=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_,_e){kg[lg++]=ng,kg[lg++]=mg,mg=_,ng=_e}function ug(_,_e,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_;var tt=rg;_=sg;var nt=32-oc(tt)-1;tt&=~(1<<nt),et+=1;var rt=32-oc(_e)+nt;if(30<rt){var it=nt-nt%5;rt=(tt&(1<<it)-1).toString(32),tt>>=it,nt-=it,rg=1<<32-oc(_e)+nt|et<<nt|tt,sg=rt+_}else rg=1<<rt|et<<nt|tt,sg=_}function vg(_){_.return!==null&&(tg(_,1),ug(_,1,0))}function wg(_){for(;_===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_,_e){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=_e,et.return=_,_e=_.deletions,_e===null?(_.deletions=[et],_.flags|=16):_e.push(et)}function Cg(_,_e){switch(_.tag){case 5:var et=_.type;return _e=_e.nodeType!==1||et.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?(_.stateNode=_e,xg=_,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=_.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?(_.stateNode=_e,xg=_,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(et=qg!==null?{id:rg,overflow:sg}:null,_.memoizedState={dehydrated:_e,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=_e,et.return=_,_.child=et,xg=_,yg=null,!0):!1;default:return!1}}function Dg(_){return(_.mode&1)!==0&&(_.flags&128)===0}function Eg(_){if(I){var _e=yg;if(_e){var et=_e;if(!Cg(_,_e)){if(Dg(_))throw Error(p$2(418));_e=Lf(et.nextSibling);var tt=xg;_e&&Cg(_,_e)?Ag(tt,et):(_.flags=_.flags&-4097|2,I=!1,xg=_)}}else{if(Dg(_))throw Error(p$2(418));_.flags=_.flags&-4097|2,I=!1,xg=_}}}function Fg(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;xg=_}function Gg(_){if(_!==xg)return!1;if(!I)return Fg(_),I=!0,!1;var _e;if((_e=_.tag!==3)&&!(_e=_.tag!==5)&&(_e=_.type,_e=_e!=="head"&&_e!=="body"&&!Ef(_.type,_.memoizedProps)),_e&&(_e=yg)){if(Dg(_))throw Hg(),Error(p$2(418));for(;_e;)Ag(_,_e),_e=Lf(_e.nextSibling)}if(Fg(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$2(317));e:{for(_=_.nextSibling,_e=0;_;){if(_.nodeType===8){var et=_.data;if(et==="/$"){if(_e===0){yg=Lf(_.nextSibling);break e}_e--}else et!=="$"&&et!=="$!"&&et!=="$?"||_e++}_=_.nextSibling}yg=null}}else yg=xg?Lf(_.stateNode.nextSibling):null;return!0}function Hg(){for(var _=yg;_;)_=Lf(_.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_){zg===null?zg=[_]:zg.push(_)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_,_e){if(_&&_.defaultProps){_e=A({},_e),_=_.defaultProps;for(var et in _)_e[et]===void 0&&(_e[et]=_[et]);return _e}return _e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_){var _e=Mg.current;E(Mg),_._currentValue=_e}function Sg(_,_e,et){for(;_!==null;){var tt=_.alternate;if((_.childLanes&_e)!==_e?(_.childLanes|=_e,tt!==null&&(tt.childLanes|=_e)):tt!==null&&(tt.childLanes&_e)!==_e&&(tt.childLanes|=_e),_===et)break;_=_.return}}function Tg(_,_e){Ng=_,Pg=Og=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&_e&&(Ug=!0),_.firstContext=null)}function Vg(_){var _e=_._currentValue;if(Pg!==_)if(_={context:_,memoizedValue:_e,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=_,Ng.dependencies={lanes:0,firstContext:_}}else Og=Og.next=_;return _e}var Wg=null;function Xg(_){Wg===null?Wg=[_]:Wg.push(_)}function Yg(_,_e,et,tt){var nt=_e.interleaved;return nt===null?(et.next=et,Xg(_e)):(et.next=nt.next,nt.next=et),_e.interleaved=et,Zg(_,tt)}function Zg(_,_e){_.lanes|=_e;var et=_.alternate;for(et!==null&&(et.lanes|=_e),et=_,_=_.return;_!==null;)_.childLanes|=_e,et=_.alternate,et!==null&&(et.childLanes|=_e),et=_,_=_.return;return et.tag===3?et.stateNode:null}var $g=!1;function ah(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_,_e){_=_.updateQueue,_e.updateQueue===_&&(_e.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function ch(_,_e){return{eventTime:_,lane:_e,tag:0,payload:null,callback:null,next:null}}function dh(_,_e,et){var tt=_.updateQueue;if(tt===null)return null;if(tt=tt.shared,K&2){var nt=tt.pending;return nt===null?_e.next=_e:(_e.next=nt.next,nt.next=_e),tt.pending=_e,Zg(_,et)}return nt=tt.interleaved,nt===null?(_e.next=_e,Xg(tt)):(_e.next=nt.next,nt.next=_e),tt.interleaved=_e,Zg(_,et)}function eh(_,_e,et){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(et&4194240)!==0)){var tt=_e.lanes;tt&=_.pendingLanes,et|=tt,_e.lanes=et,Cc(_,et)}}function fh(_,_e){var et=_.updateQueue,tt=_.alternate;if(tt!==null&&(tt=tt.updateQueue,et===tt)){var nt=null,rt=null;if(et=et.firstBaseUpdate,et!==null){do{var it={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};rt===null?nt=rt=it:rt=rt.next=it,et=et.next}while(et!==null);rt===null?nt=rt=_e:rt=rt.next=_e}else nt=rt=_e;et={baseState:tt.baseState,firstBaseUpdate:nt,lastBaseUpdate:rt,shared:tt.shared,effects:tt.effects},_.updateQueue=et;return}_=et.lastBaseUpdate,_===null?et.firstBaseUpdate=_e:_.next=_e,et.lastBaseUpdate=_e}function gh(_,_e,et,tt){var nt=_.updateQueue;$g=!1;var rt=nt.firstBaseUpdate,it=nt.lastBaseUpdate,ot=nt.shared.pending;if(ot!==null){nt.shared.pending=null;var lt=ot,st=lt.next;lt.next=null,it===null?rt=st:it.next=st,it=lt;var at=_.alternate;at!==null&&(at=at.updateQueue,ot=at.lastBaseUpdate,ot!==it&&(ot===null?at.firstBaseUpdate=st:ot.next=st,at.lastBaseUpdate=lt))}if(rt!==null){var ut=nt.baseState;it=0,at=st=lt=null,ot=rt;do{var ct=ot.lane,ht=ot.eventTime;if((tt&ct)===ct){at!==null&&(at=at.next={eventTime:ht,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var dt=_,vt=ot;switch(ct=_e,ht=et,vt.tag){case 1:if(dt=vt.payload,typeof dt=="function"){ut=dt.call(ht,ut,ct);break e}ut=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=vt.payload,ct=typeof dt=="function"?dt.call(ht,ut,ct):dt,ct==null)break e;ut=A({},ut,ct);break e;case 2:$g=!0}}ot.callback!==null&&ot.lane!==0&&(_.flags|=64,ct=nt.effects,ct===null?nt.effects=[ot]:ct.push(ot))}else ht={eventTime:ht,lane:ct,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},at===null?(st=at=ht,lt=ut):at=at.next=ht,it|=ct;if(ot=ot.next,ot===null){if(ot=nt.shared.pending,ot===null)break;ct=ot,ot=ct.next,ct.next=null,nt.lastBaseUpdate=ct,nt.shared.pending=null}}while(1);if(at===null&&(lt=ut),nt.baseState=lt,nt.firstBaseUpdate=st,nt.lastBaseUpdate=at,_e=nt.shared.interleaved,_e!==null){nt=_e;do it|=nt.lane,nt=nt.next;while(nt!==_e)}else rt===null&&(nt.shared.lanes=0);hh|=it,_.lanes=it,_.memoizedState=ut}}function ih(_,_e,et){if(_=_e.effects,_e.effects=null,_!==null)for(_e=0;_e<_.length;_e++){var tt=_[_e],nt=tt.callback;if(nt!==null){if(tt.callback=null,tt=et,typeof nt!="function")throw Error(p$2(191,nt));nt.call(tt)}}}var jh=new aa.Component().refs;function kh(_,_e,et,tt){_e=_.memoizedState,et=et(tt,_e),et=et==null?_e:A({},_e,et),_.memoizedState=et,_.lanes===0&&(_.updateQueue.baseState=et)}var nh={isMounted:function(_){return(_=_._reactInternals)?Vb(_)===_:!1},enqueueSetState:function(_,_e,et){_=_._reactInternals;var tt=L(),nt=lh(_),rt=ch(tt,nt);rt.payload=_e,et!=null&&(rt.callback=et),_e=dh(_,rt,nt),_e!==null&&(mh(_e,_,nt,tt),eh(_e,_,nt))},enqueueReplaceState:function(_,_e,et){_=_._reactInternals;var tt=L(),nt=lh(_),rt=ch(tt,nt);rt.tag=1,rt.payload=_e,et!=null&&(rt.callback=et),_e=dh(_,rt,nt),_e!==null&&(mh(_e,_,nt,tt),eh(_e,_,nt))},enqueueForceUpdate:function(_,_e){_=_._reactInternals;var et=L(),tt=lh(_),nt=ch(et,tt);nt.tag=2,_e!=null&&(nt.callback=_e),_e=dh(_,nt,tt),_e!==null&&(mh(_e,_,tt,et),eh(_e,_,tt))}};function oh(_,_e,et,tt,nt,rt,it){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(tt,rt,it):_e.prototype&&_e.prototype.isPureReactComponent?!Ie(et,tt)||!Ie(nt,rt):!0}function ph(_,_e,et){var tt=!1,nt=Vf,rt=_e.contextType;return typeof rt=="object"&&rt!==null?rt=Vg(rt):(nt=Zf(_e)?Xf:H$1.current,tt=_e.contextTypes,rt=(tt=tt!=null)?Yf(_,nt):Vf),_e=new _e(et,rt),_.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=nh,_.stateNode=_e,_e._reactInternals=_,tt&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=nt,_.__reactInternalMemoizedMaskedChildContext=rt),_e}function qh(_,_e,et,tt){_=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(et,tt),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(et,tt),_e.state!==_&&nh.enqueueReplaceState(_e,_e.state,null)}function rh(_,_e,et,tt){var nt=_.stateNode;nt.props=et,nt.state=_.memoizedState,nt.refs=jh,ah(_);var rt=_e.contextType;typeof rt=="object"&&rt!==null?nt.context=Vg(rt):(rt=Zf(_e)?Xf:H$1.current,nt.context=Yf(_,rt)),nt.state=_.memoizedState,rt=_e.getDerivedStateFromProps,typeof rt=="function"&&(kh(_,_e,rt,et),nt.state=_.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof nt.getSnapshotBeforeUpdate=="function"||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(_e=nt.state,typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount(),_e!==nt.state&&nh.enqueueReplaceState(nt,nt.state,null),gh(_,et,nt,tt),nt.state=_.memoizedState),typeof nt.componentDidMount=="function"&&(_.flags|=4194308)}function sh(_,_e,et){if(_=et.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$2(309));var tt=et.stateNode}if(!tt)throw Error(p$2(147,_));var nt=tt,rt=""+_;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===rt?_e.ref:(_e=function(it){var ot=nt.refs;ot===jh&&(ot=nt.refs={}),it===null?delete ot[rt]:ot[rt]=it},_e._stringRef=rt,_e)}if(typeof _!="string")throw Error(p$2(284));if(!et._owner)throw Error(p$2(290,_))}return _}function th(_,_e){throw _=Object.prototype.toString.call(_e),Error(p$2(31,_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_))}function uh(_){var _e=_._init;return _e(_._payload)}function vh(_){function _e(gt,xt){if(_){var ft=gt.deletions;ft===null?(gt.deletions=[xt],gt.flags|=16):ft.push(xt)}}function et(gt,xt){if(!_)return null;for(;xt!==null;)_e(gt,xt),xt=xt.sibling;return null}function tt(gt,xt){for(gt=new Map;xt!==null;)xt.key!==null?gt.set(xt.key,xt):gt.set(xt.index,xt),xt=xt.sibling;return gt}function nt(gt,xt){return gt=wh(gt,xt),gt.index=0,gt.sibling=null,gt}function rt(gt,xt,ft){return gt.index=ft,_?(ft=gt.alternate,ft!==null?(ft=ft.index,ft<xt?(gt.flags|=2,xt):ft):(gt.flags|=2,xt)):(gt.flags|=1048576,xt)}function it(gt){return _&&gt.alternate===null&&(gt.flags|=2),gt}function ot(gt,xt,ft,pt){return xt===null||xt.tag!==6?(xt=xh(ft,gt.mode,pt),xt.return=gt,xt):(xt=nt(xt,ft),xt.return=gt,xt)}function lt(gt,xt,ft,pt){var mt=ft.type;return mt===ya?at(gt,xt,ft.props.children,pt,ft.key):xt!==null&&(xt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===xt.type)?(pt=nt(xt,ft.props),pt.ref=sh(gt,xt,ft),pt.return=gt,pt):(pt=yh(ft.type,ft.key,ft.props,null,gt.mode,pt),pt.ref=sh(gt,xt,ft),pt.return=gt,pt)}function st(gt,xt,ft,pt){return xt===null||xt.tag!==4||xt.stateNode.containerInfo!==ft.containerInfo||xt.stateNode.implementation!==ft.implementation?(xt=zh(ft,gt.mode,pt),xt.return=gt,xt):(xt=nt(xt,ft.children||[]),xt.return=gt,xt)}function at(gt,xt,ft,pt,mt){return xt===null||xt.tag!==7?(xt=Ah(ft,gt.mode,pt,mt),xt.return=gt,xt):(xt=nt(xt,ft),xt.return=gt,xt)}function ut(gt,xt,ft){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return xt=xh(""+xt,gt.mode,ft),xt.return=gt,xt;if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return ft=yh(xt.type,xt.key,xt.props,null,gt.mode,ft),ft.ref=sh(gt,null,xt),ft.return=gt,ft;case wa:return xt=zh(xt,gt.mode,ft),xt.return=gt,xt;case Ha:var pt=xt._init;return ut(gt,pt(xt._payload),ft)}if(eb(xt)||Ka(xt))return xt=Ah(xt,gt.mode,ft,null),xt.return=gt,xt;th(gt,xt)}return null}function ct(gt,xt,ft,pt){var mt=xt!==null?xt.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return mt!==null?null:ot(gt,xt,""+ft,pt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===mt?lt(gt,xt,ft,pt):null;case wa:return ft.key===mt?st(gt,xt,ft,pt):null;case Ha:return mt=ft._init,ct(gt,xt,mt(ft._payload),pt)}if(eb(ft)||Ka(ft))return mt!==null?null:at(gt,xt,ft,pt,null);th(gt,ft)}return null}function ht(gt,xt,ft,pt,mt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return gt=gt.get(ft)||null,ot(xt,gt,""+pt,mt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return gt=gt.get(pt.key===null?ft:pt.key)||null,lt(xt,gt,pt,mt);case wa:return gt=gt.get(pt.key===null?ft:pt.key)||null,st(xt,gt,pt,mt);case Ha:var _t=pt._init;return ht(gt,xt,ft,_t(pt._payload),mt)}if(eb(pt)||Ka(pt))return gt=gt.get(ft)||null,at(xt,gt,pt,mt,null);th(xt,pt)}return null}function dt(gt,xt,ft,pt){for(var mt=null,_t=null,St=xt,Et=xt=0,kt=null;St!==null&&Et<ft.length;Et++){St.index>Et?(kt=St,St=null):kt=St.sibling;var wt=ct(gt,St,ft[Et],pt);if(wt===null){St===null&&(St=kt);break}_&&St&&wt.alternate===null&&_e(gt,St),xt=rt(wt,xt,Et),_t===null?mt=wt:_t.sibling=wt,_t=wt,St=kt}if(Et===ft.length)return et(gt,St),I&&tg(gt,Et),mt;if(St===null){for(;Et<ft.length;Et++)St=ut(gt,ft[Et],pt),St!==null&&(xt=rt(St,xt,Et),_t===null?mt=St:_t.sibling=St,_t=St);return I&&tg(gt,Et),mt}for(St=tt(gt,St);Et<ft.length;Et++)kt=ht(St,gt,Et,ft[Et],pt),kt!==null&&(_&&kt.alternate!==null&&St.delete(kt.key===null?Et:kt.key),xt=rt(kt,xt,Et),_t===null?mt=kt:_t.sibling=kt,_t=kt);return _&&St.forEach(function(bt){return _e(gt,bt)}),I&&tg(gt,Et),mt}function vt(gt,xt,ft,pt){var mt=Ka(ft);if(typeof mt!="function")throw Error(p$2(150));if(ft=mt.call(ft),ft==null)throw Error(p$2(151));for(var _t=mt=null,St=xt,Et=xt=0,kt=null,wt=ft.next();St!==null&&!wt.done;Et++,wt=ft.next()){St.index>Et?(kt=St,St=null):kt=St.sibling;var bt=ct(gt,St,wt.value,pt);if(bt===null){St===null&&(St=kt);break}_&&St&&bt.alternate===null&&_e(gt,St),xt=rt(bt,xt,Et),_t===null?mt=bt:_t.sibling=bt,_t=bt,St=kt}if(wt.done)return et(gt,St),I&&tg(gt,Et),mt;if(St===null){for(;!wt.done;Et++,wt=ft.next())wt=ut(gt,wt.value,pt),wt!==null&&(xt=rt(wt,xt,Et),_t===null?mt=wt:_t.sibling=wt,_t=wt);return I&&tg(gt,Et),mt}for(St=tt(gt,St);!wt.done;Et++,wt=ft.next())wt=ht(St,gt,Et,wt.value,pt),wt!==null&&(_&&wt.alternate!==null&&St.delete(wt.key===null?Et:wt.key),xt=rt(wt,xt,Et),_t===null?mt=wt:_t.sibling=wt,_t=wt);return _&&St.forEach(function(Mt){return _e(gt,Mt)}),I&&tg(gt,Et),mt}function yt(gt,xt,ft,pt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:e:{for(var mt=ft.key,_t=xt;_t!==null;){if(_t.key===mt){if(mt=ft.type,mt===ya){if(_t.tag===7){et(gt,_t.sibling),xt=nt(_t,ft.props.children),xt.return=gt,gt=xt;break e}}else if(_t.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===Ha&&uh(mt)===_t.type){et(gt,_t.sibling),xt=nt(_t,ft.props),xt.ref=sh(gt,_t,ft),xt.return=gt,gt=xt;break e}et(gt,_t);break}else _e(gt,_t);_t=_t.sibling}ft.type===ya?(xt=Ah(ft.props.children,gt.mode,pt,ft.key),xt.return=gt,gt=xt):(pt=yh(ft.type,ft.key,ft.props,null,gt.mode,pt),pt.ref=sh(gt,xt,ft),pt.return=gt,gt=pt)}return it(gt);case wa:e:{for(_t=ft.key;xt!==null;){if(xt.key===_t)if(xt.tag===4&&xt.stateNode.containerInfo===ft.containerInfo&&xt.stateNode.implementation===ft.implementation){et(gt,xt.sibling),xt=nt(xt,ft.children||[]),xt.return=gt,gt=xt;break e}else{et(gt,xt);break}else _e(gt,xt);xt=xt.sibling}xt=zh(ft,gt.mode,pt),xt.return=gt,gt=xt}return it(gt);case Ha:return _t=ft._init,yt(gt,xt,_t(ft._payload),pt)}if(eb(ft))return dt(gt,xt,ft,pt);if(Ka(ft))return vt(gt,xt,ft,pt);th(gt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,xt!==null&&xt.tag===6?(et(gt,xt.sibling),xt=nt(xt,ft),xt.return=gt,gt=xt):(et(gt,xt),xt=xh(ft,gt.mode,pt),xt.return=gt,gt=xt),it(gt)):et(gt,xt)}return yt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_){if(_===Dh)throw Error(p$2(174));return _}function Ih(_,_e){switch(G(Gh,_e),G(Fh,_),G(Eh,Dh),_=_e.nodeType,_){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:_=_===8?_e.parentNode:_e,_e=_.namespaceURI||null,_=_.tagName,_e=lb(_e,_)}E(Eh),G(Eh,_e)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(_){Hh(Gh.current);var _e=Hh(Eh.current),et=lb(_e,_.type);_e!==et&&(G(Fh,_),G(Eh,et))}function Lh(_){Fh.current===_&&(E(Eh),E(Fh))}var M$2=Uf(0);function Mh(_){for(var _e=_;_e!==null;){if(_e.tag===13){var et=_e.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Nh=[];function Oh(){for(var _=0;_<Nh.length;_++)Nh[_]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$2(321))}function Wh(_,_e){if(_e===null)return!1;for(var et=0;et<_e.length&&et<_.length;et++)if(!He(_[et],_e[et]))return!1;return!0}function Xh(_,_e,et,tt,nt,rt){if(Rh=rt,N$1=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Ph.current=_===null||_.memoizedState===null?Yh:Zh,_=et(tt,nt),Th){rt=0;do{if(Th=!1,Uh=0,25<=rt)throw Error(p$2(301));rt+=1,P=O=null,_e.updateQueue=null,Ph.current=$h,_=et(tt,nt)}while(Th)}if(Ph.current=ai,_e=O!==null&&O.next!==null,Rh=0,P=O=N$1=null,Sh=!1,_e)throw Error(p$2(300));return _}function bi(){var _=Uh!==0;return Uh=0,_}function ci(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N$1.memoizedState=P=_:P=P.next=_,P}function di(){if(O===null){var _=N$1.alternate;_=_!==null?_.memoizedState:null}else _=O.next;var _e=P===null?N$1.memoizedState:P.next;if(_e!==null)P=_e,O=_;else{if(_===null)throw Error(p$2(310));O=_,_={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N$1.memoizedState=P=_:P=P.next=_}return P}function ei(_,_e){return typeof _e=="function"?_e(_):_e}function fi(_){var _e=di(),et=_e.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_;var tt=O,nt=tt.baseQueue,rt=et.pending;if(rt!==null){if(nt!==null){var it=nt.next;nt.next=rt.next,rt.next=it}tt.baseQueue=nt=rt,et.pending=null}if(nt!==null){rt=nt.next,tt=tt.baseState;var ot=it=null,lt=null,st=rt;do{var at=st.lane;if((Rh&at)===at)lt!==null&&(lt=lt.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),tt=st.hasEagerState?st.eagerState:_(tt,st.action);else{var ut={lane:at,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};lt===null?(ot=lt=ut,it=tt):lt=lt.next=ut,N$1.lanes|=at,hh|=at}st=st.next}while(st!==null&&st!==rt);lt===null?it=tt:lt.next=ot,He(tt,_e.memoizedState)||(Ug=!0),_e.memoizedState=tt,_e.baseState=it,_e.baseQueue=lt,et.lastRenderedState=tt}if(_=et.interleaved,_!==null){nt=_;do rt=nt.lane,N$1.lanes|=rt,hh|=rt,nt=nt.next;while(nt!==_)}else nt===null&&(et.lanes=0);return[_e.memoizedState,et.dispatch]}function gi(_){var _e=di(),et=_e.queue;if(et===null)throw Error(p$2(311));et.lastRenderedReducer=_;var tt=et.dispatch,nt=et.pending,rt=_e.memoizedState;if(nt!==null){et.pending=null;var it=nt=nt.next;do rt=_(rt,it.action),it=it.next;while(it!==nt);He(rt,_e.memoizedState)||(Ug=!0),_e.memoizedState=rt,_e.baseQueue===null&&(_e.baseState=rt),et.lastRenderedState=rt}return[rt,tt]}function hi(){}function ii(_,_e){var et=N$1,tt=di(),nt=_e(),rt=!He(tt.memoizedState,nt);if(rt&&(tt.memoizedState=nt,Ug=!0),tt=tt.queue,ji(ki.bind(null,et,tt,_),[_]),tt.getSnapshot!==_e||rt||P!==null&&P.memoizedState.tag&1){if(et.flags|=2048,li$1(9,mi.bind(null,et,tt,nt,_e),void 0,null),R===null)throw Error(p$2(349));Rh&30||ni(et,_e,nt)}return nt}function ni(_,_e,et){_.flags|=16384,_={getSnapshot:_e,value:et},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.stores=[_]):(et=_e.stores,et===null?_e.stores=[_]:et.push(_))}function mi(_,_e,et,tt){_e.value=et,_e.getSnapshot=tt,oi(_e)&&pi(_)}function ki(_,_e,et){return et(function(){oi(_e)&&pi(_)})}function oi(_){var _e=_.getSnapshot;_=_.value;try{var et=_e();return!He(_,et)}catch{return!0}}function pi(_){var _e=Zg(_,1);_e!==null&&mh(_e,_,1,-1)}function qi(_){var _e=ci();return typeof _=="function"&&(_=_()),_e.memoizedState=_e.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_},_e.queue=_,_=_.dispatch=ri.bind(null,N$1,_),[_e.memoizedState,_]}function li$1(_,_e,et,tt){return _={tag:_,create:_e,destroy:et,deps:tt,next:null},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.lastEffect=_.next=_):(et=_e.lastEffect,et===null?_e.lastEffect=_.next=_:(tt=et.next,et.next=_,_.next=tt,_e.lastEffect=_)),_}function si(){return di().memoizedState}function ti(_,_e,et,tt){var nt=ci();N$1.flags|=_,nt.memoizedState=li$1(1|_e,et,void 0,tt===void 0?null:tt)}function ui(_,_e,et,tt){var nt=di();tt=tt===void 0?null:tt;var rt=void 0;if(O!==null){var it=O.memoizedState;if(rt=it.destroy,tt!==null&&Wh(tt,it.deps)){nt.memoizedState=li$1(_e,et,rt,tt);return}}N$1.flags|=_,nt.memoizedState=li$1(1|_e,et,rt,tt)}function vi(_,_e){return ti(8390656,8,_,_e)}function ji(_,_e){return ui(2048,8,_,_e)}function wi(_,_e){return ui(4,2,_,_e)}function xi(_,_e){return ui(4,4,_,_e)}function yi(_,_e){if(typeof _e=="function")return _=_(),_e(_),function(){_e(null)};if(_e!=null)return _=_(),_e.current=_,function(){_e.current=null}}function zi(_,_e,et){return et=et!=null?et.concat([_]):null,ui(4,4,yi.bind(null,_e,_),et)}function Ai(){}function Bi(_,_e){var et=di();_e=_e===void 0?null:_e;var tt=et.memoizedState;return tt!==null&&_e!==null&&Wh(_e,tt[1])?tt[0]:(et.memoizedState=[_,_e],_)}function Ci(_,_e){var et=di();_e=_e===void 0?null:_e;var tt=et.memoizedState;return tt!==null&&_e!==null&&Wh(_e,tt[1])?tt[0]:(_=_(),et.memoizedState=[_,_e],_)}function Di(_,_e,et){return Rh&21?(He(et,_e)||(et=yc(),N$1.lanes|=et,hh|=et,_.baseState=!0),_e):(_.baseState&&(_.baseState=!1,Ug=!0),_.memoizedState=et)}function Ei(_,_e){var et=C;C=et!==0&&4>et?et:4,_(!0);var tt=Qh.transition;Qh.transition={};try{_(!1),_e()}finally{C=et,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(_,_e,et){var tt=lh(_);if(et={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null},Hi(_))Ii(_e,et);else if(et=Yg(_,_e,et,tt),et!==null){var nt=L();mh(et,_,tt,nt),Ji(et,_e,tt)}}function ri(_,_e,et){var tt=lh(_),nt={lane:tt,action:et,hasEagerState:!1,eagerState:null,next:null};if(Hi(_))Ii(_e,nt);else{var rt=_.alternate;if(_.lanes===0&&(rt===null||rt.lanes===0)&&(rt=_e.lastRenderedReducer,rt!==null))try{var it=_e.lastRenderedState,ot=rt(it,et);if(nt.hasEagerState=!0,nt.eagerState=ot,He(ot,it)){var lt=_e.interleaved;lt===null?(nt.next=nt,Xg(_e)):(nt.next=lt.next,lt.next=nt),_e.interleaved=nt;return}}catch{}finally{}et=Yg(_,_e,nt,tt),et!==null&&(nt=L(),mh(et,_,tt,nt),Ji(et,_e,tt))}}function Hi(_){var _e=_.alternate;return _===N$1||_e!==null&&_e===N$1}function Ii(_,_e){Th=Sh=!0;var et=_.pending;et===null?_e.next=_e:(_e.next=et.next,et.next=_e),_.pending=_e}function Ji(_,_e,et){if(et&4194240){var tt=_e.lanes;tt&=_.pendingLanes,et|=tt,_e.lanes=et,Cc(_,et)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_,_e){return ci().memoizedState=[_,_e===void 0?null:_e],_},useContext:Vg,useEffect:vi,useImperativeHandle:function(_,_e,et){return et=et!=null?et.concat([_]):null,ti(4194308,4,yi.bind(null,_e,_),et)},useLayoutEffect:function(_,_e){return ti(4194308,4,_,_e)},useInsertionEffect:function(_,_e){return ti(4,2,_,_e)},useMemo:function(_,_e){var et=ci();return _e=_e===void 0?null:_e,_=_(),et.memoizedState=[_,_e],_},useReducer:function(_,_e,et){var tt=ci();return _e=et!==void 0?et(_e):_e,tt.memoizedState=tt.baseState=_e,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:_e},tt.queue=_,_=_.dispatch=Gi.bind(null,N$1,_),[tt.memoizedState,_]},useRef:function(_){var _e=ci();return _={current:_},_e.memoizedState=_},useState:qi,useDebugValue:Ai,useDeferredValue:function(_){return ci().memoizedState=_},useTransition:function(){var _=qi(!1),_e=_[0];return _=Ei.bind(null,_[1]),ci().memoizedState=_,[_e,_]},useMutableSource:function(){},useSyncExternalStore:function(_,_e,et){var tt=N$1,nt=ci();if(I){if(et===void 0)throw Error(p$2(407));et=et()}else{if(et=_e(),R===null)throw Error(p$2(349));Rh&30||ni(tt,_e,et)}nt.memoizedState=et;var rt={value:et,getSnapshot:_e};return nt.queue=rt,vi(ki.bind(null,tt,rt,_),[_]),tt.flags|=2048,li$1(9,mi.bind(null,tt,rt,et,_e),void 0,null),et},useId:function(){var _=ci(),_e=R.identifierPrefix;if(I){var et=sg,tt=rg;et=(tt&~(1<<32-oc(tt)-1)).toString(32)+et,_e=":"+_e+"R"+et,et=Uh++,0<et&&(_e+="H"+et.toString(32)),_e+=":"}else et=Vh++,_e=":"+_e+"r"+et.toString(32)+":";return _.memoizedState=_e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_){var _e=di();return Di(_e,O.memoizedState,_)},useTransition:function(){var _=fi(ei)[0],_e=di().memoizedState;return[_,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_){var _e=di();return O===null?_e.memoizedState=_:Di(_e,O.memoizedState,_)},useTransition:function(){var _=gi(ei)[0],_e=di().memoizedState;return[_,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(_,_e){try{var et="",tt=_e;do et+=Pa(tt),tt=tt.return;while(tt);var nt=et}catch(rt){nt=`
Error generating stack: `+rt.message+`
`+rt.stack}return{value:_,source:_e,stack:nt,digest:null}}function Li(_,_e,et){return{value:_,source:null,stack:et??null,digest:_e??null}}function Mi(_,_e){try{console.error(_e.value)}catch(et){setTimeout(function(){throw et})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_,_e,et){et=ch(-1,et),et.tag=3,et.payload={element:null};var tt=_e.value;return et.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(_,_e)},et}function Ri(_,_e,et){et=ch(-1,et),et.tag=3;var tt=_.type.getDerivedStateFromError;if(typeof tt=="function"){var nt=_e.value;et.payload=function(){return tt(nt)},et.callback=function(){Mi(_,_e)}}var rt=_.stateNode;return rt!==null&&typeof rt.componentDidCatch=="function"&&(et.callback=function(){Mi(_,_e),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var it=_e.stack;this.componentDidCatch(_e.value,{componentStack:it!==null?it:""})}),et}function Ti(_,_e,et){var tt=_.pingCache;if(tt===null){tt=_.pingCache=new Ni;var nt=new Set;tt.set(_e,nt)}else nt=tt.get(_e),nt===void 0&&(nt=new Set,tt.set(_e,nt));nt.has(et)||(nt.add(et),_=Ui.bind(null,_,_e,et),_e.then(_,_))}function Vi(_){do{var _e;if((_e=_.tag===13)&&(_e=_.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return _;_=_.return}while(_!==null);return null}function Wi(_,_e,et,tt,nt){return _.mode&1?(_.flags|=65536,_.lanes=nt,_):(_===_e?_.flags|=65536:(_.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(_e=ch(-1,1),_e.tag=2,dh(et,_e,1))),et.lanes|=1),_)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(_,_e,et,tt){_e.child=_===null?Ch(_e,null,et,tt):Bh(_e,_.child,et,tt)}function Zi(_,_e,et,tt,nt){et=et.render;var rt=_e.ref;return Tg(_e,nt),tt=Xh(_,_e,et,tt,rt,nt),et=bi(),_!==null&&!Ug?(_e.updateQueue=_.updateQueue,_e.flags&=-2053,_.lanes&=~nt,$i(_,_e,nt)):(I&&et&&vg(_e),_e.flags|=1,Yi(_,_e,tt,nt),_e.child)}function aj(_,_e,et,tt,nt){if(_===null){var rt=et.type;return typeof rt=="function"&&!bj(rt)&&rt.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(_e.tag=15,_e.type=rt,cj(_,_e,rt,tt,nt)):(_=yh(et.type,null,tt,_e,_e.mode,nt),_.ref=_e.ref,_.return=_e,_e.child=_)}if(rt=_.child,!(_.lanes&nt)){var it=rt.memoizedProps;if(et=et.compare,et=et!==null?et:Ie,et(it,tt)&&_.ref===_e.ref)return $i(_,_e,nt)}return _e.flags|=1,_=wh(rt,tt),_.ref=_e.ref,_.return=_e,_e.child=_}function cj(_,_e,et,tt,nt){if(_!==null){var rt=_.memoizedProps;if(Ie(rt,tt)&&_.ref===_e.ref)if(Ug=!1,_e.pendingProps=tt=rt,(_.lanes&nt)!==0)_.flags&131072&&(Ug=!0);else return _e.lanes=_.lanes,$i(_,_e,nt)}return dj(_,_e,et,tt,nt)}function ej(_,_e,et){var tt=_e.pendingProps,nt=tt.children,rt=_!==null?_.memoizedState:null;if(tt.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=et;else{if(!(et&1073741824))return _=rt!==null?rt.baseLanes|et:et,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:_,cachePool:null,transitions:null},_e.updateQueue=null,G(fj,gj),gj|=_,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=rt!==null?rt.baseLanes:et,G(fj,gj),gj|=tt}else rt!==null?(tt=rt.baseLanes|et,_e.memoizedState=null):tt=et,G(fj,gj),gj|=tt;return Yi(_,_e,nt,et),_e.child}function hj(_,_e){var et=_e.ref;(_===null&&et!==null||_!==null&&_.ref!==et)&&(_e.flags|=512,_e.flags|=2097152)}function dj(_,_e,et,tt,nt){var rt=Zf(et)?Xf:H$1.current;return rt=Yf(_e,rt),Tg(_e,nt),et=Xh(_,_e,et,tt,rt,nt),tt=bi(),_!==null&&!Ug?(_e.updateQueue=_.updateQueue,_e.flags&=-2053,_.lanes&=~nt,$i(_,_e,nt)):(I&&tt&&vg(_e),_e.flags|=1,Yi(_,_e,et,nt),_e.child)}function ij(_,_e,et,tt,nt){if(Zf(et)){var rt=!0;cg(_e)}else rt=!1;if(Tg(_e,nt),_e.stateNode===null)jj(_,_e),ph(_e,et,tt),rh(_e,et,tt,nt),tt=!0;else if(_===null){var it=_e.stateNode,ot=_e.memoizedProps;it.props=ot;var lt=it.context,st=et.contextType;typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(et)?Xf:H$1.current,st=Yf(_e,st));var at=et.getDerivedStateFromProps,ut=typeof at=="function"||typeof it.getSnapshotBeforeUpdate=="function";ut||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==tt||lt!==st)&&qh(_e,it,tt,st),$g=!1;var ct=_e.memoizedState;it.state=ct,gh(_e,tt,it,nt),lt=_e.memoizedState,ot!==tt||ct!==lt||Wf.current||$g?(typeof at=="function"&&(kh(_e,et,at,tt),lt=_e.memoizedState),(ot=$g||oh(_e,et,ot,tt,ct,lt,st))?(ut||typeof it.UNSAFE_componentWillMount!="function"&&typeof it.componentWillMount!="function"||(typeof it.componentWillMount=="function"&&it.componentWillMount(),typeof it.UNSAFE_componentWillMount=="function"&&it.UNSAFE_componentWillMount()),typeof it.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof it.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=tt,_e.memoizedState=lt),it.props=tt,it.state=lt,it.context=st,tt=ot):(typeof it.componentDidMount=="function"&&(_e.flags|=4194308),tt=!1)}else{it=_e.stateNode,bh(_,_e),ot=_e.memoizedProps,st=_e.type===_e.elementType?ot:Lg(_e.type,ot),it.props=st,ut=_e.pendingProps,ct=it.context,lt=et.contextType,typeof lt=="object"&&lt!==null?lt=Vg(lt):(lt=Zf(et)?Xf:H$1.current,lt=Yf(_e,lt));var ht=et.getDerivedStateFromProps;(at=typeof ht=="function"||typeof it.getSnapshotBeforeUpdate=="function")||typeof it.UNSAFE_componentWillReceiveProps!="function"&&typeof it.componentWillReceiveProps!="function"||(ot!==ut||ct!==lt)&&qh(_e,it,tt,lt),$g=!1,ct=_e.memoizedState,it.state=ct,gh(_e,tt,it,nt);var dt=_e.memoizedState;ot!==ut||ct!==dt||Wf.current||$g?(typeof ht=="function"&&(kh(_e,et,ht,tt),dt=_e.memoizedState),(st=$g||oh(_e,et,st,tt,ct,dt,lt)||!1)?(at||typeof it.UNSAFE_componentWillUpdate!="function"&&typeof it.componentWillUpdate!="function"||(typeof it.componentWillUpdate=="function"&&it.componentWillUpdate(tt,dt,lt),typeof it.UNSAFE_componentWillUpdate=="function"&&it.UNSAFE_componentWillUpdate(tt,dt,lt)),typeof it.componentDidUpdate=="function"&&(_e.flags|=4),typeof it.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof it.componentDidUpdate!="function"||ot===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=1024),_e.memoizedProps=tt,_e.memoizedState=dt),it.props=tt,it.state=dt,it.context=lt,tt=st):(typeof it.componentDidUpdate!="function"||ot===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=4),typeof it.getSnapshotBeforeUpdate!="function"||ot===_.memoizedProps&&ct===_.memoizedState||(_e.flags|=1024),tt=!1)}return kj(_,_e,et,tt,rt,nt)}function kj(_,_e,et,tt,nt,rt){hj(_,_e);var it=(_e.flags&128)!==0;if(!tt&&!it)return nt&&dg(_e,et,!1),$i(_,_e,rt);tt=_e.stateNode,Xi.current=_e;var ot=it&&typeof et.getDerivedStateFromError!="function"?null:tt.render();return _e.flags|=1,_!==null&&it?(_e.child=Bh(_e,_.child,null,rt),_e.child=Bh(_e,null,ot,rt)):Yi(_,_e,ot,rt),_e.memoizedState=tt.state,nt&&dg(_e,et,!0),_e.child}function lj(_){var _e=_.stateNode;_e.pendingContext?ag(_,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag(_,_e.context,!1),Ih(_,_e.containerInfo)}function mj(_,_e,et,tt,nt){return Ig(),Jg(nt),_e.flags|=256,Yi(_,_e,et,tt),_e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_){return{baseLanes:_,cachePool:null,transitions:null}}function pj(_,_e,et){var tt=_e.pendingProps,nt=M$2.current,rt=!1,it=(_e.flags&128)!==0,ot;if((ot=it)||(ot=_!==null&&_.memoizedState===null?!1:(nt&2)!==0),ot?(rt=!0,_e.flags&=-129):(_===null||_.memoizedState!==null)&&(nt|=1),G(M$2,nt&1),_===null)return Eg(_e),_=_e.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(_e.mode&1?_.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(it=tt.children,_=tt.fallback,rt?(tt=_e.mode,rt=_e.child,it={mode:"hidden",children:it},!(tt&1)&&rt!==null?(rt.childLanes=0,rt.pendingProps=it):rt=qj(it,tt,0,null),_=Ah(_,tt,et,null),rt.return=_e,_.return=_e,rt.sibling=_,_e.child=rt,_e.child.memoizedState=oj(et),_e.memoizedState=nj,_):rj(_e,it));if(nt=_.memoizedState,nt!==null&&(ot=nt.dehydrated,ot!==null))return sj(_,_e,it,tt,ot,nt,et);if(rt){rt=tt.fallback,it=_e.mode,nt=_.child,ot=nt.sibling;var lt={mode:"hidden",children:tt.children};return!(it&1)&&_e.child!==nt?(tt=_e.child,tt.childLanes=0,tt.pendingProps=lt,_e.deletions=null):(tt=wh(nt,lt),tt.subtreeFlags=nt.subtreeFlags&14680064),ot!==null?rt=wh(ot,rt):(rt=Ah(rt,it,et,null),rt.flags|=2),rt.return=_e,tt.return=_e,tt.sibling=rt,_e.child=tt,tt=rt,rt=_e.child,it=_.child.memoizedState,it=it===null?oj(et):{baseLanes:it.baseLanes|et,cachePool:null,transitions:it.transitions},rt.memoizedState=it,rt.childLanes=_.childLanes&~et,_e.memoizedState=nj,tt}return rt=_.child,_=rt.sibling,tt=wh(rt,{mode:"visible",children:tt.children}),!(_e.mode&1)&&(tt.lanes=et),tt.return=_e,tt.sibling=null,_!==null&&(et=_e.deletions,et===null?(_e.deletions=[_],_e.flags|=16):et.push(_)),_e.child=tt,_e.memoizedState=null,tt}function rj(_,_e){return _e=qj({mode:"visible",children:_e},_.mode,0,null),_e.return=_,_.child=_e}function tj(_,_e,et,tt){return tt!==null&&Jg(tt),Bh(_e,_.child,null,et),_=rj(_e,_e.pendingProps.children),_.flags|=2,_e.memoizedState=null,_}function sj(_,_e,et,tt,nt,rt,it){if(et)return _e.flags&256?(_e.flags&=-257,tt=Li(Error(p$2(422))),tj(_,_e,it,tt)):_e.memoizedState!==null?(_e.child=_.child,_e.flags|=128,null):(rt=tt.fallback,nt=_e.mode,tt=qj({mode:"visible",children:tt.children},nt,0,null),rt=Ah(rt,nt,it,null),rt.flags|=2,tt.return=_e,rt.return=_e,tt.sibling=rt,_e.child=tt,_e.mode&1&&Bh(_e,_.child,null,it),_e.child.memoizedState=oj(it),_e.memoizedState=nj,rt);if(!(_e.mode&1))return tj(_,_e,it,null);if(nt.data==="$!"){if(tt=nt.nextSibling&&nt.nextSibling.dataset,tt)var ot=tt.dgst;return tt=ot,rt=Error(p$2(419)),tt=Li(rt,tt,void 0),tj(_,_e,it,tt)}if(ot=(it&_.childLanes)!==0,Ug||ot){if(tt=R,tt!==null){switch(it&-it){case 4:nt=2;break;case 16:nt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nt=32;break;case 536870912:nt=268435456;break;default:nt=0}nt=nt&(tt.suspendedLanes|it)?0:nt,nt!==0&&nt!==rt.retryLane&&(rt.retryLane=nt,Zg(_,nt),mh(tt,_,nt,-1))}return uj(),tt=Li(Error(p$2(421))),tj(_,_e,it,tt)}return nt.data==="$?"?(_e.flags|=128,_e.child=_.child,_e=vj.bind(null,_),nt._reactRetry=_e,null):(_=rt.treeContext,yg=Lf(nt.nextSibling),xg=_e,I=!0,zg=null,_!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_.id,sg=_.overflow,qg=_e),_e=rj(_e,tt.children),_e.flags|=4096,_e)}function wj(_,_e,et){_.lanes|=_e;var tt=_.alternate;tt!==null&&(tt.lanes|=_e),Sg(_.return,_e,et)}function xj(_,_e,et,tt,nt){var rt=_.memoizedState;rt===null?_.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:tt,tail:et,tailMode:nt}:(rt.isBackwards=_e,rt.rendering=null,rt.renderingStartTime=0,rt.last=tt,rt.tail=et,rt.tailMode=nt)}function yj(_,_e,et){var tt=_e.pendingProps,nt=tt.revealOrder,rt=tt.tail;if(Yi(_,_e,tt.children,et),tt=M$2.current,tt&2)tt=tt&1|2,_e.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=_e.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&wj(_,et,_e);else if(_.tag===19)wj(_,et,_e);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break e;for(;_.sibling===null;){if(_.return===null||_.return===_e)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}tt&=1}if(G(M$2,tt),!(_e.mode&1))_e.memoizedState=null;else switch(nt){case"forwards":for(et=_e.child,nt=null;et!==null;)_=et.alternate,_!==null&&Mh(_)===null&&(nt=et),et=et.sibling;et=nt,et===null?(nt=_e.child,_e.child=null):(nt=et.sibling,et.sibling=null),xj(_e,!1,nt,et,rt);break;case"backwards":for(et=null,nt=_e.child,_e.child=null;nt!==null;){if(_=nt.alternate,_!==null&&Mh(_)===null){_e.child=nt;break}_=nt.sibling,nt.sibling=et,et=nt,nt=_}xj(_e,!0,et,null,rt);break;case"together":xj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function jj(_,_e){!(_e.mode&1)&&_!==null&&(_.alternate=null,_e.alternate=null,_e.flags|=2)}function $i(_,_e,et){if(_!==null&&(_e.dependencies=_.dependencies),hh|=_e.lanes,!(et&_e.childLanes))return null;if(_!==null&&_e.child!==_.child)throw Error(p$2(153));if(_e.child!==null){for(_=_e.child,et=wh(_,_.pendingProps),_e.child=et,et.return=_e;_.sibling!==null;)_=_.sibling,et=et.sibling=wh(_,_.pendingProps),et.return=_e;et.sibling=null}return _e.child}function zj(_,_e,et){switch(_e.tag){case 3:lj(_e),Ig();break;case 5:Kh(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:Ih(_e,_e.stateNode.containerInfo);break;case 10:var tt=_e.type._context,nt=_e.memoizedProps.value;G(Mg,tt._currentValue),tt._currentValue=nt;break;case 13:if(tt=_e.memoizedState,tt!==null)return tt.dehydrated!==null?(G(M$2,M$2.current&1),_e.flags|=128,null):et&_e.child.childLanes?pj(_,_e,et):(G(M$2,M$2.current&1),_=$i(_,_e,et),_!==null?_.sibling:null);G(M$2,M$2.current&1);break;case 19:if(tt=(et&_e.childLanes)!==0,_.flags&128){if(tt)return yj(_,_e,et);_e.flags|=128}if(nt=_e.memoizedState,nt!==null&&(nt.rendering=null,nt.tail=null,nt.lastEffect=null),G(M$2,M$2.current),tt)break;return null;case 22:case 23:return _e.lanes=0,ej(_,_e,et)}return $i(_,_e,et)}var Aj,Bj,Cj,Dj;Aj=function(_,_e){for(var et=_e.child;et!==null;){if(et.tag===5||et.tag===6)_.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Bj=function(){};Cj=function(_,_e,et,tt){var nt=_.memoizedProps;if(nt!==tt){_=_e.stateNode,Hh(Eh.current);var rt=null;switch(et){case"input":nt=Ya(_,nt),tt=Ya(_,tt),rt=[];break;case"select":nt=A({},nt,{value:void 0}),tt=A({},tt,{value:void 0}),rt=[];break;case"textarea":nt=gb(_,nt),tt=gb(_,tt),rt=[];break;default:typeof nt.onClick!="function"&&typeof tt.onClick=="function"&&(_.onclick=Bf)}ub(et,tt);var it;et=null;for(st in nt)if(!tt.hasOwnProperty(st)&&nt.hasOwnProperty(st)&&nt[st]!=null)if(st==="style"){var ot=nt[st];for(it in ot)ot.hasOwnProperty(it)&&(et||(et={}),et[it]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?rt||(rt=[]):(rt=rt||[]).push(st,null));for(st in tt){var lt=tt[st];if(ot=nt!=null?nt[st]:void 0,tt.hasOwnProperty(st)&&lt!==ot&&(lt!=null||ot!=null))if(st==="style")if(ot){for(it in ot)!ot.hasOwnProperty(it)||lt&&lt.hasOwnProperty(it)||(et||(et={}),et[it]="");for(it in lt)lt.hasOwnProperty(it)&&ot[it]!==lt[it]&&(et||(et={}),et[it]=lt[it])}else et||(rt||(rt=[]),rt.push(st,et)),et=lt;else st==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,ot=ot?ot.__html:void 0,lt!=null&&ot!==lt&&(rt=rt||[]).push(st,lt)):st==="children"?typeof lt!="string"&&typeof lt!="number"||(rt=rt||[]).push(st,""+lt):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(lt!=null&&st==="onScroll"&&D("scroll",_),rt||ot===lt||(rt=[])):(rt=rt||[]).push(st,lt))}et&&(rt=rt||[]).push("style",et);var st=rt;(_e.updateQueue=st)&&(_e.flags|=4)}};Dj=function(_,_e,et,tt){et!==tt&&(_e.flags|=4)};function Ej(_,_e){if(!I)switch(_.tailMode){case"hidden":_e=_.tail;for(var et=null;_e!==null;)_e.alternate!==null&&(et=_e),_e=_e.sibling;et===null?_.tail=null:et.sibling=null;break;case"collapsed":et=_.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_e||_.tail===null?_.tail=null:_.tail.sibling=null:tt.sibling=null}}function S$1(_){var _e=_.alternate!==null&&_.alternate.child===_.child,et=0,tt=0;if(_e)for(var nt=_.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags&14680064,tt|=nt.flags&14680064,nt.return=_,nt=nt.sibling;else for(nt=_.child;nt!==null;)et|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags,tt|=nt.flags,nt.return=_,nt=nt.sibling;return _.subtreeFlags|=tt,_.childLanes=et,_e}function Fj(_,_e,et){var tt=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return tt=_e.stateNode,Jh(),E(Wf),E(H$1),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(_===null||_.child===null)&&(Gg(_e)?_e.flags|=4:_===null||_.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_,_e),S$1(_e),null;case 5:Lh(_e);var nt=Hh(Gh.current);if(et=_e.type,_!==null&&_e.stateNode!=null)Cj(_,_e,et,tt,nt),_.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!tt){if(_e.stateNode===null)throw Error(p$2(166));return S$1(_e),null}if(_=Hh(Eh.current),Gg(_e)){tt=_e.stateNode,et=_e.type;var rt=_e.memoizedProps;switch(tt[Of]=_e,tt[Pf]=rt,_=(_e.mode&1)!==0,et){case"dialog":D("cancel",tt),D("close",tt);break;case"iframe":case"object":case"embed":D("load",tt);break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],tt);break;case"source":D("error",tt);break;case"img":case"image":case"link":D("error",tt),D("load",tt);break;case"details":D("toggle",tt);break;case"input":Za(tt,rt),D("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!rt.multiple},D("invalid",tt);break;case"textarea":hb(tt,rt),D("invalid",tt)}ub(et,rt),nt=null;for(var it in rt)if(rt.hasOwnProperty(it)){var ot=rt[it];it==="children"?typeof ot=="string"?tt.textContent!==ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_),nt=["children",ot]):typeof ot=="number"&&tt.textContent!==""+ot&&(rt.suppressHydrationWarning!==!0&&Af(tt.textContent,ot,_),nt=["children",""+ot]):ea.hasOwnProperty(it)&&ot!=null&&it==="onScroll"&&D("scroll",tt)}switch(et){case"input":Va(tt),db(tt,rt,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof rt.onClick=="function"&&(tt.onclick=Bf)}tt=nt,_e.updateQueue=tt,tt!==null&&(_e.flags|=4)}else{it=nt.nodeType===9?nt:nt.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=kb(et)),_==="http://www.w3.org/1999/xhtml"?et==="script"?(_=it.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof tt.is=="string"?_=it.createElement(et,{is:tt.is}):(_=it.createElement(et),et==="select"&&(it=_,tt.multiple?it.multiple=!0:tt.size&&(it.size=tt.size))):_=it.createElementNS(_,et),_[Of]=_e,_[Pf]=tt,Aj(_,_e,!1,!1),_e.stateNode=_;e:{switch(it=vb(et,tt),et){case"dialog":D("cancel",_),D("close",_),nt=tt;break;case"iframe":case"object":case"embed":D("load",_),nt=tt;break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D(lf[nt],_);nt=tt;break;case"source":D("error",_),nt=tt;break;case"img":case"image":case"link":D("error",_),D("load",_),nt=tt;break;case"details":D("toggle",_),nt=tt;break;case"input":Za(_,tt),nt=Ya(_,tt),D("invalid",_);break;case"option":nt=tt;break;case"select":_._wrapperState={wasMultiple:!!tt.multiple},nt=A({},tt,{value:void 0}),D("invalid",_);break;case"textarea":hb(_,tt),nt=gb(_,tt),D("invalid",_);break;default:nt=tt}ub(et,nt),ot=nt;for(rt in ot)if(ot.hasOwnProperty(rt)){var lt=ot[rt];rt==="style"?sb(_,lt):rt==="dangerouslySetInnerHTML"?(lt=lt?lt.__html:void 0,lt!=null&&nb(_,lt)):rt==="children"?typeof lt=="string"?(et!=="textarea"||lt!=="")&&ob(_,lt):typeof lt=="number"&&ob(_,""+lt):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?lt!=null&&rt==="onScroll"&&D("scroll",_):lt!=null&&ta(_,rt,lt,it))}switch(et){case"input":Va(_),db(_,tt,!1);break;case"textarea":Va(_),jb(_);break;case"option":tt.value!=null&&_.setAttribute("value",""+Sa(tt.value));break;case"select":_.multiple=!!tt.multiple,rt=tt.value,rt!=null?fb(_,!!tt.multiple,rt,!1):tt.defaultValue!=null&&fb(_,!!tt.multiple,tt.defaultValue,!0);break;default:typeof nt.onClick=="function"&&(_.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if(_&&_e.stateNode!=null)Dj(_,_e,_.memoizedProps,tt);else{if(typeof tt!="string"&&_e.stateNode===null)throw Error(p$2(166));if(et=Hh(Gh.current),Hh(Eh.current),Gg(_e)){if(tt=_e.stateNode,et=_e.memoizedProps,tt[Of]=_e,(rt=tt.nodeValue!==et)&&(_=xg,_!==null))switch(_.tag){case 3:Af(tt.nodeValue,et,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,et,(_.mode&1)!==0)}rt&&(_e.flags|=4)}else tt=(et.nodeType===9?et:et.ownerDocument).createTextNode(tt),tt[Of]=_e,_e.stateNode=tt}return S$1(_e),null;case 13:if(E(M$2),tt=_e.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(I&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,rt=!1;else if(rt=Gg(_e),tt!==null&&tt.dehydrated!==null){if(_===null){if(!rt)throw Error(p$2(318));if(rt=_e.memoizedState,rt=rt!==null?rt.dehydrated:null,!rt)throw Error(p$2(317));rt[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),rt=!1}else zg!==null&&(Gj(zg),zg=null),rt=!0;if(!rt)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=et,_e):(tt=tt!==null,tt!==(_!==null&&_.memoizedState!==null)&&tt&&(_e.child.flags|=8192,_e.mode&1&&(_===null||M$2.current&1?T===0&&(T=3):uj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return Jh(),Bj(_,_e),_===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return Rg(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E(M$2),rt=_e.memoizedState,rt===null)return S$1(_e),null;if(tt=(_e.flags&128)!==0,it=rt.rendering,it===null)if(tt)Ej(rt,!1);else{if(T!==0||_!==null&&_.flags&128)for(_=_e.child;_!==null;){if(it=Mh(_),it!==null){for(_e.flags|=128,Ej(rt,!1),tt=it.updateQueue,tt!==null&&(_e.updateQueue=tt,_e.flags|=4),_e.subtreeFlags=0,tt=et,et=_e.child;et!==null;)rt=et,_=tt,rt.flags&=14680066,it=rt.alternate,it===null?(rt.childLanes=0,rt.lanes=_,rt.child=null,rt.subtreeFlags=0,rt.memoizedProps=null,rt.memoizedState=null,rt.updateQueue=null,rt.dependencies=null,rt.stateNode=null):(rt.childLanes=it.childLanes,rt.lanes=it.lanes,rt.child=it.child,rt.subtreeFlags=0,rt.deletions=null,rt.memoizedProps=it.memoizedProps,rt.memoizedState=it.memoizedState,rt.updateQueue=it.updateQueue,rt.type=it.type,_=it.dependencies,rt.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),et=et.sibling;return G(M$2,M$2.current&1|2),_e.child}_=_.sibling}rt.tail!==null&&B()>Hj&&(_e.flags|=128,tt=!0,Ej(rt,!1),_e.lanes=4194304)}else{if(!tt)if(_=Mh(it),_!==null){if(_e.flags|=128,tt=!0,et=_.updateQueue,et!==null&&(_e.updateQueue=et,_e.flags|=4),Ej(rt,!0),rt.tail===null&&rt.tailMode==="hidden"&&!it.alternate&&!I)return S$1(_e),null}else 2*B()-rt.renderingStartTime>Hj&&et!==1073741824&&(_e.flags|=128,tt=!0,Ej(rt,!1),_e.lanes=4194304);rt.isBackwards?(it.sibling=_e.child,_e.child=it):(et=rt.last,et!==null?et.sibling=it:_e.child=it,rt.last=it)}return rt.tail!==null?(_e=rt.tail,rt.rendering=_e,rt.tail=_e.sibling,rt.renderingStartTime=B(),_e.sibling=null,et=M$2.current,G(M$2,tt?et&1|2:et&1),_e):(S$1(_e),null);case 22:case 23:return Ij(),tt=_e.memoizedState!==null,_!==null&&_.memoizedState!==null!==tt&&(_e.flags|=8192),tt&&_e.mode&1?gj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$2(156,_e.tag))}function Jj(_,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),_=_e.flags,_&65536?(_e.flags=_&-65537|128,_e):null;case 3:return Jh(),E(Wf),E(H$1),Oh(),_=_e.flags,_&65536&&!(_&128)?(_e.flags=_&-65537|128,_e):null;case 5:return Lh(_e),null;case 13:if(E(M$2),_=_e.memoizedState,_!==null&&_.dehydrated!==null){if(_e.alternate===null)throw Error(p$2(340));Ig()}return _=_e.flags,_&65536?(_e.flags=_&-65537|128,_e):null;case 19:return E(M$2),null;case 4:return Jh(),null;case 10:return Rg(_e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(_,_e){var et=_.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(tt){W(_,_e,tt)}else et.current=null}function Nj(_,_e,et){try{et()}catch(tt){W(_,_e,tt)}}var Oj=!1;function Pj(_,_e){if(Cf=dd,_=Me(),Ne(_)){if("selectionStart"in _)var et={start:_.selectionStart,end:_.selectionEnd};else e:{et=(et=_.ownerDocument)&&et.defaultView||window;var tt=et.getSelection&&et.getSelection();if(tt&&tt.rangeCount!==0){et=tt.anchorNode;var nt=tt.anchorOffset,rt=tt.focusNode;tt=tt.focusOffset;try{et.nodeType,rt.nodeType}catch{et=null;break e}var it=0,ot=-1,lt=-1,st=0,at=0,ut=_,ct=null;t:for(;;){for(var ht;ut!==et||nt!==0&&ut.nodeType!==3||(ot=it+nt),ut!==rt||tt!==0&&ut.nodeType!==3||(lt=it+tt),ut.nodeType===3&&(it+=ut.nodeValue.length),(ht=ut.firstChild)!==null;)ct=ut,ut=ht;for(;;){if(ut===_)break t;if(ct===et&&++st===nt&&(ot=it),ct===rt&&++at===tt&&(lt=it),(ht=ut.nextSibling)!==null)break;ut=ct,ct=ut.parentNode}ut=ht}et=ot===-1||lt===-1?null:{start:ot,end:lt}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:_,selectionRange:et},dd=!1,V=_e;V!==null;)if(_e=V,_=_e.child,(_e.subtreeFlags&1028)!==0&&_!==null)_.return=_e,V=_;else for(;V!==null;){_e=V;try{var dt=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var vt=dt.memoizedProps,yt=dt.memoizedState,gt=_e.stateNode,xt=gt.getSnapshotBeforeUpdate(_e.elementType===_e.type?vt:Lg(_e.type,vt),yt);gt.__reactInternalSnapshotBeforeUpdate=xt}break;case 3:var ft=_e.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(pt){W(_e,_e.return,pt)}if(_=_e.sibling,_!==null){_.return=_e.return,V=_;break}V=_e.return}return dt=Oj,Oj=!1,dt}function Qj(_,_e,et){var tt=_e.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var nt=tt=tt.next;do{if((nt.tag&_)===_){var rt=nt.destroy;nt.destroy=void 0,rt!==void 0&&Nj(_e,et,rt)}nt=nt.next}while(nt!==tt)}}function Rj(_,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var et=_e=_e.next;do{if((et.tag&_)===_){var tt=et.create;et.destroy=tt()}et=et.next}while(et!==_e)}}function Sj(_){var _e=_.ref;if(_e!==null){var et=_.stateNode;switch(_.tag){case 5:_=et;break;default:_=et}typeof _e=="function"?_e(_):_e.current=_}}function Tj(_){var _e=_.alternate;_e!==null&&(_.alternate=null,Tj(_e)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(_e=_.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Uj(_){return _.tag===5||_.tag===3||_.tag===4}function Vj(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Uj(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function Wj(_,_e,et){var tt=_.tag;if(tt===5||tt===6)_=_.stateNode,_e?et.nodeType===8?et.parentNode.insertBefore(_,_e):et.insertBefore(_,_e):(et.nodeType===8?(_e=et.parentNode,_e.insertBefore(_,et)):(_e=et,_e.appendChild(_)),et=et._reactRootContainer,et!=null||_e.onclick!==null||(_e.onclick=Bf));else if(tt!==4&&(_=_.child,_!==null))for(Wj(_,_e,et),_=_.sibling;_!==null;)Wj(_,_e,et),_=_.sibling}function Xj(_,_e,et){var tt=_.tag;if(tt===5||tt===6)_=_.stateNode,_e?et.insertBefore(_,_e):et.appendChild(_);else if(tt!==4&&(_=_.child,_!==null))for(Xj(_,_e,et),_=_.sibling;_!==null;)Xj(_,_e,et),_=_.sibling}var X=null,Yj=!1;function Zj(_,_e,et){for(et=et.child;et!==null;)ak(_,_e,et),et=et.sibling}function ak(_,_e,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U||Mj(et,_e);case 6:var tt=X,nt=Yj;X=null,Zj(_,_e,et),X=tt,Yj=nt,X!==null&&(Yj?(_=X,et=et.stateNode,_.nodeType===8?_.parentNode.removeChild(et):_.removeChild(et)):X.removeChild(et.stateNode));break;case 18:X!==null&&(Yj?(_=X,et=et.stateNode,_.nodeType===8?Kf(_.parentNode,et):_.nodeType===1&&Kf(_,et),bd(_)):Kf(X,et.stateNode));break;case 4:tt=X,nt=Yj,X=et.stateNode.containerInfo,Yj=!0,Zj(_,_e,et),X=tt,Yj=nt;break;case 0:case 11:case 14:case 15:if(!U&&(tt=et.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){nt=tt=tt.next;do{var rt=nt,it=rt.destroy;rt=rt.tag,it!==void 0&&(rt&2||rt&4)&&Nj(et,_e,it),nt=nt.next}while(nt!==tt)}Zj(_,_e,et);break;case 1:if(!U&&(Mj(et,_e),tt=et.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=et.memoizedProps,tt.state=et.memoizedState,tt.componentWillUnmount()}catch(ot){W(et,_e,ot)}Zj(_,_e,et);break;case 21:Zj(_,_e,et);break;case 22:et.mode&1?(U=(tt=U)||et.memoizedState!==null,Zj(_,_e,et),U=tt):Zj(_,_e,et);break;default:Zj(_,_e,et)}}function bk(_){var _e=_.updateQueue;if(_e!==null){_.updateQueue=null;var et=_.stateNode;et===null&&(et=_.stateNode=new Lj),_e.forEach(function(tt){var nt=ck.bind(null,_,tt);et.has(tt)||(et.add(tt),tt.then(nt,nt))})}}function dk(_,_e){var et=_e.deletions;if(et!==null)for(var tt=0;tt<et.length;tt++){var nt=et[tt];try{var rt=_,it=_e,ot=it;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Yj=!1;break e;case 3:X=ot.stateNode.containerInfo,Yj=!0;break e;case 4:X=ot.stateNode.containerInfo,Yj=!0;break e}ot=ot.return}if(X===null)throw Error(p$2(160));ak(rt,it,nt),X=null,Yj=!1;var lt=nt.alternate;lt!==null&&(lt.return=null),nt.return=null}catch(st){W(nt,_e,st)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)ek(_e,_),_e=_e.sibling}function ek(_,_e){var et=_.alternate,tt=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(dk(_e,_),fk(_),tt&4){try{Qj(3,_,_.return),Rj(3,_)}catch(vt){W(_,_.return,vt)}try{Qj(5,_,_.return)}catch(vt){W(_,_.return,vt)}}break;case 1:dk(_e,_),fk(_),tt&512&&et!==null&&Mj(et,et.return);break;case 5:if(dk(_e,_),fk(_),tt&512&&et!==null&&Mj(et,et.return),_.flags&32){var nt=_.stateNode;try{ob(nt,"")}catch(vt){W(_,_.return,vt)}}if(tt&4&&(nt=_.stateNode,nt!=null)){var rt=_.memoizedProps,it=et!==null?et.memoizedProps:rt,ot=_.type,lt=_.updateQueue;if(_.updateQueue=null,lt!==null)try{ot==="input"&&rt.type==="radio"&&rt.name!=null&&ab(nt,rt),vb(ot,it);var st=vb(ot,rt);for(it=0;it<lt.length;it+=2){var at=lt[it],ut=lt[it+1];at==="style"?sb(nt,ut):at==="dangerouslySetInnerHTML"?nb(nt,ut):at==="children"?ob(nt,ut):ta(nt,at,ut,st)}switch(ot){case"input":bb(nt,rt);break;case"textarea":ib(nt,rt);break;case"select":var ct=nt._wrapperState.wasMultiple;nt._wrapperState.wasMultiple=!!rt.multiple;var ht=rt.value;ht!=null?fb(nt,!!rt.multiple,ht,!1):ct!==!!rt.multiple&&(rt.defaultValue!=null?fb(nt,!!rt.multiple,rt.defaultValue,!0):fb(nt,!!rt.multiple,rt.multiple?[]:"",!1))}nt[Pf]=rt}catch(vt){W(_,_.return,vt)}}break;case 6:if(dk(_e,_),fk(_),tt&4){if(_.stateNode===null)throw Error(p$2(162));nt=_.stateNode,rt=_.memoizedProps;try{nt.nodeValue=rt}catch(vt){W(_,_.return,vt)}}break;case 3:if(dk(_e,_),fk(_),tt&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(vt){W(_,_.return,vt)}break;case 4:dk(_e,_),fk(_);break;case 13:dk(_e,_),fk(_),nt=_.child,nt.flags&8192&&(rt=nt.memoizedState!==null,nt.stateNode.isHidden=rt,!rt||nt.alternate!==null&&nt.alternate.memoizedState!==null||(gk=B())),tt&4&&bk(_);break;case 22:if(at=et!==null&&et.memoizedState!==null,_.mode&1?(U=(st=U)||at,dk(_e,_),U=st):dk(_e,_),fk(_),tt&8192){if(st=_.memoizedState!==null,(_.stateNode.isHidden=st)&&!at&&_.mode&1)for(V=_,at=_.child;at!==null;){for(ut=V=at;V!==null;){switch(ct=V,ht=ct.child,ct.tag){case 0:case 11:case 14:case 15:Qj(4,ct,ct.return);break;case 1:Mj(ct,ct.return);var dt=ct.stateNode;if(typeof dt.componentWillUnmount=="function"){tt=ct,et=ct.return;try{_e=tt,dt.props=_e.memoizedProps,dt.state=_e.memoizedState,dt.componentWillUnmount()}catch(vt){W(tt,et,vt)}}break;case 5:Mj(ct,ct.return);break;case 22:if(ct.memoizedState!==null){hk(ut);continue}}ht!==null?(ht.return=ct,V=ht):hk(ut)}at=at.sibling}e:for(at=null,ut=_;;){if(ut.tag===5){if(at===null){at=ut;try{nt=ut.stateNode,st?(rt=nt.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none"):(ot=ut.stateNode,lt=ut.memoizedProps.style,it=lt!=null&&lt.hasOwnProperty("display")?lt.display:null,ot.style.display=rb("display",it))}catch(vt){W(_,_.return,vt)}}}else if(ut.tag===6){if(at===null)try{ut.stateNode.nodeValue=st?"":ut.memoizedProps}catch(vt){W(_,_.return,vt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===_)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===_)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===_)break e;at===ut&&(at=null),ut=ut.return}at===ut&&(at=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(_e,_),fk(_),tt&4&&bk(_);break;case 21:break;default:dk(_e,_),fk(_)}}function fk(_){var _e=_.flags;if(_e&2){try{e:{for(var et=_.return;et!==null;){if(Uj(et)){var tt=et;break e}et=et.return}throw Error(p$2(160))}switch(tt.tag){case 5:var nt=tt.stateNode;tt.flags&32&&(ob(nt,""),tt.flags&=-33);var rt=Vj(_);Xj(_,rt,nt);break;case 3:case 4:var it=tt.stateNode.containerInfo,ot=Vj(_);Wj(_,ot,it);break;default:throw Error(p$2(161))}}catch(lt){W(_,_.return,lt)}_.flags&=-3}_e&4096&&(_.flags&=-4097)}function ik(_,_e,et){V=_,jk(_)}function jk(_,_e,et){for(var tt=(_.mode&1)!==0;V!==null;){var nt=V,rt=nt.child;if(nt.tag===22&&tt){var it=nt.memoizedState!==null||Kj;if(!it){var ot=nt.alternate,lt=ot!==null&&ot.memoizedState!==null||U;ot=Kj;var st=U;if(Kj=it,(U=lt)&&!st)for(V=nt;V!==null;)it=V,lt=it.child,it.tag===22&&it.memoizedState!==null?kk(nt):lt!==null?(lt.return=it,V=lt):kk(nt);for(;rt!==null;)V=rt,jk(rt),rt=rt.sibling;V=nt,Kj=ot,U=st}lk(_)}else nt.subtreeFlags&8772&&rt!==null?(rt.return=nt,V=rt):lk(_)}}function lk(_){for(;V!==null;){var _e=V;if(_e.flags&8772){var et=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U||Rj(5,_e);break;case 1:var tt=_e.stateNode;if(_e.flags&4&&!U)if(et===null)tt.componentDidMount();else{var nt=_e.elementType===_e.type?et.memoizedProps:Lg(_e.type,et.memoizedProps);tt.componentDidUpdate(nt,et.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var rt=_e.updateQueue;rt!==null&&ih(_e,rt,tt);break;case 3:var it=_e.updateQueue;if(it!==null){if(et=null,_e.child!==null)switch(_e.child.tag){case 5:et=_e.child.stateNode;break;case 1:et=_e.child.stateNode}ih(_e,it,et)}break;case 5:var ot=_e.stateNode;if(et===null&&_e.flags&4){et=ot;var lt=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":lt.autoFocus&&et.focus();break;case"img":lt.src&&(et.src=lt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var st=_e.alternate;if(st!==null){var at=st.memoizedState;if(at!==null){var ut=at.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||_e.flags&512&&Sj(_e)}catch(ct){W(_e,_e.return,ct)}}if(_e===_){V=null;break}if(et=_e.sibling,et!==null){et.return=_e.return,V=et;break}V=_e.return}}function hk(_){for(;V!==null;){var _e=V;if(_e===_){V=null;break}var et=_e.sibling;if(et!==null){et.return=_e.return,V=et;break}V=_e.return}}function kk(_){for(;V!==null;){var _e=V;try{switch(_e.tag){case 0:case 11:case 15:var et=_e.return;try{Rj(4,_e)}catch(lt){W(_e,et,lt)}break;case 1:var tt=_e.stateNode;if(typeof tt.componentDidMount=="function"){var nt=_e.return;try{tt.componentDidMount()}catch(lt){W(_e,nt,lt)}}var rt=_e.return;try{Sj(_e)}catch(lt){W(_e,rt,lt)}break;case 5:var it=_e.return;try{Sj(_e)}catch(lt){W(_e,it,lt)}}}catch(lt){W(_e,_e.return,lt)}if(_e===_){V=null;break}var ot=_e.sibling;if(ot!==null){ot.return=_e.return,V=ot;break}V=_e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(_){return _.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(_=C,_!==0||(_=window.event,_=_===void 0?16:jd(_.type)),_):1}function mh(_,_e,et,tt){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(_,et,tt),(!(K&2)||_!==R)&&(_===R&&(!(K&2)&&(rk|=et),T===4&&Dk(_,Z)),Ek(_,tt),et===1&&K===0&&!(_e.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(_,_e){var et=_.callbackNode;wc(_,_e);var tt=uc(_,_===R?Z:0);if(tt===0)et!==null&&bc(et),_.callbackNode=null,_.callbackPriority=0;else if(_e=tt&-tt,_.callbackPriority!==_e){if(et!=null&&bc(et),_e===1)_.tag===0?ig(Fk.bind(null,_)):hg(Fk.bind(null,_)),Jf(function(){!(K&6)&&jg()}),et=null;else{switch(Dc(tt)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Gk(et,Hk.bind(null,_))}_.callbackPriority=_e,_.callbackNode=et}}function Hk(_,_e){if(Bk=-1,Ck=0,K&6)throw Error(p$2(327));var et=_.callbackNode;if(Ik()&&_.callbackNode!==et)return null;var tt=uc(_,_===R?Z:0);if(tt===0)return null;if(tt&30||tt&_.expiredLanes||_e)_e=Jk(_,tt);else{_e=tt;var nt=K;K|=2;var rt=Kk();(R!==_||Z!==_e)&&(vk=null,Hj=B()+500,Lk(_,_e));do try{Mk();break}catch(ot){Nk(_,ot)}while(1);Qg(),nk.current=rt,K=nt,Y!==null?_e=0:(R=null,Z=0,_e=T)}if(_e!==0){if(_e===2&&(nt=xc(_),nt!==0&&(tt=nt,_e=Ok(_,nt))),_e===1)throw et=qk,Lk(_,0),Dk(_,tt),Ek(_,B()),et;if(_e===6)Dk(_,tt);else{if(nt=_.current.alternate,!(tt&30)&&!Pk(nt)&&(_e=Jk(_,tt),_e===2&&(rt=xc(_),rt!==0&&(tt=rt,_e=Ok(_,rt))),_e===1))throw et=qk,Lk(_,0),Dk(_,tt),Ek(_,B()),et;switch(_.finishedWork=nt,_.finishedLanes=tt,_e){case 0:case 1:throw Error(p$2(345));case 2:Qk(_,uk,vk);break;case 3:if(Dk(_,tt),(tt&130023424)===tt&&(_e=gk+500-B(),10<_e)){if(uc(_,0)!==0)break;if(nt=_.suspendedLanes,(nt&tt)!==tt){L(),_.pingedLanes|=_.suspendedLanes&nt;break}_.timeoutHandle=Ff(Qk.bind(null,_,uk,vk),_e);break}Qk(_,uk,vk);break;case 4:if(Dk(_,tt),(tt&4194240)===tt)break;for(_e=_.eventTimes,nt=-1;0<tt;){var it=31-oc(tt);rt=1<<it,it=_e[it],it>nt&&(nt=it),tt&=~rt}if(tt=nt,tt=B()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){_.timeoutHandle=Ff(Qk.bind(null,_,uk,vk),tt);break}Qk(_,uk,vk);break;case 5:Qk(_,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(_,B()),_.callbackNode===et?Hk.bind(null,_):null}function Ok(_,_e){var et=tk;return _.current.memoizedState.isDehydrated&&(Lk(_,_e).flags|=256),_=Jk(_,_e),_!==2&&(_e=uk,uk=et,_e!==null&&Gj(_e)),_}function Gj(_){uk===null?uk=_:uk.push.apply(uk,_)}function Pk(_){for(var _e=_;;){if(_e.flags&16384){var et=_e.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var tt=0;tt<et.length;tt++){var nt=et[tt],rt=nt.getSnapshot;nt=nt.value;try{if(!He(rt(),nt))return!1}catch{return!1}}}if(et=_e.child,_e.subtreeFlags&16384&&et!==null)et.return=_e,_e=et;else{if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Dk(_,_e){for(_e&=~sk,_e&=~rk,_.suspendedLanes|=_e,_.pingedLanes&=~_e,_=_.expirationTimes;0<_e;){var et=31-oc(_e),tt=1<<et;_[et]=-1,_e&=~tt}}function Fk(_){if(K&6)throw Error(p$2(327));Ik();var _e=uc(_,0);if(!(_e&1))return Ek(_,B()),null;var et=Jk(_,_e);if(_.tag!==0&&et===2){var tt=xc(_);tt!==0&&(_e=tt,et=Ok(_,tt))}if(et===1)throw et=qk,Lk(_,0),Dk(_,_e),Ek(_,B()),et;if(et===6)throw Error(p$2(345));return _.finishedWork=_.current.alternate,_.finishedLanes=_e,Qk(_,uk,vk),Ek(_,B()),null}function Rk(_,_e){var et=K;K|=1;try{return _(_e)}finally{K=et,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(_){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var _e=K;K|=1;var et=pk.transition,tt=C;try{if(pk.transition=null,C=1,_)return _()}finally{C=tt,pk.transition=et,K=_e,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(_,_e){_.finishedWork=null,_.finishedLanes=0;var et=_.timeoutHandle;if(et!==-1&&(_.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var tt=et;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E(Wf),E(H$1),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E(M$2);break;case 19:E(M$2);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}et=et.return}if(R=_,Y=_=wh(_.current,null),Z=gj=_e,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_e=0;_e<Wg.length;_e++)if(et=Wg[_e],tt=et.interleaved,tt!==null){et.interleaved=null;var nt=tt.next,rt=et.pending;if(rt!==null){var it=rt.next;rt.next=nt,tt.next=it}et.pending=tt}Wg=null}return _}function Nk(_,_e){do{var et=Y;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var nt=tt.queue;nt!==null&&(nt.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P=O=N$1=null,Th=!1,Uh=0,ok.current=null,et===null||et.return===null){T=1,qk=_e,Y=null;break}e:{var rt=_,it=et.return,ot=et,lt=_e;if(_e=Z,ot.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var st=lt,at=ot,ut=at.tag;if(!(at.mode&1)&&(ut===0||ut===11||ut===15)){var ct=at.alternate;ct?(at.updateQueue=ct.updateQueue,at.memoizedState=ct.memoizedState,at.lanes=ct.lanes):(at.updateQueue=null,at.memoizedState=null)}var ht=Vi(it);if(ht!==null){ht.flags&=-257,Wi(ht,it,ot,rt,_e),ht.mode&1&&Ti(rt,st,_e),_e=ht,lt=st;var dt=_e.updateQueue;if(dt===null){var vt=new Set;vt.add(lt),_e.updateQueue=vt}else dt.add(lt);break e}else{if(!(_e&1)){Ti(rt,st,_e),uj();break e}lt=Error(p$2(426))}}else if(I&&ot.mode&1){var yt=Vi(it);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),Wi(yt,it,ot,rt,_e),Jg(Ki(lt,ot));break e}}rt=lt=Ki(lt,ot),T!==4&&(T=2),tk===null?tk=[rt]:tk.push(rt),rt=it;do{switch(rt.tag){case 3:rt.flags|=65536,_e&=-_e,rt.lanes|=_e;var gt=Oi(rt,lt,_e);fh(rt,gt);break e;case 1:ot=lt;var xt=rt.type,ft=rt.stateNode;if(!(rt.flags&128)&&(typeof xt.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Si===null||!Si.has(ft)))){rt.flags|=65536,_e&=-_e,rt.lanes|=_e;var pt=Ri(rt,ot,_e);fh(rt,pt);break e}}rt=rt.return}while(rt!==null)}Tk(et)}catch(mt){_e=mt,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Kk(){var _=nk.current;return nk.current=ai,_===null?ai:_}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(_,_e){var et=K;K|=2;var tt=Kk();(R!==_||Z!==_e)&&(vk=null,Lk(_,_e));do try{Uk();break}catch(nt){Nk(_,nt)}while(1);if(Qg(),K=et,nk.current=tt,Y!==null)throw Error(p$2(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(_){var _e=Wk(_.alternate,_,gj);_.memoizedProps=_.pendingProps,_e===null?Tk(_):Y=_e,ok.current=null}function Tk(_){var _e=_;do{var et=_e.alternate;if(_=_e.return,_e.flags&32768){if(et=Jj(et,_e),et!==null){et.flags&=32767,Y=et;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{T=6,Y=null;return}}else if(et=Fj(et,_e,gj),et!==null){Y=et;return}if(_e=_e.sibling,_e!==null){Y=_e;return}Y=_e=_}while(_e!==null);T===0&&(T=5)}function Qk(_,_e,et){var tt=C,nt=pk.transition;try{pk.transition=null,C=1,Xk(_,_e,et,tt)}finally{pk.transition=nt,C=tt}return null}function Xk(_,_e,et,tt){do Ik();while(xk!==null);if(K&6)throw Error(p$2(327));et=_.finishedWork;var nt=_.finishedLanes;if(et===null)return null;if(_.finishedWork=null,_.finishedLanes=0,et===_.current)throw Error(p$2(177));_.callbackNode=null,_.callbackPriority=0;var rt=et.lanes|et.childLanes;if(Bc(_,rt),_===R&&(Y=R=null,Z=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),rt=(et.flags&15990)!==0,et.subtreeFlags&15990||rt){rt=pk.transition,pk.transition=null;var it=C;C=1;var ot=K;K|=4,ok.current=null,Pj(_,et),ek(et,_),Oe(Df),dd=!!Cf,Df=Cf=null,_.current=et,ik(et),dc(),K=ot,C=it,pk.transition=rt}else _.current=et;if(wk&&(wk=!1,xk=_,yk=nt),rt=_.pendingLanes,rt===0&&(Si=null),mc(et.stateNode),Ek(_,B()),_e!==null)for(tt=_.onRecoverableError,et=0;et<_e.length;et++)nt=_e[et],tt(nt.value,{componentStack:nt.stack,digest:nt.digest});if(Pi)throw Pi=!1,_=Qi,Qi=null,_;return yk&1&&_.tag!==0&&Ik(),rt=_.pendingLanes,rt&1?_===Ak?zk++:(zk=0,Ak=_):zk=0,jg(),null}function Ik(){if(xk!==null){var _=Dc(yk),_e=pk.transition,et=C;try{if(pk.transition=null,C=16>_?16:_,xk===null)var tt=!1;else{if(_=xk,xk=null,yk=0,K&6)throw Error(p$2(331));var nt=K;for(K|=4,V=_.current;V!==null;){var rt=V,it=rt.child;if(V.flags&16){var ot=rt.deletions;if(ot!==null){for(var lt=0;lt<ot.length;lt++){var st=ot[lt];for(V=st;V!==null;){var at=V;switch(at.tag){case 0:case 11:case 15:Qj(8,at,rt)}var ut=at.child;if(ut!==null)ut.return=at,V=ut;else for(;V!==null;){at=V;var ct=at.sibling,ht=at.return;if(Tj(at),at===st){V=null;break}if(ct!==null){ct.return=ht,V=ct;break}V=ht}}}var dt=rt.alternate;if(dt!==null){var vt=dt.child;if(vt!==null){dt.child=null;do{var yt=vt.sibling;vt.sibling=null,vt=yt}while(vt!==null)}}V=rt}}if(rt.subtreeFlags&2064&&it!==null)it.return=rt,V=it;else e:for(;V!==null;){if(rt=V,rt.flags&2048)switch(rt.tag){case 0:case 11:case 15:Qj(9,rt,rt.return)}var gt=rt.sibling;if(gt!==null){gt.return=rt.return,V=gt;break e}V=rt.return}}var xt=_.current;for(V=xt;V!==null;){it=V;var ft=it.child;if(it.subtreeFlags&2064&&ft!==null)ft.return=it,V=ft;else e:for(it=xt;V!==null;){if(ot=V,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Rj(9,ot)}}catch(mt){W(ot,ot.return,mt)}if(ot===it){V=null;break e}var pt=ot.sibling;if(pt!==null){pt.return=ot.return,V=pt;break e}V=ot.return}}if(K=nt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_)}catch{}tt=!0}return tt}finally{C=et,pk.transition=_e}}return!1}function Yk(_,_e,et){_e=Ki(et,_e),_e=Oi(_,_e,1),_=dh(_,_e,1),_e=L(),_!==null&&(Ac(_,1,_e),Ek(_,_e))}function W(_,_e,et){if(_.tag===3)Yk(_,_,et);else for(;_e!==null;){if(_e.tag===3){Yk(_e,_,et);break}else if(_e.tag===1){var tt=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){_=Ki(et,_),_=Ri(_e,_,1),_e=dh(_e,_,1),_=L(),_e!==null&&(Ac(_e,1,_),Ek(_e,_));break}}_e=_e.return}}function Ui(_,_e,et){var tt=_.pingCache;tt!==null&&tt.delete(_e),_e=L(),_.pingedLanes|=_.suspendedLanes&et,R===_&&(Z&et)===et&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(_,0):sk|=et),Ek(_,_e)}function Zk(_,_e){_e===0&&(_.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var et=L();_=Zg(_,_e),_!==null&&(Ac(_,_e,et),Ek(_,et))}function vj(_){var _e=_.memoizedState,et=0;_e!==null&&(et=_e.retryLane),Zk(_,et)}function ck(_,_e){var et=0;switch(_.tag){case 13:var tt=_.stateNode,nt=_.memoizedState;nt!==null&&(et=nt.retryLane);break;case 19:tt=_.stateNode;break;default:throw Error(p$2(314))}tt!==null&&tt.delete(_e),Zk(_,et)}var Wk;Wk=function(_,_e,et){if(_!==null)if(_.memoizedProps!==_e.pendingProps||Wf.current)Ug=!0;else{if(!(_.lanes&et)&&!(_e.flags&128))return Ug=!1,zj(_,_e,et);Ug=!!(_.flags&131072)}else Ug=!1,I&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var tt=_e.type;jj(_,_e),_=_e.pendingProps;var nt=Yf(_e,H$1.current);Tg(_e,et),nt=Xh(null,_e,tt,_,nt,et);var rt=bi();return _e.flags|=1,typeof nt=="object"&&nt!==null&&typeof nt.render=="function"&&nt.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(tt)?(rt=!0,cg(_e)):rt=!1,_e.memoizedState=nt.state!==null&&nt.state!==void 0?nt.state:null,ah(_e),nt.updater=nh,_e.stateNode=nt,nt._reactInternals=_e,rh(_e,tt,_,et),_e=kj(null,_e,tt,!0,rt,et)):(_e.tag=0,I&&rt&&vg(_e),Yi(null,_e,nt,et),_e=_e.child),_e;case 16:tt=_e.elementType;e:{switch(jj(_,_e),_=_e.pendingProps,nt=tt._init,tt=nt(tt._payload),_e.type=tt,nt=_e.tag=$k(tt),_=Lg(tt,_),nt){case 0:_e=dj(null,_e,tt,_,et);break e;case 1:_e=ij(null,_e,tt,_,et);break e;case 11:_e=Zi(null,_e,tt,_,et);break e;case 14:_e=aj(null,_e,tt,Lg(tt.type,_),et);break e}throw Error(p$2(306,tt,""))}return _e;case 0:return tt=_e.type,nt=_e.pendingProps,nt=_e.elementType===tt?nt:Lg(tt,nt),dj(_,_e,tt,nt,et);case 1:return tt=_e.type,nt=_e.pendingProps,nt=_e.elementType===tt?nt:Lg(tt,nt),ij(_,_e,tt,nt,et);case 3:e:{if(lj(_e),_===null)throw Error(p$2(387));tt=_e.pendingProps,rt=_e.memoizedState,nt=rt.element,bh(_,_e),gh(_e,tt,null,et);var it=_e.memoizedState;if(tt=it.element,rt.isDehydrated)if(rt={element:tt,isDehydrated:!1,cache:it.cache,pendingSuspenseBoundaries:it.pendingSuspenseBoundaries,transitions:it.transitions},_e.updateQueue.baseState=rt,_e.memoizedState=rt,_e.flags&256){nt=Ki(Error(p$2(423)),_e),_e=mj(_,_e,tt,et,nt);break e}else if(tt!==nt){nt=Ki(Error(p$2(424)),_e),_e=mj(_,_e,tt,et,nt);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I=!0,zg=null,et=Ch(_e,null,tt,et),_e.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),tt===nt){_e=$i(_,_e,et);break e}Yi(_,_e,tt,et)}_e=_e.child}return _e;case 5:return Kh(_e),_===null&&Eg(_e),tt=_e.type,nt=_e.pendingProps,rt=_!==null?_.memoizedProps:null,it=nt.children,Ef(tt,nt)?it=null:rt!==null&&Ef(tt,rt)&&(_e.flags|=32),hj(_,_e),Yi(_,_e,it,et),_e.child;case 6:return _===null&&Eg(_e),null;case 13:return pj(_,_e,et);case 4:return Ih(_e,_e.stateNode.containerInfo),tt=_e.pendingProps,_===null?_e.child=Bh(_e,null,tt,et):Yi(_,_e,tt,et),_e.child;case 11:return tt=_e.type,nt=_e.pendingProps,nt=_e.elementType===tt?nt:Lg(tt,nt),Zi(_,_e,tt,nt,et);case 7:return Yi(_,_e,_e.pendingProps,et),_e.child;case 8:return Yi(_,_e,_e.pendingProps.children,et),_e.child;case 12:return Yi(_,_e,_e.pendingProps.children,et),_e.child;case 10:e:{if(tt=_e.type._context,nt=_e.pendingProps,rt=_e.memoizedProps,it=nt.value,G(Mg,tt._currentValue),tt._currentValue=it,rt!==null)if(He(rt.value,it)){if(rt.children===nt.children&&!Wf.current){_e=$i(_,_e,et);break e}}else for(rt=_e.child,rt!==null&&(rt.return=_e);rt!==null;){var ot=rt.dependencies;if(ot!==null){it=rt.child;for(var lt=ot.firstContext;lt!==null;){if(lt.context===tt){if(rt.tag===1){lt=ch(-1,et&-et),lt.tag=2;var st=rt.updateQueue;if(st!==null){st=st.shared;var at=st.pending;at===null?lt.next=lt:(lt.next=at.next,at.next=lt),st.pending=lt}}rt.lanes|=et,lt=rt.alternate,lt!==null&&(lt.lanes|=et),Sg(rt.return,et,_e),ot.lanes|=et;break}lt=lt.next}}else if(rt.tag===10)it=rt.type===_e.type?null:rt.child;else if(rt.tag===18){if(it=rt.return,it===null)throw Error(p$2(341));it.lanes|=et,ot=it.alternate,ot!==null&&(ot.lanes|=et),Sg(it,et,_e),it=rt.sibling}else it=rt.child;if(it!==null)it.return=rt;else for(it=rt;it!==null;){if(it===_e){it=null;break}if(rt=it.sibling,rt!==null){rt.return=it.return,it=rt;break}it=it.return}rt=it}Yi(_,_e,nt.children,et),_e=_e.child}return _e;case 9:return nt=_e.type,tt=_e.pendingProps.children,Tg(_e,et),nt=Vg(nt),tt=tt(nt),_e.flags|=1,Yi(_,_e,tt,et),_e.child;case 14:return tt=_e.type,nt=Lg(tt,_e.pendingProps),nt=Lg(tt.type,nt),aj(_,_e,tt,nt,et);case 15:return cj(_,_e,_e.type,_e.pendingProps,et);case 17:return tt=_e.type,nt=_e.pendingProps,nt=_e.elementType===tt?nt:Lg(tt,nt),jj(_,_e),_e.tag=1,Zf(tt)?(_=!0,cg(_e)):_=!1,Tg(_e,et),ph(_e,tt,nt),rh(_e,tt,nt,et),kj(null,_e,tt,!0,_,et);case 19:return yj(_,_e,et);case 22:return ej(_,_e,et)}throw Error(p$2(156,_e.tag))};function Gk(_,_e){return ac(_,_e)}function al(_,_e,et,tt){this.tag=_,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_,_e,et,tt){return new al(_,_e,et,tt)}function bj(_){return _=_.prototype,!(!_||!_.isReactComponent)}function $k(_){if(typeof _=="function")return bj(_)?1:0;if(_!=null){if(_=_.$$typeof,_===Da)return 11;if(_===Ga)return 14}return 2}function wh(_,_e){var et=_.alternate;return et===null?(et=Bg(_.tag,_e,_.key,_.mode),et.elementType=_.elementType,et.type=_.type,et.stateNode=_.stateNode,et.alternate=_,_.alternate=et):(et.pendingProps=_e,et.type=_.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=_.flags&14680064,et.childLanes=_.childLanes,et.lanes=_.lanes,et.child=_.child,et.memoizedProps=_.memoizedProps,et.memoizedState=_.memoizedState,et.updateQueue=_.updateQueue,_e=_.dependencies,et.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},et.sibling=_.sibling,et.index=_.index,et.ref=_.ref,et}function yh(_,_e,et,tt,nt,rt){var it=2;if(tt=_,typeof _=="function")bj(_)&&(it=1);else if(typeof _=="string")it=5;else e:switch(_){case ya:return Ah(et.children,nt,rt,_e);case za:it=8,nt|=8;break;case Aa:return _=Bg(12,et,_e,nt|2),_.elementType=Aa,_.lanes=rt,_;case Ea:return _=Bg(13,et,_e,nt),_.elementType=Ea,_.lanes=rt,_;case Fa:return _=Bg(19,et,_e,nt),_.elementType=Fa,_.lanes=rt,_;case Ia:return qj(et,nt,rt,_e);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case Ba:it=10;break e;case Ca:it=9;break e;case Da:it=11;break e;case Ga:it=14;break e;case Ha:it=16,tt=null;break e}throw Error(p$2(130,_==null?_:typeof _,""))}return _e=Bg(it,et,_e,nt),_e.elementType=_,_e.type=tt,_e.lanes=rt,_e}function Ah(_,_e,et,tt){return _=Bg(7,_,tt,_e),_.lanes=et,_}function qj(_,_e,et,tt){return _=Bg(22,_,tt,_e),_.elementType=Ia,_.lanes=et,_.stateNode={isHidden:!1},_}function xh(_,_e,et){return _=Bg(6,_,null,_e),_.lanes=et,_}function zh(_,_e,et){return _e=Bg(4,_.children!==null?_.children:[],_.key,_e),_e.lanes=et,_e.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},_e}function bl(_,_e,et,tt,nt){this.tag=_e,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=nt,this.mutableSourceEagerHydrationData=null}function cl(_,_e,et,tt,nt,rt,it,ot,lt){return _=new bl(_,_e,et,ot,lt),_e===1?(_e=1,rt===!0&&(_e|=8)):_e=0,rt=Bg(3,null,null,_e),_.current=rt,rt.stateNode=_,rt.memoizedState={element:tt,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(rt),_}function dl(_,_e,et){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:_,containerInfo:_e,implementation:et}}function el(_){if(!_)return Vf;_=_._reactInternals;e:{if(Vb(_)!==_||_.tag!==1)throw Error(p$2(170));var _e=_;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$2(171))}if(_.tag===1){var et=_.type;if(Zf(et))return bg(_,et,_e)}return _e}function fl(_,_e,et,tt,nt,rt,it,ot,lt){return _=cl(et,tt,!0,_,nt,rt,it,ot,lt),_.context=el(null),et=_.current,tt=L(),nt=lh(et),rt=ch(tt,nt),rt.callback=_e??null,dh(et,rt,nt),_.current.lanes=nt,Ac(_,nt,tt),Ek(_,tt),_}function gl(_,_e,et,tt){var nt=_e.current,rt=L(),it=lh(nt);return et=el(et),_e.context===null?_e.context=et:_e.pendingContext=et,_e=ch(rt,it),_e.payload={element:_},tt=tt===void 0?null:tt,tt!==null&&(_e.callback=tt),_=dh(nt,_e,it),_!==null&&(mh(_,nt,it,rt),eh(_,nt,it)),it}function hl(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function il(_,_e){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var et=_.retryLane;_.retryLane=et!==0&&et<_e?et:_e}}function jl(_,_e){il(_,_e),(_=_.alternate)&&il(_,_e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_){console.error(_)};function ml(_){this._internalRoot=_}nl.prototype.render=ml.prototype.render=function(_){var _e=this._internalRoot;if(_e===null)throw Error(p$2(409));gl(_,_e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var _e=_.containerInfo;Sk(function(){gl(null,_,null,null)}),_e[uf]=null}};function nl(_){this._internalRoot=_}nl.prototype.unstable_scheduleHydration=function(_){if(_){var _e=Hc();_={blockedOn:null,target:_,priority:_e};for(var et=0;et<Qc.length&&_e!==0&&_e<Qc[et].priority;et++);Qc.splice(et,0,_),et===0&&Vc(_)}};function ol(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function pl(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_,_e,et,tt,nt){if(nt){if(typeof tt=="function"){var rt=tt;tt=function(){var st=hl(it);rt.call(st)}}var it=fl(_e,tt,_,0,null,!1,!1,"",ql);return _._reactRootContainer=it,_[uf]=it.current,sf(_.nodeType===8?_.parentNode:_),Sk(),it}for(;nt=_.lastChild;)_.removeChild(nt);if(typeof tt=="function"){var ot=tt;tt=function(){var st=hl(lt);ot.call(st)}}var lt=cl(_,0,!1,null,null,!1,!1,"",ql);return _._reactRootContainer=lt,_[uf]=lt.current,sf(_.nodeType===8?_.parentNode:_),Sk(function(){gl(_e,lt,et,tt)}),lt}function sl(_,_e,et,tt,nt){var rt=et._reactRootContainer;if(rt){var it=rt;if(typeof nt=="function"){var ot=nt;nt=function(){var lt=hl(it);ot.call(lt)}}gl(_e,it,_,nt)}else it=rl(et,_e,_,nt,tt);return hl(it)}Ec=function(_){switch(_.tag){case 3:var _e=_.stateNode;if(_e.current.memoizedState.isDehydrated){var et=tc(_e.pendingLanes);et!==0&&(Cc(_e,et|1),Ek(_e,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(_,1);if(tt!==null){var nt=L();mh(tt,_,1,nt)}}),jl(_,1)}};Fc=function(_){if(_.tag===13){var _e=Zg(_,134217728);if(_e!==null){var et=L();mh(_e,_,134217728,et)}jl(_,134217728)}};Gc=function(_){if(_.tag===13){var _e=lh(_),et=Zg(_,_e);if(et!==null){var tt=L();mh(et,_,_e,tt)}jl(_,_e)}};Hc=function(){return C};Ic=function(_,_e){var et=C;try{return C=_,_e()}finally{C=et}};yb=function(_,_e,et){switch(_e){case"input":if(bb(_,et),_e=et.name,et.type==="radio"&&_e!=null){for(et=_;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<et.length;_e++){var tt=et[_e];if(tt!==_&&tt.form===_.form){var nt=Db(tt);if(!nt)throw Error(p$2(90));Wa(tt),bb(tt,nt)}}}break;case"textarea":ib(_,et);break;case"select":_e=et.value,_e!=null&&fb(_,!!et.multiple,_e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Zb(_),_===null?null:_.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_,_e){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_e))throw Error(p$2(200));return dl(_,_e,null,et)};reactDom_production_min.createRoot=function(_,_e){if(!ol(_))throw Error(p$2(299));var et=!1,tt="",nt=ll;return _e!=null&&(_e.unstable_strictMode===!0&&(et=!0),_e.identifierPrefix!==void 0&&(tt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(nt=_e.onRecoverableError)),_e=cl(_,1,!1,null,null,et,!1,tt,nt),_[uf]=_e.current,sf(_.nodeType===8?_.parentNode:_),new ml(_e)};reactDom_production_min.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var _e=_._reactInternals;if(_e===void 0)throw typeof _.render=="function"?Error(p$2(188)):(_=Object.keys(_).join(","),Error(p$2(268,_)));return _=Zb(_e),_=_===null?null:_.stateNode,_};reactDom_production_min.flushSync=function(_){return Sk(_)};reactDom_production_min.hydrate=function(_,_e,et){if(!pl(_e))throw Error(p$2(200));return sl(null,_,_e,!0,et)};reactDom_production_min.hydrateRoot=function(_,_e,et){if(!ol(_))throw Error(p$2(405));var tt=et!=null&&et.hydratedSources||null,nt=!1,rt="",it=ll;if(et!=null&&(et.unstable_strictMode===!0&&(nt=!0),et.identifierPrefix!==void 0&&(rt=et.identifierPrefix),et.onRecoverableError!==void 0&&(it=et.onRecoverableError)),_e=fl(_e,null,_,1,et??null,nt,!1,rt,it),_[uf]=_e.current,sf(_),tt)for(_=0;_<tt.length;_++)et=tt[_],nt=et._getVersion,nt=nt(et._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[et,nt]:_e.mutableSourceEagerHydrationData.push(et,nt);return new nl(_e)};reactDom_production_min.render=function(_,_e,et){if(!pl(_e))throw Error(p$2(200));return sl(null,_,_e,!1,et)};reactDom_production_min.unmountComponentAtNode=function(_){if(!pl(_))throw Error(p$2(40));return _._reactRootContainer?(Sk(function(){sl(null,null,_,!1,function(){_._reactRootContainer=null,_[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_,_e,et,tt){if(!pl(et))throw Error(p$2(200));if(_==null||_._reactInternals===void 0)throw Error(p$2(38));return sl(_,_e,et,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_){console.error(_)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;const toString$2=Object.prototype.toString;function isAnyArray(_){const _e=toString$2.call(_);return _e.endsWith("Array]")&&!_e.includes("Big")}function max$1(_){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");var et=_e.fromIndex,tt=et===void 0?0:et,nt=_e.toIndex,rt=nt===void 0?_.length:nt;if(tt<0||tt>=_.length||!Number.isInteger(tt))throw new Error("fromIndex must be a positive integer smaller than length");if(rt<=tt||rt>_.length||!Number.isInteger(rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var it=_[tt],ot=tt+1;ot<rt;ot++)_[ot]>it&&(it=_[ot]);return it}function min$1(_){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");var et=_e.fromIndex,tt=et===void 0?0:et,nt=_e.toIndex,rt=nt===void 0?_.length:nt;if(tt<0||tt>=_.length||!Number.isInteger(tt))throw new Error("fromIndex must be a positive integer smaller than length");if(rt<=tt||rt>_.length||!Number.isInteger(rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var it=_[tt],ot=tt+1;ot<rt;ot++)_[ot]<it&&(it=_[ot]);return it}function rescale(_){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(_)){if(_.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var et;if(_e.output!==void 0){if(!isAnyArray(_e.output))throw new TypeError("output option must be an array if specified");et=_e.output}else et=new Array(_.length);var tt=min$1(_),nt=max$1(_);if(tt===nt)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var rt=_e.min,it=rt===void 0?_e.autoMinMax?tt:0:rt,ot=_e.max,lt=ot===void 0?_e.autoMinMax?nt:1:ot;if(it>=lt)throw new RangeError("min option must be smaller than max option");for(var st=(lt-it)/(nt-tt),at=0;at<_.length;at++)et[at]=(_[at]-tt)*st+it;return et}const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(_,_e={}){const{maxRows:et=15,maxColumns:tt=10,maxNumSize:nt=8,padMinus:rt="auto"}=_e;return`${_.constructor.name} {
${indent}[
${indentData}${inspectData(_,et,tt,nt,rt)}
${indent}]
${indent}rows: ${_.rows}
${indent}columns: ${_.columns}
}`}function inspectData(_,_e,et,tt,nt){const{rows:rt,columns:it}=_,ot=Math.min(rt,_e),lt=Math.min(it,et),st=[];if(nt==="auto"){nt=!1;e:for(let at=0;at<ot;at++)for(let ut=0;ut<lt;ut++)if(_.get(at,ut)<0){nt=!0;break e}}for(let at=0;at<ot;at++){let ut=[];for(let ct=0;ct<lt;ct++)ut.push(formatNumber(_.get(at,ct),tt,nt));st.push(`${ut.join(" ")}`)}return lt!==it&&(st[st.length-1]+=` ... ${it-et} more columns`),ot!==rt&&st.push(`... ${rt-_e} more rows`),st.join(`
${indentData}`)}function formatNumber(_,_e,et){return(_>=0&&et?` ${formatNumber2(_,_e-1)}`:formatNumber2(_,_e)).padEnd(_e)}function formatNumber2(_,_e){let et=_.toString();if(et.length<=_e)return et;let tt=_.toFixed(_e);if(tt.length>_e&&(tt=_.toFixed(Math.max(0,_e-(tt.length-_e)))),tt.length<=_e&&!tt.startsWith("0.000")&&!tt.startsWith("-0.000"))return tt;let nt=_.toExponential(_e);return nt.length>_e&&(nt=_.toExponential(Math.max(0,_e-(nt.length-_e)))),nt.slice(0)}function installMathOperations(_,_e){_.prototype.add=function(tt){return typeof tt=="number"?this.addS(tt):this.addM(tt)},_.prototype.addS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)+tt);return this},_.prototype.addM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)+tt.get(nt,rt));return this},_.add=function(tt,nt){return new _e(tt).add(nt)},_.prototype.sub=function(tt){return typeof tt=="number"?this.subS(tt):this.subM(tt)},_.prototype.subS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)-tt);return this},_.prototype.subM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)-tt.get(nt,rt));return this},_.sub=function(tt,nt){return new _e(tt).sub(nt)},_.prototype.subtract=_.prototype.sub,_.prototype.subtractS=_.prototype.subS,_.prototype.subtractM=_.prototype.subM,_.subtract=_.sub,_.prototype.mul=function(tt){return typeof tt=="number"?this.mulS(tt):this.mulM(tt)},_.prototype.mulS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)*tt);return this},_.prototype.mulM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)*tt.get(nt,rt));return this},_.mul=function(tt,nt){return new _e(tt).mul(nt)},_.prototype.multiply=_.prototype.mul,_.prototype.multiplyS=_.prototype.mulS,_.prototype.multiplyM=_.prototype.mulM,_.multiply=_.mul,_.prototype.div=function(tt){return typeof tt=="number"?this.divS(tt):this.divM(tt)},_.prototype.divS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)/tt);return this},_.prototype.divM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)/tt.get(nt,rt));return this},_.div=function(tt,nt){return new _e(tt).div(nt)},_.prototype.divide=_.prototype.div,_.prototype.divideS=_.prototype.divS,_.prototype.divideM=_.prototype.divM,_.divide=_.div,_.prototype.mod=function(tt){return typeof tt=="number"?this.modS(tt):this.modM(tt)},_.prototype.modS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)%tt);return this},_.prototype.modM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)%tt.get(nt,rt));return this},_.mod=function(tt,nt){return new _e(tt).mod(nt)},_.prototype.modulus=_.prototype.mod,_.prototype.modulusS=_.prototype.modS,_.prototype.modulusM=_.prototype.modM,_.modulus=_.mod,_.prototype.and=function(tt){return typeof tt=="number"?this.andS(tt):this.andM(tt)},_.prototype.andS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)&tt);return this},_.prototype.andM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)&tt.get(nt,rt));return this},_.and=function(tt,nt){return new _e(tt).and(nt)},_.prototype.or=function(tt){return typeof tt=="number"?this.orS(tt):this.orM(tt)},_.prototype.orS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)|tt);return this},_.prototype.orM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)|tt.get(nt,rt));return this},_.or=function(tt,nt){return new _e(tt).or(nt)},_.prototype.xor=function(tt){return typeof tt=="number"?this.xorS(tt):this.xorM(tt)},_.prototype.xorS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)^tt);return this},_.prototype.xorM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)^tt.get(nt,rt));return this},_.xor=function(tt,nt){return new _e(tt).xor(nt)},_.prototype.leftShift=function(tt){return typeof tt=="number"?this.leftShiftS(tt):this.leftShiftM(tt)},_.prototype.leftShiftS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)<<tt);return this},_.prototype.leftShiftM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)<<tt.get(nt,rt));return this},_.leftShift=function(tt,nt){return new _e(tt).leftShift(nt)},_.prototype.signPropagatingRightShift=function(tt){return typeof tt=="number"?this.signPropagatingRightShiftS(tt):this.signPropagatingRightShiftM(tt)},_.prototype.signPropagatingRightShiftS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)>>tt);return this},_.prototype.signPropagatingRightShiftM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)>>tt.get(nt,rt));return this},_.signPropagatingRightShift=function(tt,nt){return new _e(tt).signPropagatingRightShift(nt)},_.prototype.rightShift=function(tt){return typeof tt=="number"?this.rightShiftS(tt):this.rightShiftM(tt)},_.prototype.rightShiftS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)>>>tt);return this},_.prototype.rightShiftM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,this.get(nt,rt)>>>tt.get(nt,rt));return this},_.rightShift=function(tt,nt){return new _e(tt).rightShift(nt)},_.prototype.zeroFillRightShift=_.prototype.rightShift,_.prototype.zeroFillRightShiftS=_.prototype.rightShiftS,_.prototype.zeroFillRightShiftM=_.prototype.rightShiftM,_.zeroFillRightShift=_.rightShift,_.prototype.not=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,~this.get(tt,nt));return this},_.not=function(tt){return new _e(tt).not()},_.prototype.abs=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.abs(this.get(tt,nt)));return this},_.abs=function(tt){return new _e(tt).abs()},_.prototype.acos=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.acos(this.get(tt,nt)));return this},_.acos=function(tt){return new _e(tt).acos()},_.prototype.acosh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.acosh(this.get(tt,nt)));return this},_.acosh=function(tt){return new _e(tt).acosh()},_.prototype.asin=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.asin(this.get(tt,nt)));return this},_.asin=function(tt){return new _e(tt).asin()},_.prototype.asinh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.asinh(this.get(tt,nt)));return this},_.asinh=function(tt){return new _e(tt).asinh()},_.prototype.atan=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.atan(this.get(tt,nt)));return this},_.atan=function(tt){return new _e(tt).atan()},_.prototype.atanh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.atanh(this.get(tt,nt)));return this},_.atanh=function(tt){return new _e(tt).atanh()},_.prototype.cbrt=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.cbrt(this.get(tt,nt)));return this},_.cbrt=function(tt){return new _e(tt).cbrt()},_.prototype.ceil=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.ceil(this.get(tt,nt)));return this},_.ceil=function(tt){return new _e(tt).ceil()},_.prototype.clz32=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.clz32(this.get(tt,nt)));return this},_.clz32=function(tt){return new _e(tt).clz32()},_.prototype.cos=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.cos(this.get(tt,nt)));return this},_.cos=function(tt){return new _e(tt).cos()},_.prototype.cosh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.cosh(this.get(tt,nt)));return this},_.cosh=function(tt){return new _e(tt).cosh()},_.prototype.exp=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.exp(this.get(tt,nt)));return this},_.exp=function(tt){return new _e(tt).exp()},_.prototype.expm1=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.expm1(this.get(tt,nt)));return this},_.expm1=function(tt){return new _e(tt).expm1()},_.prototype.floor=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.floor(this.get(tt,nt)));return this},_.floor=function(tt){return new _e(tt).floor()},_.prototype.fround=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.fround(this.get(tt,nt)));return this},_.fround=function(tt){return new _e(tt).fround()},_.prototype.log=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.log(this.get(tt,nt)));return this},_.log=function(tt){return new _e(tt).log()},_.prototype.log1p=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.log1p(this.get(tt,nt)));return this},_.log1p=function(tt){return new _e(tt).log1p()},_.prototype.log10=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.log10(this.get(tt,nt)));return this},_.log10=function(tt){return new _e(tt).log10()},_.prototype.log2=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.log2(this.get(tt,nt)));return this},_.log2=function(tt){return new _e(tt).log2()},_.prototype.round=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.round(this.get(tt,nt)));return this},_.round=function(tt){return new _e(tt).round()},_.prototype.sign=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.sign(this.get(tt,nt)));return this},_.sign=function(tt){return new _e(tt).sign()},_.prototype.sin=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.sin(this.get(tt,nt)));return this},_.sin=function(tt){return new _e(tt).sin()},_.prototype.sinh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.sinh(this.get(tt,nt)));return this},_.sinh=function(tt){return new _e(tt).sinh()},_.prototype.sqrt=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.sqrt(this.get(tt,nt)));return this},_.sqrt=function(tt){return new _e(tt).sqrt()},_.prototype.tan=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.tan(this.get(tt,nt)));return this},_.tan=function(tt){return new _e(tt).tan()},_.prototype.tanh=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.tanh(this.get(tt,nt)));return this},_.tanh=function(tt){return new _e(tt).tanh()},_.prototype.trunc=function(){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.set(tt,nt,Math.trunc(this.get(tt,nt)));return this},_.trunc=function(tt){return new _e(tt).trunc()},_.pow=function(tt,nt){return new _e(tt).pow(nt)},_.prototype.pow=function(tt){return typeof tt=="number"?this.powS(tt):this.powM(tt)},_.prototype.powS=function(tt){for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,Math.pow(this.get(nt,rt),tt));return this},_.prototype.powM=function(tt){if(tt=_e.checkMatrix(tt),this.rows!==tt.rows||this.columns!==tt.columns)throw new RangeError("Matrices dimensions must be equal");for(let nt=0;nt<this.rows;nt++)for(let rt=0;rt<this.columns;rt++)this.set(nt,rt,Math.pow(this.get(nt,rt),tt.get(nt,rt)));return this}}function checkRowIndex(_,_e,et){let tt=et?_.rows:_.rows-1;if(_e<0||_e>tt)throw new RangeError("Row index out of range")}function checkColumnIndex(_,_e,et){let tt=et?_.columns:_.columns-1;if(_e<0||_e>tt)throw new RangeError("Column index out of range")}function checkRowVector(_,_e){if(_e.to1DArray&&(_e=_e.to1DArray()),_e.length!==_.columns)throw new RangeError("vector size must be the same as the number of columns");return _e}function checkColumnVector(_,_e){if(_e.to1DArray&&(_e=_e.to1DArray()),_e.length!==_.rows)throw new RangeError("vector size must be the same as the number of rows");return _e}function checkRowIndices(_,_e){if(!isAnyArray(_e))throw new TypeError("row indices must be an array");for(let et=0;et<_e.length;et++)if(_e[et]<0||_e[et]>=_.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(_,_e){if(!isAnyArray(_e))throw new TypeError("column indices must be an array");for(let et=0;et<_e.length;et++)if(_e[et]<0||_e[et]>=_.columns)throw new RangeError("column indices are out of range")}function checkRange$1(_,_e,et,tt,nt){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",_e),checkNumber("endRow",et),checkNumber("startColumn",tt),checkNumber("endColumn",nt),_e>et||tt>nt||_e<0||_e>=_.rows||et<0||et>=_.rows||tt<0||tt>=_.columns||nt<0||nt>=_.columns)throw new RangeError("Submatrix indices are out of range")}function newArray(_,_e=0){let et=[];for(let tt=0;tt<_;tt++)et.push(_e);return et}function checkNumber(_,_e){if(typeof _e!="number")throw new TypeError(`${_} must be a number`)}function checkNonEmpty(_){if(_.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(_){let _e=newArray(_.rows);for(let et=0;et<_.rows;++et)for(let tt=0;tt<_.columns;++tt)_e[et]+=_.get(et,tt);return _e}function sumByColumn(_){let _e=newArray(_.columns);for(let et=0;et<_.rows;++et)for(let tt=0;tt<_.columns;++tt)_e[tt]+=_.get(et,tt);return _e}function sumAll(_){let _e=0;for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_e+=_.get(et,tt);return _e}function productByRow(_){let _e=newArray(_.rows,1);for(let et=0;et<_.rows;++et)for(let tt=0;tt<_.columns;++tt)_e[et]*=_.get(et,tt);return _e}function productByColumn(_){let _e=newArray(_.columns,1);for(let et=0;et<_.rows;++et)for(let tt=0;tt<_.columns;++tt)_e[tt]*=_.get(et,tt);return _e}function productAll(_){let _e=1;for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_e*=_.get(et,tt);return _e}function varianceByRow(_,_e,et){const tt=_.rows,nt=_.columns,rt=[];for(let it=0;it<tt;it++){let ot=0,lt=0,st=0;for(let at=0;at<nt;at++)st=_.get(it,at)-et[it],ot+=st,lt+=st*st;_e?rt.push((lt-ot*ot/nt)/(nt-1)):rt.push((lt-ot*ot/nt)/nt)}return rt}function varianceByColumn(_,_e,et){const tt=_.rows,nt=_.columns,rt=[];for(let it=0;it<nt;it++){let ot=0,lt=0,st=0;for(let at=0;at<tt;at++)st=_.get(at,it)-et[it],ot+=st,lt+=st*st;_e?rt.push((lt-ot*ot/tt)/(tt-1)):rt.push((lt-ot*ot/tt)/tt)}return rt}function varianceAll(_,_e,et){const tt=_.rows,nt=_.columns,rt=tt*nt;let it=0,ot=0,lt=0;for(let st=0;st<tt;st++)for(let at=0;at<nt;at++)lt=_.get(st,at)-et,it+=lt,ot+=lt*lt;return _e?(ot-it*it/rt)/(rt-1):(ot-it*it/rt)/rt}function centerByRow(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)-_e[et])}function centerByColumn(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)-_e[tt])}function centerAll(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)-_e)}function getScaleByRow(_){const _e=[];for(let et=0;et<_.rows;et++){let tt=0;for(let nt=0;nt<_.columns;nt++)tt+=Math.pow(_.get(et,nt),2)/(_.columns-1);_e.push(Math.sqrt(tt))}return _e}function scaleByRow(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)/_e[et])}function getScaleByColumn(_){const _e=[];for(let et=0;et<_.columns;et++){let tt=0;for(let nt=0;nt<_.rows;nt++)tt+=Math.pow(_.get(nt,et),2)/(_.rows-1);_e.push(Math.sqrt(tt))}return _e}function scaleByColumn(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)/_e[tt])}function getScaleAll(_){const _e=_.size-1;let et=0;for(let tt=0;tt<_.columns;tt++)for(let nt=0;nt<_.rows;nt++)et+=Math.pow(_.get(nt,tt),2)/_e;return Math.sqrt(et)}function scaleAll(_,_e){for(let et=0;et<_.rows;et++)for(let tt=0;tt<_.columns;tt++)_.set(et,tt,_.get(et,tt)/_e)}class AbstractMatrix{static from1DArray(_e,et,tt){if(_e*et!==tt.length)throw new RangeError("data length does not match given dimensions");let rt=new Matrix(_e,et);for(let it=0;it<_e;it++)for(let ot=0;ot<et;ot++)rt.set(it,ot,tt[it*et+ot]);return rt}static rowVector(_e){let et=new Matrix(1,_e.length);for(let tt=0;tt<_e.length;tt++)et.set(0,tt,_e[tt]);return et}static columnVector(_e){let et=new Matrix(_e.length,1);for(let tt=0;tt<_e.length;tt++)et.set(tt,0,_e[tt]);return et}static zeros(_e,et){return new Matrix(_e,et)}static ones(_e,et){return new Matrix(_e,et).fill(1)}static rand(_e,et,tt={}){if(typeof tt!="object")throw new TypeError("options must be an object");const{random:nt=Math.random}=tt;let rt=new Matrix(_e,et);for(let it=0;it<_e;it++)for(let ot=0;ot<et;ot++)rt.set(it,ot,nt());return rt}static randInt(_e,et,tt={}){if(typeof tt!="object")throw new TypeError("options must be an object");const{min:nt=0,max:rt=1e3,random:it=Math.random}=tt;if(!Number.isInteger(nt))throw new TypeError("min must be an integer");if(!Number.isInteger(rt))throw new TypeError("max must be an integer");if(nt>=rt)throw new RangeError("min must be smaller than max");let ot=rt-nt,lt=new Matrix(_e,et);for(let st=0;st<_e;st++)for(let at=0;at<et;at++){let ut=nt+Math.round(it()*ot);lt.set(st,at,ut)}return lt}static eye(_e,et,tt){et===void 0&&(et=_e),tt===void 0&&(tt=1);let nt=Math.min(_e,et),rt=this.zeros(_e,et);for(let it=0;it<nt;it++)rt.set(it,it,tt);return rt}static diag(_e,et,tt){let nt=_e.length;et===void 0&&(et=nt),tt===void 0&&(tt=et);let rt=Math.min(nt,et,tt),it=this.zeros(et,tt);for(let ot=0;ot<rt;ot++)it.set(ot,ot,_e[ot]);return it}static min(_e,et){_e=this.checkMatrix(_e),et=this.checkMatrix(et);let tt=_e.rows,nt=_e.columns,rt=new Matrix(tt,nt);for(let it=0;it<tt;it++)for(let ot=0;ot<nt;ot++)rt.set(it,ot,Math.min(_e.get(it,ot),et.get(it,ot)));return rt}static max(_e,et){_e=this.checkMatrix(_e),et=this.checkMatrix(et);let tt=_e.rows,nt=_e.columns,rt=new this(tt,nt);for(let it=0;it<tt;it++)for(let ot=0;ot<nt;ot++)rt.set(it,ot,Math.max(_e.get(it,ot),et.get(it,ot)));return rt}static checkMatrix(_e){return AbstractMatrix.isMatrix(_e)?_e:new Matrix(_e)}static isMatrix(_e){return _e!=null&&_e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(_e){if(typeof _e!="function")throw new TypeError("callback must be a function");for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)_e.call(this,et,tt);return this}to1DArray(){let _e=[];for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)_e.push(this.get(et,tt));return _e}to2DArray(){let _e=[];for(let et=0;et<this.rows;et++){_e.push([]);for(let tt=0;tt<this.columns;tt++)_e[et].push(this.get(et,tt))}return _e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let _e=0;_e<this.rows;_e++)for(let et=0;et<=_e;et++)if(this.get(_e,et)!==this.get(et,_e))return!1;return!0}return!1}isEchelonForm(){let _e=0,et=0,tt=-1,nt=!0,rt=!1;for(;_e<this.rows&&nt;){for(et=0,rt=!1;et<this.columns&&rt===!1;)this.get(_e,et)===0?et++:this.get(_e,et)===1&&et>tt?(rt=!0,tt=et):(nt=!1,rt=!0);_e++}return nt}isReducedEchelonForm(){let _e=0,et=0,tt=-1,nt=!0,rt=!1;for(;_e<this.rows&&nt;){for(et=0,rt=!1;et<this.columns&&rt===!1;)this.get(_e,et)===0?et++:this.get(_e,et)===1&&et>tt?(rt=!0,tt=et):(nt=!1,rt=!0);for(let it=et+1;it<this.rows;it++)this.get(_e,it)!==0&&(nt=!1);_e++}return nt}echelonForm(){let _e=this.clone(),et=0,tt=0;for(;et<_e.rows&&tt<_e.columns;){let nt=et;for(let rt=et;rt<_e.rows;rt++)_e.get(rt,tt)>_e.get(nt,tt)&&(nt=rt);if(_e.get(nt,tt)===0)tt++;else{_e.swapRows(et,nt);let rt=_e.get(et,tt);for(let it=tt;it<_e.columns;it++)_e.set(et,it,_e.get(et,it)/rt);for(let it=et+1;it<_e.rows;it++){let ot=_e.get(it,tt)/_e.get(et,tt);_e.set(it,tt,0);for(let lt=tt+1;lt<_e.columns;lt++)_e.set(it,lt,_e.get(it,lt)-_e.get(et,lt)*ot)}et++,tt++}}return _e}reducedEchelonForm(){let _e=this.echelonForm(),et=_e.columns,tt=_e.rows,nt=tt-1;for(;nt>=0;)if(_e.maxRow(nt)===0)nt--;else{let rt=0,it=!1;for(;rt<tt&&it===!1;)_e.get(nt,rt)===1?it=!0:rt++;for(let ot=0;ot<nt;ot++){let lt=_e.get(ot,rt);for(let st=rt;st<et;st++){let at=_e.get(ot,st)-lt*_e.get(nt,st);_e.set(ot,st,at)}}nt--}return _e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(_e={}){if(typeof _e!="object")throw new TypeError("options must be an object");const{rows:et=1,columns:tt=1}=_e;if(!Number.isInteger(et)||et<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(tt)||tt<=0)throw new TypeError("columns must be a positive integer");let nt=new Matrix(this.rows*et,this.columns*tt);for(let rt=0;rt<et;rt++)for(let it=0;it<tt;it++)nt.setSubMatrix(this,this.rows*rt,this.columns*it);return nt}fill(_e){for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,_e);return this}neg(){return this.mulS(-1)}getRow(_e){checkRowIndex(this,_e);let et=[];for(let tt=0;tt<this.columns;tt++)et.push(this.get(_e,tt));return et}getRowVector(_e){return Matrix.rowVector(this.getRow(_e))}setRow(_e,et){checkRowIndex(this,_e),et=checkRowVector(this,et);for(let tt=0;tt<this.columns;tt++)this.set(_e,tt,et[tt]);return this}swapRows(_e,et){checkRowIndex(this,_e),checkRowIndex(this,et);for(let tt=0;tt<this.columns;tt++){let nt=this.get(_e,tt);this.set(_e,tt,this.get(et,tt)),this.set(et,tt,nt)}return this}getColumn(_e){checkColumnIndex(this,_e);let et=[];for(let tt=0;tt<this.rows;tt++)et.push(this.get(tt,_e));return et}getColumnVector(_e){return Matrix.columnVector(this.getColumn(_e))}setColumn(_e,et){checkColumnIndex(this,_e),et=checkColumnVector(this,et);for(let tt=0;tt<this.rows;tt++)this.set(tt,_e,et[tt]);return this}swapColumns(_e,et){checkColumnIndex(this,_e),checkColumnIndex(this,et);for(let tt=0;tt<this.rows;tt++){let nt=this.get(tt,_e);this.set(tt,_e,this.get(tt,et)),this.set(tt,et,nt)}return this}addRowVector(_e){_e=checkRowVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)+_e[tt]);return this}subRowVector(_e){_e=checkRowVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)-_e[tt]);return this}mulRowVector(_e){_e=checkRowVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)*_e[tt]);return this}divRowVector(_e){_e=checkRowVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)/_e[tt]);return this}addColumnVector(_e){_e=checkColumnVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)+_e[et]);return this}subColumnVector(_e){_e=checkColumnVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)-_e[et]);return this}mulColumnVector(_e){_e=checkColumnVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)*_e[et]);return this}divColumnVector(_e){_e=checkColumnVector(this,_e);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)this.set(et,tt,this.get(et,tt)/_e[et]);return this}mulRow(_e,et){checkRowIndex(this,_e);for(let tt=0;tt<this.columns;tt++)this.set(_e,tt,this.get(_e,tt)*et);return this}mulColumn(_e,et){checkColumnIndex(this,_e);for(let tt=0;tt<this.rows;tt++)this.set(tt,_e,this.get(tt,_e)*et);return this}max(_e){if(this.isEmpty())return NaN;switch(_e){case"row":{const et=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)>et[tt]&&(et[tt]=this.get(tt,nt));return et}case"column":{const et=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)>et[nt]&&(et[nt]=this.get(tt,nt));return et}case void 0:{let et=this.get(0,0);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)>et&&(et=this.get(tt,nt));return et}default:throw new Error(`invalid option: ${_e}`)}}maxIndex(){checkNonEmpty(this);let _e=this.get(0,0),et=[0,0];for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)>_e&&(_e=this.get(tt,nt),et[0]=tt,et[1]=nt);return et}min(_e){if(this.isEmpty())return NaN;switch(_e){case"row":{const et=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)<et[tt]&&(et[tt]=this.get(tt,nt));return et}case"column":{const et=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)<et[nt]&&(et[nt]=this.get(tt,nt));return et}case void 0:{let et=this.get(0,0);for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)<et&&(et=this.get(tt,nt));return et}default:throw new Error(`invalid option: ${_e}`)}}minIndex(){checkNonEmpty(this);let _e=this.get(0,0),et=[0,0];for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)this.get(tt,nt)<_e&&(_e=this.get(tt,nt),et[0]=tt,et[1]=nt);return et}maxRow(_e){if(checkRowIndex(this,_e),this.isEmpty())return NaN;let et=this.get(_e,0);for(let tt=1;tt<this.columns;tt++)this.get(_e,tt)>et&&(et=this.get(_e,tt));return et}maxRowIndex(_e){checkRowIndex(this,_e),checkNonEmpty(this);let et=this.get(_e,0),tt=[_e,0];for(let nt=1;nt<this.columns;nt++)this.get(_e,nt)>et&&(et=this.get(_e,nt),tt[1]=nt);return tt}minRow(_e){if(checkRowIndex(this,_e),this.isEmpty())return NaN;let et=this.get(_e,0);for(let tt=1;tt<this.columns;tt++)this.get(_e,tt)<et&&(et=this.get(_e,tt));return et}minRowIndex(_e){checkRowIndex(this,_e),checkNonEmpty(this);let et=this.get(_e,0),tt=[_e,0];for(let nt=1;nt<this.columns;nt++)this.get(_e,nt)<et&&(et=this.get(_e,nt),tt[1]=nt);return tt}maxColumn(_e){if(checkColumnIndex(this,_e),this.isEmpty())return NaN;let et=this.get(0,_e);for(let tt=1;tt<this.rows;tt++)this.get(tt,_e)>et&&(et=this.get(tt,_e));return et}maxColumnIndex(_e){checkColumnIndex(this,_e),checkNonEmpty(this);let et=this.get(0,_e),tt=[0,_e];for(let nt=1;nt<this.rows;nt++)this.get(nt,_e)>et&&(et=this.get(nt,_e),tt[0]=nt);return tt}minColumn(_e){if(checkColumnIndex(this,_e),this.isEmpty())return NaN;let et=this.get(0,_e);for(let tt=1;tt<this.rows;tt++)this.get(tt,_e)<et&&(et=this.get(tt,_e));return et}minColumnIndex(_e){checkColumnIndex(this,_e),checkNonEmpty(this);let et=this.get(0,_e),tt=[0,_e];for(let nt=1;nt<this.rows;nt++)this.get(nt,_e)<et&&(et=this.get(nt,_e),tt[0]=nt);return tt}diag(){let _e=Math.min(this.rows,this.columns),et=[];for(let tt=0;tt<_e;tt++)et.push(this.get(tt,tt));return et}norm(_e="frobenius"){let et=0;if(_e==="max")return this.max();if(_e==="frobenius"){for(let tt=0;tt<this.rows;tt++)for(let nt=0;nt<this.columns;nt++)et=et+this.get(tt,nt)*this.get(tt,nt);return Math.sqrt(et)}else throw new RangeError(`unknown norm type: ${_e}`)}cumulativeSum(){let _e=0;for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)_e+=this.get(et,tt),this.set(et,tt,_e);return this}dot(_e){AbstractMatrix.isMatrix(_e)&&(_e=_e.to1DArray());let et=this.to1DArray();if(et.length!==_e.length)throw new RangeError("vectors do not have the same size");let tt=0;for(let nt=0;nt<et.length;nt++)tt+=et[nt]*_e[nt];return tt}mmul(_e){_e=Matrix.checkMatrix(_e);let et=this.rows,tt=this.columns,nt=_e.columns,rt=new Matrix(et,nt),it=new Float64Array(tt);for(let ot=0;ot<nt;ot++){for(let lt=0;lt<tt;lt++)it[lt]=_e.get(lt,ot);for(let lt=0;lt<et;lt++){let st=0;for(let at=0;at<tt;at++)st+=this.get(lt,at)*it[at];rt.set(lt,ot,st)}}return rt}strassen2x2(_e){_e=Matrix.checkMatrix(_e);let et=new Matrix(2,2);const tt=this.get(0,0),nt=_e.get(0,0),rt=this.get(0,1),it=_e.get(0,1),ot=this.get(1,0),lt=_e.get(1,0),st=this.get(1,1),at=_e.get(1,1),ut=(tt+st)*(nt+at),ct=(ot+st)*nt,ht=tt*(it-at),dt=st*(lt-nt),vt=(tt+rt)*at,yt=(ot-tt)*(nt+it),gt=(rt-st)*(lt+at),xt=ut+dt-vt+gt,ft=ht+vt,pt=ct+dt,mt=ut-ct+ht+yt;return et.set(0,0,xt),et.set(0,1,ft),et.set(1,0,pt),et.set(1,1,mt),et}strassen3x3(_e){_e=Matrix.checkMatrix(_e);let et=new Matrix(3,3);const tt=this.get(0,0),nt=this.get(0,1),rt=this.get(0,2),it=this.get(1,0),ot=this.get(1,1),lt=this.get(1,2),st=this.get(2,0),at=this.get(2,1),ut=this.get(2,2),ct=_e.get(0,0),ht=_e.get(0,1),dt=_e.get(0,2),vt=_e.get(1,0),yt=_e.get(1,1),gt=_e.get(1,2),xt=_e.get(2,0),ft=_e.get(2,1),pt=_e.get(2,2),mt=(tt+nt+rt-it-ot-at-ut)*yt,_t=(tt-it)*(-ht+yt),St=ot*(-ct+ht+vt-yt-gt-xt+pt),Et=(-tt+it+ot)*(ct-ht+yt),kt=(it+ot)*(-ct+ht),wt=tt*ct,bt=(-tt+st+at)*(ct-dt+gt),Mt=(-tt+st)*(dt-gt),Rt=(st+at)*(-ct+dt),It=(tt+nt+rt-ot-lt-st-at)*gt,$t=at*(-ct+dt+vt-yt-gt-xt+ft),Ft=(-rt+at+ut)*(yt+xt-ft),Lt=(rt-ut)*(yt-ft),Tt=rt*xt,Dt=(at+ut)*(-xt+ft),At=(-rt+ot+lt)*(gt+xt-pt),zt=(rt-lt)*(gt-pt),jt=(ot+lt)*(-xt+pt),Nt=nt*vt,Pt=lt*ft,Ot=it*dt,Vt=st*ht,Zt=ut*pt,un=wt+Tt+Nt,en=mt+Et+kt+wt+Ft+Tt+Dt,sn=wt+bt+Rt+It+Tt+At+jt,rn=_t+St+Et+wt+Tt+At+zt,pn=_t+Et+kt+wt+Pt,on=Tt+At+zt+jt+Ot,Ut=wt+bt+Mt+$t+Ft+Lt+Tt,Bt=Ft+Lt+Tt+Dt+Vt,an=wt+bt+Mt+Rt+Zt;return et.set(0,0,un),et.set(0,1,en),et.set(0,2,sn),et.set(1,0,rn),et.set(1,1,pn),et.set(1,2,on),et.set(2,0,Ut),et.set(2,1,Bt),et.set(2,2,an),et}mmulStrassen(_e){_e=Matrix.checkMatrix(_e);let et=this.clone(),tt=et.rows,nt=et.columns,rt=_e.rows,it=_e.columns;nt!==rt&&console.warn(`Multiplying ${tt} x ${nt} and ${rt} x ${it} matrix: dimensions do not match.`);function ot(ut,ct,ht){let dt=ut.rows,vt=ut.columns;if(dt===ct&&vt===ht)return ut;{let yt=AbstractMatrix.zeros(ct,ht);return yt=yt.setSubMatrix(ut,0,0),yt}}let lt=Math.max(tt,rt),st=Math.max(nt,it);et=ot(et,lt,st),_e=ot(_e,lt,st);function at(ut,ct,ht,dt){if(ht<=512||dt<=512)return ut.mmul(ct);ht%2===1&&dt%2===1?(ut=ot(ut,ht+1,dt+1),ct=ot(ct,ht+1,dt+1)):ht%2===1?(ut=ot(ut,ht+1,dt),ct=ot(ct,ht+1,dt)):dt%2===1&&(ut=ot(ut,ht,dt+1),ct=ot(ct,ht,dt+1));let vt=parseInt(ut.rows/2,10),yt=parseInt(ut.columns/2,10),gt=ut.subMatrix(0,vt-1,0,yt-1),xt=ct.subMatrix(0,vt-1,0,yt-1),ft=ut.subMatrix(0,vt-1,yt,ut.columns-1),pt=ct.subMatrix(0,vt-1,yt,ct.columns-1),mt=ut.subMatrix(vt,ut.rows-1,0,yt-1),_t=ct.subMatrix(vt,ct.rows-1,0,yt-1),St=ut.subMatrix(vt,ut.rows-1,yt,ut.columns-1),Et=ct.subMatrix(vt,ct.rows-1,yt,ct.columns-1),kt=at(AbstractMatrix.add(gt,St),AbstractMatrix.add(xt,Et),vt,yt),wt=at(AbstractMatrix.add(mt,St),xt,vt,yt),bt=at(gt,AbstractMatrix.sub(pt,Et),vt,yt),Mt=at(St,AbstractMatrix.sub(_t,xt),vt,yt),Rt=at(AbstractMatrix.add(gt,ft),Et,vt,yt),It=at(AbstractMatrix.sub(mt,gt),AbstractMatrix.add(xt,pt),vt,yt),$t=at(AbstractMatrix.sub(ft,St),AbstractMatrix.add(_t,Et),vt,yt),Ft=AbstractMatrix.add(kt,Mt);Ft.sub(Rt),Ft.add($t);let Lt=AbstractMatrix.add(bt,Rt),Tt=AbstractMatrix.add(wt,Mt),Dt=AbstractMatrix.sub(kt,wt);Dt.add(bt),Dt.add(It);let At=AbstractMatrix.zeros(2*Ft.rows,2*Ft.columns);return At=At.setSubMatrix(Ft,0,0),At=At.setSubMatrix(Lt,Ft.rows,0),At=At.setSubMatrix(Tt,0,Ft.columns),At=At.setSubMatrix(Dt,Ft.rows,Ft.columns),At.subMatrix(0,ht-1,0,dt-1)}return at(et,_e,lt,st)}scaleRows(_e={}){if(typeof _e!="object")throw new TypeError("options must be an object");const{min:et=0,max:tt=1}=_e;if(!Number.isFinite(et))throw new TypeError("min must be a number");if(!Number.isFinite(tt))throw new TypeError("max must be a number");if(et>=tt)throw new RangeError("min must be smaller than max");let nt=new Matrix(this.rows,this.columns);for(let rt=0;rt<this.rows;rt++){const it=this.getRow(rt);it.length>0&&rescale(it,{min:et,max:tt,output:it}),nt.setRow(rt,it)}return nt}scaleColumns(_e={}){if(typeof _e!="object")throw new TypeError("options must be an object");const{min:et=0,max:tt=1}=_e;if(!Number.isFinite(et))throw new TypeError("min must be a number");if(!Number.isFinite(tt))throw new TypeError("max must be a number");if(et>=tt)throw new RangeError("min must be smaller than max");let nt=new Matrix(this.rows,this.columns);for(let rt=0;rt<this.columns;rt++){const it=this.getColumn(rt);it.length&&rescale(it,{min:et,max:tt,output:it}),nt.setColumn(rt,it)}return nt}flipRows(){const _e=Math.ceil(this.columns/2);for(let et=0;et<this.rows;et++)for(let tt=0;tt<_e;tt++){let nt=this.get(et,tt),rt=this.get(et,this.columns-1-tt);this.set(et,tt,rt),this.set(et,this.columns-1-tt,nt)}return this}flipColumns(){const _e=Math.ceil(this.rows/2);for(let et=0;et<this.columns;et++)for(let tt=0;tt<_e;tt++){let nt=this.get(tt,et),rt=this.get(this.rows-1-tt,et);this.set(tt,et,rt),this.set(this.rows-1-tt,et,nt)}return this}kroneckerProduct(_e){_e=Matrix.checkMatrix(_e);let et=this.rows,tt=this.columns,nt=_e.rows,rt=_e.columns,it=new Matrix(et*nt,tt*rt);for(let ot=0;ot<et;ot++)for(let lt=0;lt<tt;lt++)for(let st=0;st<nt;st++)for(let at=0;at<rt;at++)it.set(nt*ot+st,rt*lt+at,this.get(ot,lt)*_e.get(st,at));return it}kroneckerSum(_e){if(_e=Matrix.checkMatrix(_e),!this.isSquare()||!_e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let et=this.rows,tt=_e.rows,nt=this.kroneckerProduct(Matrix.eye(tt,tt)),rt=Matrix.eye(et,et).kroneckerProduct(_e);return nt.add(rt)}transpose(){let _e=new Matrix(this.columns,this.rows);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)_e.set(tt,et,this.get(et,tt));return _e}sortRows(_e=compareNumbers){for(let et=0;et<this.rows;et++)this.setRow(et,this.getRow(et).sort(_e));return this}sortColumns(_e=compareNumbers){for(let et=0;et<this.columns;et++)this.setColumn(et,this.getColumn(et).sort(_e));return this}subMatrix(_e,et,tt,nt){checkRange$1(this,_e,et,tt,nt);let rt=new Matrix(et-_e+1,nt-tt+1);for(let it=_e;it<=et;it++)for(let ot=tt;ot<=nt;ot++)rt.set(it-_e,ot-tt,this.get(it,ot));return rt}subMatrixRow(_e,et,tt){if(et===void 0&&(et=0),tt===void 0&&(tt=this.columns-1),et>tt||et<0||et>=this.columns||tt<0||tt>=this.columns)throw new RangeError("Argument out of range");let nt=new Matrix(_e.length,tt-et+1);for(let rt=0;rt<_e.length;rt++)for(let it=et;it<=tt;it++){if(_e[rt]<0||_e[rt]>=this.rows)throw new RangeError(`Row index out of range: ${_e[rt]}`);nt.set(rt,it-et,this.get(_e[rt],it))}return nt}subMatrixColumn(_e,et,tt){if(et===void 0&&(et=0),tt===void 0&&(tt=this.rows-1),et>tt||et<0||et>=this.rows||tt<0||tt>=this.rows)throw new RangeError("Argument out of range");let nt=new Matrix(tt-et+1,_e.length);for(let rt=0;rt<_e.length;rt++)for(let it=et;it<=tt;it++){if(_e[rt]<0||_e[rt]>=this.columns)throw new RangeError(`Column index out of range: ${_e[rt]}`);nt.set(it-et,rt,this.get(it,_e[rt]))}return nt}setSubMatrix(_e,et,tt){if(_e=Matrix.checkMatrix(_e),_e.isEmpty())return this;let nt=et+_e.rows-1,rt=tt+_e.columns-1;checkRange$1(this,et,nt,tt,rt);for(let it=0;it<_e.rows;it++)for(let ot=0;ot<_e.columns;ot++)this.set(et+it,tt+ot,_e.get(it,ot));return this}selection(_e,et){checkRowIndices(this,_e),checkColumnIndices(this,et);let tt=new Matrix(_e.length,et.length);for(let nt=0;nt<_e.length;nt++){let rt=_e[nt];for(let it=0;it<et.length;it++){let ot=et[it];tt.set(nt,it,this.get(rt,ot))}}return tt}trace(){let _e=Math.min(this.rows,this.columns),et=0;for(let tt=0;tt<_e;tt++)et+=this.get(tt,tt);return et}clone(){let _e=new Matrix(this.rows,this.columns);for(let et=0;et<this.rows;et++)for(let tt=0;tt<this.columns;tt++)_e.set(et,tt,this.get(et,tt));return _e}sum(_e){switch(_e){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${_e}`)}}product(_e){switch(_e){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${_e}`)}}mean(_e){const et=this.sum(_e);switch(_e){case"row":{for(let tt=0;tt<this.rows;tt++)et[tt]/=this.columns;return et}case"column":{for(let tt=0;tt<this.columns;tt++)et[tt]/=this.rows;return et}case void 0:return et/this.size;default:throw new Error(`invalid option: ${_e}`)}}variance(_e,et={}){if(typeof _e=="object"&&(et=_e,_e=void 0),typeof et!="object")throw new TypeError("options must be an object");const{unbiased:tt=!0,mean:nt=this.mean(_e)}=et;if(typeof tt!="boolean")throw new TypeError("unbiased must be a boolean");switch(_e){case"row":{if(!isAnyArray(nt))throw new TypeError("mean must be an array");return varianceByRow(this,tt,nt)}case"column":{if(!isAnyArray(nt))throw new TypeError("mean must be an array");return varianceByColumn(this,tt,nt)}case void 0:{if(typeof nt!="number")throw new TypeError("mean must be a number");return varianceAll(this,tt,nt)}default:throw new Error(`invalid option: ${_e}`)}}standardDeviation(_e,et){typeof _e=="object"&&(et=_e,_e=void 0);const tt=this.variance(_e,et);if(_e===void 0)return Math.sqrt(tt);for(let nt=0;nt<tt.length;nt++)tt[nt]=Math.sqrt(tt[nt]);return tt}center(_e,et={}){if(typeof _e=="object"&&(et=_e,_e=void 0),typeof et!="object")throw new TypeError("options must be an object");const{center:tt=this.mean(_e)}=et;switch(_e){case"row":{if(!isAnyArray(tt))throw new TypeError("center must be an array");return centerByRow(this,tt),this}case"column":{if(!isAnyArray(tt))throw new TypeError("center must be an array");return centerByColumn(this,tt),this}case void 0:{if(typeof tt!="number")throw new TypeError("center must be a number");return centerAll(this,tt),this}default:throw new Error(`invalid option: ${_e}`)}}scale(_e,et={}){if(typeof _e=="object"&&(et=_e,_e=void 0),typeof et!="object")throw new TypeError("options must be an object");let tt=et.scale;switch(_e){case"row":{if(tt===void 0)tt=getScaleByRow(this);else if(!isAnyArray(tt))throw new TypeError("scale must be an array");return scaleByRow(this,tt),this}case"column":{if(tt===void 0)tt=getScaleByColumn(this);else if(!isAnyArray(tt))throw new TypeError("scale must be an array");return scaleByColumn(this,tt),this}case void 0:{if(tt===void 0)tt=getScaleAll(this);else if(typeof tt!="number")throw new TypeError("scale must be a number");return scaleAll(this,tt),this}default:throw new Error(`invalid option: ${_e}`)}}toString(_e){return inspectMatrixWithOptions(this,_e)}}AbstractMatrix.prototype.klass="Matrix";typeof Symbol<"u"&&(AbstractMatrix.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix);function compareNumbers(_,_e){return _-_e}function isArrayOfNumbers(_){return _.every(_e=>typeof _e=="number")}AbstractMatrix.random=AbstractMatrix.rand;AbstractMatrix.randomInt=AbstractMatrix.randInt;AbstractMatrix.diagonal=AbstractMatrix.diag;AbstractMatrix.prototype.diagonal=AbstractMatrix.prototype.diag;AbstractMatrix.identity=AbstractMatrix.eye;AbstractMatrix.prototype.negate=AbstractMatrix.prototype.neg;AbstractMatrix.prototype.tensorProduct=AbstractMatrix.prototype.kroneckerProduct;class Matrix extends AbstractMatrix{constructor(_e,et){if(super(),Matrix.isMatrix(_e))return _e.clone();if(Number.isInteger(_e)&&_e>=0)if(this.data=[],Number.isInteger(et)&&et>=0)for(let tt=0;tt<_e;tt++)this.data.push(new Float64Array(et));else throw new TypeError("nColumns must be a positive integer");else if(isAnyArray(_e)){const tt=_e;if(_e=tt.length,et=_e?tt[0].length:0,typeof et!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let nt=0;nt<_e;nt++){if(tt[nt].length!==et)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(tt[nt]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(tt[nt]))}}else throw new TypeError("First argument must be a positive number or an array");this.rows=_e,this.columns=et}set(_e,et,tt){return this.data[_e][et]=tt,this}get(_e,et){return this.data[_e][et]}removeRow(_e){return checkRowIndex(this,_e),this.data.splice(_e,1),this.rows-=1,this}addRow(_e,et){return et===void 0&&(et=_e,_e=this.rows),checkRowIndex(this,_e,!0),et=Float64Array.from(checkRowVector(this,et)),this.data.splice(_e,0,et),this.rows+=1,this}removeColumn(_e){checkColumnIndex(this,_e);for(let et=0;et<this.rows;et++){const tt=new Float64Array(this.columns-1);for(let nt=0;nt<_e;nt++)tt[nt]=this.data[et][nt];for(let nt=_e+1;nt<this.columns;nt++)tt[nt-1]=this.data[et][nt];this.data[et]=tt}return this.columns-=1,this}addColumn(_e,et){typeof et>"u"&&(et=_e,_e=this.columns),checkColumnIndex(this,_e,!0),et=checkColumnVector(this,et);for(let tt=0;tt<this.rows;tt++){const nt=new Float64Array(this.columns+1);let rt=0;for(;rt<_e;rt++)nt[rt]=this.data[tt][rt];for(nt[rt++]=et[tt];rt<this.columns+1;rt++)nt[rt]=this.data[tt][rt-1];this.data[tt]=nt}return this.columns+=1,this}}installMathOperations(AbstractMatrix,Matrix);class WrapperMatrix2D extends AbstractMatrix{constructor(_e){super(),this.data=_e,this.rows=_e.length,this.columns=_e[0].length}set(_e,et,tt){return this.data[_e][et]=tt,this}get(_e,et){return this.data[_e][et]}}class LuDecomposition{constructor(_e){_e=WrapperMatrix2D.checkMatrix(_e);let et=_e.clone(),tt=et.rows,nt=et.columns,rt=new Float64Array(tt),it=1,ot,lt,st,at,ut,ct,ht,dt,vt;for(ot=0;ot<tt;ot++)rt[ot]=ot;for(dt=new Float64Array(tt),lt=0;lt<nt;lt++){for(ot=0;ot<tt;ot++)dt[ot]=et.get(ot,lt);for(ot=0;ot<tt;ot++){for(vt=Math.min(ot,lt),ut=0,st=0;st<vt;st++)ut+=et.get(ot,st)*dt[st];dt[ot]-=ut,et.set(ot,lt,dt[ot])}for(at=lt,ot=lt+1;ot<tt;ot++)Math.abs(dt[ot])>Math.abs(dt[at])&&(at=ot);if(at!==lt){for(st=0;st<nt;st++)ct=et.get(at,st),et.set(at,st,et.get(lt,st)),et.set(lt,st,ct);ht=rt[at],rt[at]=rt[lt],rt[lt]=ht,it=-it}if(lt<tt&&et.get(lt,lt)!==0)for(ot=lt+1;ot<tt;ot++)et.set(ot,lt,et.get(ot,lt)/et.get(lt,lt))}this.LU=et,this.pivotVector=rt,this.pivotSign=it}isSingular(){let _e=this.LU,et=_e.columns;for(let tt=0;tt<et;tt++)if(_e.get(tt,tt)===0)return!0;return!1}solve(_e){_e=Matrix.checkMatrix(_e);let et=this.LU;if(et.rows!==_e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let nt=_e.columns,rt=_e.subMatrixRow(this.pivotVector,0,nt-1),it=et.columns,ot,lt,st;for(st=0;st<it;st++)for(ot=st+1;ot<it;ot++)for(lt=0;lt<nt;lt++)rt.set(ot,lt,rt.get(ot,lt)-rt.get(st,lt)*et.get(ot,st));for(st=it-1;st>=0;st--){for(lt=0;lt<nt;lt++)rt.set(st,lt,rt.get(st,lt)/et.get(st,st));for(ot=0;ot<st;ot++)for(lt=0;lt<nt;lt++)rt.set(ot,lt,rt.get(ot,lt)-rt.get(st,lt)*et.get(ot,st))}return rt}get determinant(){let _e=this.LU;if(!_e.isSquare())throw new Error("Matrix must be square");let et=this.pivotSign,tt=_e.columns;for(let nt=0;nt<tt;nt++)et*=_e.get(nt,nt);return et}get lowerTriangularMatrix(){let _e=this.LU,et=_e.rows,tt=_e.columns,nt=new Matrix(et,tt);for(let rt=0;rt<et;rt++)for(let it=0;it<tt;it++)rt>it?nt.set(rt,it,_e.get(rt,it)):rt===it?nt.set(rt,it,1):nt.set(rt,it,0);return nt}get upperTriangularMatrix(){let _e=this.LU,et=_e.rows,tt=_e.columns,nt=new Matrix(et,tt);for(let rt=0;rt<et;rt++)for(let it=0;it<tt;it++)rt<=it?nt.set(rt,it,_e.get(rt,it)):nt.set(rt,it,0);return nt}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function hypotenuse$1(_,_e){let et=0;return Math.abs(_)>Math.abs(_e)?(et=_e/_,Math.abs(_)*Math.sqrt(1+et*et)):_e!==0?(et=_/_e,Math.abs(_e)*Math.sqrt(1+et*et)):0}class QrDecomposition{constructor(_e){_e=WrapperMatrix2D.checkMatrix(_e);let et=_e.clone(),tt=_e.rows,nt=_e.columns,rt=new Float64Array(nt),it,ot,lt,st;for(lt=0;lt<nt;lt++){let at=0;for(it=lt;it<tt;it++)at=hypotenuse$1(at,et.get(it,lt));if(at!==0){for(et.get(lt,lt)<0&&(at=-at),it=lt;it<tt;it++)et.set(it,lt,et.get(it,lt)/at);for(et.set(lt,lt,et.get(lt,lt)+1),ot=lt+1;ot<nt;ot++){for(st=0,it=lt;it<tt;it++)st+=et.get(it,lt)*et.get(it,ot);for(st=-st/et.get(lt,lt),it=lt;it<tt;it++)et.set(it,ot,et.get(it,ot)+st*et.get(it,lt))}}rt[lt]=-at}this.QR=et,this.Rdiag=rt}solve(_e){_e=Matrix.checkMatrix(_e);let et=this.QR,tt=et.rows;if(_e.rows!==tt)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let nt=_e.columns,rt=_e.clone(),it=et.columns,ot,lt,st,at;for(st=0;st<it;st++)for(lt=0;lt<nt;lt++){for(at=0,ot=st;ot<tt;ot++)at+=et.get(ot,st)*rt.get(ot,lt);for(at=-at/et.get(st,st),ot=st;ot<tt;ot++)rt.set(ot,lt,rt.get(ot,lt)+at*et.get(ot,st))}for(st=it-1;st>=0;st--){for(lt=0;lt<nt;lt++)rt.set(st,lt,rt.get(st,lt)/this.Rdiag[st]);for(ot=0;ot<st;ot++)for(lt=0;lt<nt;lt++)rt.set(ot,lt,rt.get(ot,lt)-rt.get(st,lt)*et.get(ot,st))}return rt.subMatrix(0,it-1,0,nt-1)}isFullRank(){let _e=this.QR.columns;for(let et=0;et<_e;et++)if(this.Rdiag[et]===0)return!1;return!0}get upperTriangularMatrix(){let _e=this.QR,et=_e.columns,tt=new Matrix(et,et),nt,rt;for(nt=0;nt<et;nt++)for(rt=0;rt<et;rt++)nt<rt?tt.set(nt,rt,_e.get(nt,rt)):nt===rt?tt.set(nt,rt,this.Rdiag[nt]):tt.set(nt,rt,0);return tt}get orthogonalMatrix(){let _e=this.QR,et=_e.rows,tt=_e.columns,nt=new Matrix(et,tt),rt,it,ot,lt;for(ot=tt-1;ot>=0;ot--){for(rt=0;rt<et;rt++)nt.set(rt,ot,0);for(nt.set(ot,ot,1),it=ot;it<tt;it++)if(_e.get(ot,ot)!==0){for(lt=0,rt=ot;rt<et;rt++)lt+=_e.get(rt,ot)*nt.get(rt,it);for(lt=-lt/_e.get(ot,ot),rt=ot;rt<et;rt++)nt.set(rt,it,nt.get(rt,it)+lt*_e.get(rt,ot))}}return nt}}class SingularValueDecomposition{constructor(_e,et={}){if(_e=WrapperMatrix2D.checkMatrix(_e),_e.isEmpty())throw new Error("Matrix must be non-empty");let tt=_e.rows,nt=_e.columns;const{computeLeftSingularVectors:rt=!0,computeRightSingularVectors:it=!0,autoTranspose:ot=!1}=et;let lt=!!rt,st=!!it,at=!1,ut;if(tt<nt)if(!ot)ut=_e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ut=_e.transpose(),tt=ut.rows,nt=ut.columns,at=!0;let wt=lt;lt=st,st=wt}else ut=_e.clone();let ct=Math.min(tt,nt),ht=Math.min(tt+1,nt),dt=new Float64Array(ht),vt=new Matrix(tt,ct),yt=new Matrix(nt,nt),gt=new Float64Array(nt),xt=new Float64Array(tt),ft=new Float64Array(ht);for(let wt=0;wt<ht;wt++)ft[wt]=wt;let pt=Math.min(tt-1,nt),mt=Math.max(0,Math.min(nt-2,tt)),_t=Math.max(pt,mt);for(let wt=0;wt<_t;wt++){if(wt<pt){dt[wt]=0;for(let bt=wt;bt<tt;bt++)dt[wt]=hypotenuse$1(dt[wt],ut.get(bt,wt));if(dt[wt]!==0){ut.get(wt,wt)<0&&(dt[wt]=-dt[wt]);for(let bt=wt;bt<tt;bt++)ut.set(bt,wt,ut.get(bt,wt)/dt[wt]);ut.set(wt,wt,ut.get(wt,wt)+1)}dt[wt]=-dt[wt]}for(let bt=wt+1;bt<nt;bt++){if(wt<pt&&dt[wt]!==0){let Mt=0;for(let Rt=wt;Rt<tt;Rt++)Mt+=ut.get(Rt,wt)*ut.get(Rt,bt);Mt=-Mt/ut.get(wt,wt);for(let Rt=wt;Rt<tt;Rt++)ut.set(Rt,bt,ut.get(Rt,bt)+Mt*ut.get(Rt,wt))}gt[bt]=ut.get(wt,bt)}if(lt&&wt<pt)for(let bt=wt;bt<tt;bt++)vt.set(bt,wt,ut.get(bt,wt));if(wt<mt){gt[wt]=0;for(let bt=wt+1;bt<nt;bt++)gt[wt]=hypotenuse$1(gt[wt],gt[bt]);if(gt[wt]!==0){gt[wt+1]<0&&(gt[wt]=0-gt[wt]);for(let bt=wt+1;bt<nt;bt++)gt[bt]/=gt[wt];gt[wt+1]+=1}if(gt[wt]=-gt[wt],wt+1<tt&&gt[wt]!==0){for(let bt=wt+1;bt<tt;bt++)xt[bt]=0;for(let bt=wt+1;bt<tt;bt++)for(let Mt=wt+1;Mt<nt;Mt++)xt[bt]+=gt[Mt]*ut.get(bt,Mt);for(let bt=wt+1;bt<nt;bt++){let Mt=-gt[bt]/gt[wt+1];for(let Rt=wt+1;Rt<tt;Rt++)ut.set(Rt,bt,ut.get(Rt,bt)+Mt*xt[Rt])}}if(st)for(let bt=wt+1;bt<nt;bt++)yt.set(bt,wt,gt[bt])}}let St=Math.min(nt,tt+1);if(pt<nt&&(dt[pt]=ut.get(pt,pt)),tt<St&&(dt[St-1]=0),mt+1<St&&(gt[mt]=ut.get(mt,St-1)),gt[St-1]=0,lt){for(let wt=pt;wt<ct;wt++){for(let bt=0;bt<tt;bt++)vt.set(bt,wt,0);vt.set(wt,wt,1)}for(let wt=pt-1;wt>=0;wt--)if(dt[wt]!==0){for(let bt=wt+1;bt<ct;bt++){let Mt=0;for(let Rt=wt;Rt<tt;Rt++)Mt+=vt.get(Rt,wt)*vt.get(Rt,bt);Mt=-Mt/vt.get(wt,wt);for(let Rt=wt;Rt<tt;Rt++)vt.set(Rt,bt,vt.get(Rt,bt)+Mt*vt.get(Rt,wt))}for(let bt=wt;bt<tt;bt++)vt.set(bt,wt,-vt.get(bt,wt));vt.set(wt,wt,1+vt.get(wt,wt));for(let bt=0;bt<wt-1;bt++)vt.set(bt,wt,0)}else{for(let bt=0;bt<tt;bt++)vt.set(bt,wt,0);vt.set(wt,wt,1)}}if(st)for(let wt=nt-1;wt>=0;wt--){if(wt<mt&&gt[wt]!==0)for(let bt=wt+1;bt<nt;bt++){let Mt=0;for(let Rt=wt+1;Rt<nt;Rt++)Mt+=yt.get(Rt,wt)*yt.get(Rt,bt);Mt=-Mt/yt.get(wt+1,wt);for(let Rt=wt+1;Rt<nt;Rt++)yt.set(Rt,bt,yt.get(Rt,bt)+Mt*yt.get(Rt,wt))}for(let bt=0;bt<nt;bt++)yt.set(bt,wt,0);yt.set(wt,wt,1)}let Et=St-1,kt=Number.EPSILON;for(;St>0;){let wt,bt;for(wt=St-2;wt>=-1&&wt!==-1;wt--){const Mt=Number.MIN_VALUE+kt*Math.abs(dt[wt]+Math.abs(dt[wt+1]));if(Math.abs(gt[wt])<=Mt||Number.isNaN(gt[wt])){gt[wt]=0;break}}if(wt===St-2)bt=4;else{let Mt;for(Mt=St-1;Mt>=wt&&Mt!==wt;Mt--){let Rt=(Mt!==St?Math.abs(gt[Mt]):0)+(Mt!==wt+1?Math.abs(gt[Mt-1]):0);if(Math.abs(dt[Mt])<=kt*Rt){dt[Mt]=0;break}}Mt===wt?bt=3:Mt===St-1?bt=1:(bt=2,wt=Mt)}switch(wt++,bt){case 1:{let Mt=gt[St-2];gt[St-2]=0;for(let Rt=St-2;Rt>=wt;Rt--){let It=hypotenuse$1(dt[Rt],Mt),$t=dt[Rt]/It,Ft=Mt/It;if(dt[Rt]=It,Rt!==wt&&(Mt=-Ft*gt[Rt-1],gt[Rt-1]=$t*gt[Rt-1]),st)for(let Lt=0;Lt<nt;Lt++)It=$t*yt.get(Lt,Rt)+Ft*yt.get(Lt,St-1),yt.set(Lt,St-1,-Ft*yt.get(Lt,Rt)+$t*yt.get(Lt,St-1)),yt.set(Lt,Rt,It)}break}case 2:{let Mt=gt[wt-1];gt[wt-1]=0;for(let Rt=wt;Rt<St;Rt++){let It=hypotenuse$1(dt[Rt],Mt),$t=dt[Rt]/It,Ft=Mt/It;if(dt[Rt]=It,Mt=-Ft*gt[Rt],gt[Rt]=$t*gt[Rt],lt)for(let Lt=0;Lt<tt;Lt++)It=$t*vt.get(Lt,Rt)+Ft*vt.get(Lt,wt-1),vt.set(Lt,wt-1,-Ft*vt.get(Lt,Rt)+$t*vt.get(Lt,wt-1)),vt.set(Lt,Rt,It)}break}case 3:{const Mt=Math.max(Math.abs(dt[St-1]),Math.abs(dt[St-2]),Math.abs(gt[St-2]),Math.abs(dt[wt]),Math.abs(gt[wt])),Rt=dt[St-1]/Mt,It=dt[St-2]/Mt,$t=gt[St-2]/Mt,Ft=dt[wt]/Mt,Lt=gt[wt]/Mt,Tt=((It+Rt)*(It-Rt)+$t*$t)/2,Dt=Rt*$t*(Rt*$t);let At=0;(Tt!==0||Dt!==0)&&(Tt<0?At=0-Math.sqrt(Tt*Tt+Dt):At=Math.sqrt(Tt*Tt+Dt),At=Dt/(Tt+At));let zt=(Ft+Rt)*(Ft-Rt)+At,jt=Ft*Lt;for(let Nt=wt;Nt<St-1;Nt++){let Pt=hypotenuse$1(zt,jt);Pt===0&&(Pt=Number.MIN_VALUE);let Ot=zt/Pt,Vt=jt/Pt;if(Nt!==wt&&(gt[Nt-1]=Pt),zt=Ot*dt[Nt]+Vt*gt[Nt],gt[Nt]=Ot*gt[Nt]-Vt*dt[Nt],jt=Vt*dt[Nt+1],dt[Nt+1]=Ot*dt[Nt+1],st)for(let Zt=0;Zt<nt;Zt++)Pt=Ot*yt.get(Zt,Nt)+Vt*yt.get(Zt,Nt+1),yt.set(Zt,Nt+1,-Vt*yt.get(Zt,Nt)+Ot*yt.get(Zt,Nt+1)),yt.set(Zt,Nt,Pt);if(Pt=hypotenuse$1(zt,jt),Pt===0&&(Pt=Number.MIN_VALUE),Ot=zt/Pt,Vt=jt/Pt,dt[Nt]=Pt,zt=Ot*gt[Nt]+Vt*dt[Nt+1],dt[Nt+1]=-Vt*gt[Nt]+Ot*dt[Nt+1],jt=Vt*gt[Nt+1],gt[Nt+1]=Ot*gt[Nt+1],lt&&Nt<tt-1)for(let Zt=0;Zt<tt;Zt++)Pt=Ot*vt.get(Zt,Nt)+Vt*vt.get(Zt,Nt+1),vt.set(Zt,Nt+1,-Vt*vt.get(Zt,Nt)+Ot*vt.get(Zt,Nt+1)),vt.set(Zt,Nt,Pt)}gt[St-2]=zt;break}case 4:{if(dt[wt]<=0&&(dt[wt]=dt[wt]<0?-dt[wt]:0,st))for(let Mt=0;Mt<=Et;Mt++)yt.set(Mt,wt,-yt.get(Mt,wt));for(;wt<Et&&!(dt[wt]>=dt[wt+1]);){let Mt=dt[wt];if(dt[wt]=dt[wt+1],dt[wt+1]=Mt,st&&wt<nt-1)for(let Rt=0;Rt<nt;Rt++)Mt=yt.get(Rt,wt+1),yt.set(Rt,wt+1,yt.get(Rt,wt)),yt.set(Rt,wt,Mt);if(lt&&wt<tt-1)for(let Rt=0;Rt<tt;Rt++)Mt=vt.get(Rt,wt+1),vt.set(Rt,wt+1,vt.get(Rt,wt)),vt.set(Rt,wt,Mt);wt++}St--;break}}}if(at){let wt=yt;yt=vt,vt=wt}this.m=tt,this.n=nt,this.s=dt,this.U=vt,this.V=yt}solve(_e){let et=_e,tt=this.threshold,nt=this.s.length,rt=Matrix.zeros(nt,nt);for(let ct=0;ct<nt;ct++)Math.abs(this.s[ct])<=tt?rt.set(ct,ct,0):rt.set(ct,ct,1/this.s[ct]);let it=this.U,ot=this.rightSingularVectors,lt=ot.mmul(rt),st=ot.rows,at=it.rows,ut=Matrix.zeros(st,at);for(let ct=0;ct<st;ct++)for(let ht=0;ht<at;ht++){let dt=0;for(let vt=0;vt<nt;vt++)dt+=lt.get(ct,vt)*it.get(ht,vt);ut.set(ct,ht,dt)}return ut.mmul(et)}solveForDiagonal(_e){return this.solve(Matrix.diag(_e))}inverse(){let _e=this.V,et=this.threshold,tt=_e.rows,nt=_e.columns,rt=new Matrix(tt,this.s.length);for(let at=0;at<tt;at++)for(let ut=0;ut<nt;ut++)Math.abs(this.s[ut])>et&&rt.set(at,ut,_e.get(at,ut)/this.s[ut]);let it=this.U,ot=it.rows,lt=it.columns,st=new Matrix(tt,ot);for(let at=0;at<tt;at++)for(let ut=0;ut<ot;ut++){let ct=0;for(let ht=0;ht<lt;ht++)ct+=rt.get(at,ht)*it.get(ut,ht);st.set(at,ut,ct)}return st}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let _e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,et=0,tt=this.s;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt]>_e&&et++;return et}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix.diag(this.s)}}function inverse(_,_e=!1){return _=WrapperMatrix2D.checkMatrix(_),_e?new SingularValueDecomposition(_).inverse():solve(_,Matrix.eye(_.rows))}function solve(_,_e,et=!1){return _=WrapperMatrix2D.checkMatrix(_),_e=WrapperMatrix2D.checkMatrix(_e),et?new SingularValueDecomposition(_).solve(_e):_.isSquare()?new LuDecomposition(_).solve(_e):new QrDecomposition(_).solve(_e)}function pseudoInverse(_,_e=Number.EPSILON){if(_=Matrix.checkMatrix(_),_.isEmpty())return _.transpose();let et=new SingularValueDecomposition(_,{autoTranspose:!0}),tt=et.leftSingularVectors,nt=et.rightSingularVectors,rt=et.diagonal;for(let it=0;it<rt.length;it++)Math.abs(rt[it])>_e?rt[it]=1/rt[it]:rt[it]=0;return nt.mmul(Matrix.diag(rt).mmul(tt.transpose()))}var medianQuickselect_min={exports:{}};(function(_){(function(){function _e(nt){for(var rt=0,it=nt.length-1,ot=void 0,lt=void 0,st=void 0,at=tt(rt,it);;){if(it<=rt)return nt[at];if(it==rt+1)return nt[rt]>nt[it]&&et(nt,rt,it),nt[at];for(ot=tt(rt,it),nt[ot]>nt[it]&&et(nt,ot,it),nt[rt]>nt[it]&&et(nt,rt,it),nt[ot]>nt[rt]&&et(nt,ot,rt),et(nt,ot,rt+1),lt=rt+1,st=it;;){do lt++;while(nt[rt]>nt[lt]);do st--;while(nt[st]>nt[rt]);if(st<lt)break;et(nt,lt,st)}et(nt,rt,st),st<=at&&(rt=lt),st>=at&&(it=st-1)}}var et=function(rt,it,ot){var lt;return lt=[rt[ot],rt[it]],rt[it]=lt[0],rt[ot]=lt[1],lt},tt=function(rt,it){return~~((rt+it)/2)};_.exports?_.exports=_e:window.median=_e})()})(medianQuickselect_min);var medianQuickselect_minExports=medianQuickselect_min.exports;const quickMedian=getDefaultExportFromCjs(medianQuickselect_minExports),formatter=new Intl.ListFormat("en",{type:"disjunction"});function checkProcessable(_,_e={}){let{bitDepth:et,alpha:tt,colorModel:nt,components:rt,channels:it}=_e;if(et&&(Array.isArray(et)||(et=[et]),!et.includes(_.bitDepth)))throw new RangeError(`image bitDepth must be ${format(et)} to apply this algorithm`);if(tt&&(Array.isArray(tt)||(tt=[tt]),!tt.includes(_.alpha)))throw new RangeError(`image alpha must be ${format(tt)} to apply this algorithm`);if(nt&&(Array.isArray(nt)||(nt=[nt]),!nt.includes(_.colorModel)))throw new RangeError(`image colorModel must be ${format(nt)} to apply this algorithm`);if(rt&&(Array.isArray(rt)||(rt=[rt]),!rt.includes(_.components))){const ot=`image components must be ${format(rt)} to apply this algorithm`;throw rt.length===1&&rt[0]===1?new RangeError(`${ot}. The image can be converted using "image.grey()"`):new RangeError(ot)}if(it&&(Array.isArray(it)||(it=[it]),!it.includes(_.channels)))throw new RangeError(`image channels must be ${format(it)} to apply this algorithm`)}function format(_){return formatter.format(_.map(String))}function difference(_,_e){return{column:_.column-_e.column,row:_.row-_e.row}}function normalize(_){let _e=Math.sqrt(_.column**2+_.row**2);return{column:_.column/_e,row:_.row/_e}}function rotate$1(_,_e){let et=[];const tt=Math.cos(_),nt=Math.sin(_);for(let rt of _e)et.push({column:tt*rt.column-nt*rt.row,row:nt*rt.column+tt*rt.row});return et}function ascending(_,_e){return _<_e?-1:_>_e?1:_>=_e?0:NaN}function bisector(_){return _.length===1&&(_=ascendingComparator(_)),{left:function(_e,et,tt,nt){for(tt==null&&(tt=0),nt==null&&(nt=_e.length);tt<nt;){var rt=tt+nt>>>1;_(_e[rt],et)<0?tt=rt+1:nt=rt}return tt},right:function(_e,et,tt,nt){for(tt==null&&(tt=0),nt==null&&(nt=_e.length);tt<nt;){var rt=tt+nt>>>1;_(_e[rt],et)>0?nt=rt:tt=rt+1}return tt}}}function ascendingComparator(_){return function(_e,et){return ascending(_(_e),et)}}bisector(ascending);function FFT(_){if(this.size=_|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=_<<1;for(var _e=new Array(this.size*2),et=0;et<_e.length;et+=2){const lt=Math.PI*et/this.size;_e[et]=Math.cos(lt),_e[et+1]=-Math.sin(lt)}this.table=_e;for(var tt=0,nt=1;this.size>nt;nt<<=1)tt++;this._width=tt%2===0?tt-1:tt,this._bitrev=new Array(1<<this._width);for(var rt=0;rt<this._bitrev.length;rt++){this._bitrev[rt]=0;for(var it=0;it<this._width;it+=2){var ot=this._width-it-2;this._bitrev[rt]|=(rt>>>it&3)<<ot}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function(_e,et){for(var tt=et||new Array(_e.length>>>1),nt=0;nt<_e.length;nt+=2)tt[nt>>>1]=_e[nt];return tt};FFT.prototype.createComplexArray=function(){const _e=new Array(this._csize);for(var et=0;et<_e.length;et++)_e[et]=0;return _e};FFT.prototype.toComplexArray=function(_e,et){for(var tt=et||this.createComplexArray(),nt=0;nt<tt.length;nt+=2)tt[nt]=_e[nt>>>1],tt[nt+1]=0;return tt};FFT.prototype.completeSpectrum=function(_e){for(var et=this._csize,tt=et>>>1,nt=2;nt<tt;nt+=2)_e[et-nt]=_e[nt],_e[et-nt+1]=-_e[nt+1]};FFT.prototype.transform=function(_e,et){if(_e===et)throw new Error("Input and output buffers must be different");this._out=_e,this._data=et,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function(_e,et){if(_e===et)throw new Error("Input and output buffers must be different");this._out=_e,this._data=et,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function(_e,et){if(_e===et)throw new Error("Input and output buffers must be different");this._out=_e,this._data=et,this._inv=1,this._transform4();for(var tt=0;tt<_e.length;tt++)_e[tt]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function(){var _e=this._out,et=this._csize,tt=this._width,nt=1<<tt,rt=et/nt<<1,it,ot,lt=this._bitrev;if(rt===4)for(it=0,ot=0;it<et;it+=rt,ot++){const vt=lt[ot];this._singleTransform2(it,vt,nt)}else for(it=0,ot=0;it<et;it+=rt,ot++){const vt=lt[ot];this._singleTransform4(it,vt,nt)}var st=this._inv?-1:1,at=this.table;for(nt>>=2;nt>=2;nt>>=2){rt=et/nt<<1;var ut=rt>>>2;for(it=0;it<et;it+=rt)for(var ct=it+ut,ht=it,dt=0;ht<ct;ht+=2,dt+=nt){const vt=ht,yt=vt+ut,gt=yt+ut,xt=gt+ut,ft=_e[vt],pt=_e[vt+1],mt=_e[yt],_t=_e[yt+1],St=_e[gt],Et=_e[gt+1],kt=_e[xt],wt=_e[xt+1],bt=ft,Mt=pt,Rt=at[dt],It=st*at[dt+1],$t=mt*Rt-_t*It,Ft=mt*It+_t*Rt,Lt=at[2*dt],Tt=st*at[2*dt+1],Dt=St*Lt-Et*Tt,At=St*Tt+Et*Lt,zt=at[3*dt],jt=st*at[3*dt+1],Nt=kt*zt-wt*jt,Pt=kt*jt+wt*zt,Ot=bt+Dt,Vt=Mt+At,Zt=bt-Dt,un=Mt-At,en=$t+Nt,sn=Ft+Pt,rn=st*($t-Nt),pn=st*(Ft-Pt),on=Ot+en,Ut=Vt+sn,Bt=Ot-en,an=Vt-sn,qt=Zt+pn,tn=un-rn,Ct=Zt-pn,Kt=un+rn;_e[vt]=on,_e[vt+1]=Ut,_e[yt]=qt,_e[yt+1]=tn,_e[gt]=Bt,_e[gt+1]=an,_e[xt]=Ct,_e[xt+1]=Kt}}};FFT.prototype._singleTransform2=function(_e,et,tt){const nt=this._out,rt=this._data,it=rt[et],ot=rt[et+1],lt=rt[et+tt],st=rt[et+tt+1],at=it+lt,ut=ot+st,ct=it-lt,ht=ot-st;nt[_e]=at,nt[_e+1]=ut,nt[_e+2]=ct,nt[_e+3]=ht};FFT.prototype._singleTransform4=function(_e,et,tt){const nt=this._out,rt=this._data,it=this._inv?-1:1,ot=tt*2,lt=tt*3,st=rt[et],at=rt[et+1],ut=rt[et+tt],ct=rt[et+tt+1],ht=rt[et+ot],dt=rt[et+ot+1],vt=rt[et+lt],yt=rt[et+lt+1],gt=st+ht,xt=at+dt,ft=st-ht,pt=at-dt,mt=ut+vt,_t=ct+yt,St=it*(ut-vt),Et=it*(ct-yt),kt=gt+mt,wt=xt+_t,bt=ft+Et,Mt=pt-St,Rt=gt-mt,It=xt-_t,$t=ft-Et,Ft=pt+St;nt[_e]=kt,nt[_e+1]=wt,nt[_e+2]=bt,nt[_e+3]=Mt,nt[_e+4]=Rt,nt[_e+5]=It,nt[_e+6]=$t,nt[_e+7]=Ft};FFT.prototype._realTransform4=function(){var _e=this._out,et=this._csize,tt=this._width,nt=1<<tt,rt=et/nt<<1,it,ot,lt=this._bitrev;if(rt===4)for(it=0,ot=0;it<et;it+=rt,ot++){const cn=lt[ot];this._singleRealTransform2(it,cn>>>1,nt>>>1)}else for(it=0,ot=0;it<et;it+=rt,ot++){const cn=lt[ot];this._singleRealTransform4(it,cn>>>1,nt>>>1)}var st=this._inv?-1:1,at=this.table;for(nt>>=2;nt>=2;nt>>=2){rt=et/nt<<1;var ut=rt>>>1,ct=ut>>>1,ht=ct>>>1;for(it=0;it<et;it+=rt)for(var dt=0,vt=0;dt<=ht;dt+=2,vt+=nt){var yt=it+dt,gt=yt+ct,xt=gt+ct,ft=xt+ct,pt=_e[yt],mt=_e[yt+1],_t=_e[gt],St=_e[gt+1],Et=_e[xt],kt=_e[xt+1],wt=_e[ft],bt=_e[ft+1],Mt=pt,Rt=mt,It=at[vt],$t=st*at[vt+1],Ft=_t*It-St*$t,Lt=_t*$t+St*It,Tt=at[2*vt],Dt=st*at[2*vt+1],At=Et*Tt-kt*Dt,zt=Et*Dt+kt*Tt,jt=at[3*vt],Nt=st*at[3*vt+1],Pt=wt*jt-bt*Nt,Ot=wt*Nt+bt*jt,Vt=Mt+At,Zt=Rt+zt,un=Mt-At,en=Rt-zt,sn=Ft+Pt,rn=Lt+Ot,pn=st*(Ft-Pt),on=st*(Lt-Ot),Ut=Vt+sn,Bt=Zt+rn,an=un+on,qt=en-pn;if(_e[yt]=Ut,_e[yt+1]=Bt,_e[gt]=an,_e[gt+1]=qt,dt===0){var tn=Vt-sn,Ct=Zt-rn;_e[xt]=tn,_e[xt+1]=Ct;continue}if(dt!==ht){var Kt=un,Wt=-en,Qt=Vt,ln=-Zt,gn=-st*on,fn=-st*pn,Ht=-st*rn,Gt=-st*sn,Xt=Kt+gn,Yt=Wt+fn,nn=Qt+Gt,dn=ln-Ht,Jt=it+ct-dt,hn=it+ut-dt;_e[Jt]=Xt,_e[Jt+1]=Yt,_e[hn]=nn,_e[hn+1]=dn}}}};FFT.prototype._singleRealTransform2=function(_e,et,tt){const nt=this._out,rt=this._data,it=rt[et],ot=rt[et+tt],lt=it+ot,st=it-ot;nt[_e]=lt,nt[_e+1]=0,nt[_e+2]=st,nt[_e+3]=0};FFT.prototype._singleRealTransform4=function(_e,et,tt){const nt=this._out,rt=this._data,it=this._inv?-1:1,ot=tt*2,lt=tt*3,st=rt[et],at=rt[et+tt],ut=rt[et+ot],ct=rt[et+lt],ht=st+ut,dt=st-ut,vt=at+ct,yt=it*(at-ct),gt=ht+vt,xt=dt,ft=-yt,pt=ht-vt,mt=dt,_t=yt;nt[_e]=gt,nt[_e+1]=0,nt[_e+2]=xt,nt[_e+3]=ft,nt[_e+4]=pt,nt[_e+5]=0,nt[_e+6]=mt,nt[_e+7]=_t};function xMedian(_){if(!isAnyArray(_))throw new TypeError("input must be an array");if(_.length===0)throw new TypeError("input must not be empty");const _e=_.slice();let et=0,tt=_e.length-1,nt=0,rt=0,it=0,ot=calcMiddle(et,tt);for(;;){if(tt<=et)return _e[ot];if(tt===et+1)return _e[et]>_e[tt]&&swap(_e,et,tt),_e[ot];for(nt=calcMiddle(et,tt),_e[nt]>_e[tt]&&swap(_e,nt,tt),_e[et]>_e[tt]&&swap(_e,et,tt),_e[nt]>_e[et]&&swap(_e,nt,et),swap(_e,nt,et+1),rt=et+1,it=tt;;){do rt++;while(_e[et]>_e[rt]);do it--;while(_e[it]>_e[et]);if(it<rt)break;swap(_e,rt,it)}swap(_e,et,it),it<=ot&&(et=rt),it>=ot&&(tt=it-1)}}function swap(_,_e,et){const tt=_[et];_[et]=_[_e],_[_e]=tt}function calcMiddle(_,_e){return Math.floor((_+_e)/2)}function assert$1(_,_e){if(!_)throw new Error(_e||"unreachable")}function assertUnreachable$1(_){throw new Error(`unreachable: ${String(_)}`)}function getClamp(_){return _.maxValue===255?clamp255:(assert$1(_.maxValue===65535),clamp65535)}function clamp255(_){return Math.min(Math.max(_,0),255)}function clamp65535(_){return Math.min(Math.max(_,0),65535)}function getRadius(_){if(_%2!==1||_<0)throw new RangeError("size must be positive and odd");return(_-1)/2}function line(_,_e,et,tt,nt){for(var rt=Math.abs(et-_),it=_<et?1:-1,ot=-Math.abs(tt-_e),lt=_e<tt?1:-1,st=rt+ot,at;;){if(nt(_,_e),at=2*st,at>=ot){if(_===et)break;st+=ot,_+=it}if(at<=rt){if(_e===tt)break;st+=rt,_e+=lt}}}function circle(_,_e,et,tt){var nt=-et,rt=0,it=2-2*et;do tt(_-nt,_e+rt),tt(_-rt,_e-nt),tt(_+nt,_e-rt),tt(_+rt,_e+nt),et=it,et<=rt&&(it+=++rt*2+1),(et>nt||it>rt)&&(it+=++nt*2+1);while(nt<0)}function deleteDuplicates(_){const _e=[];for(let et=0;et<_.length;et++)_[et].column===_[(et+1)%_.length].column&&_[et].row===_[(et+1)%_.length].row||_e.push(_[et]);return _e}function getIndex(_,_e,et,tt=0){return(_e*et.width+_)*et.channels+tt}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]],PREWITT_X=[[1,0,-1],[1,0,-1],[1,0,-1]],PREWITT_Y=[[1,1,1],[0,0,0],[-1,-1,-1]];function getAngle(_,_e){const et=difference(_e,_),tt=normalize(et),nt=Math.acos(tt.column);return tt.row<0?-nt:nt}function toDegrees(_){return _*180/Math.PI}var ssim_web={exports:{}};(function(_,_e){(function(et,tt){_.exports=tt()})(self,function(){return(()=>{var et={132:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.bezkrovnySsim=void 0;var ot=it(490),lt=it(971);function st(at,ut,ct){var ht=at.data,dt=ut.data,vt=ct.bitDepth,yt=ct.k1,gt=ct.k2,xt=Math.pow(2,vt)-1,ft=Math.pow(yt*xt,2),pt=Math.pow(gt*xt,2),mt=ot.average(ht),_t=ot.average(dt),St=ot.variance(ht,mt),Et=ot.variance(dt,_t);return(2*mt*_t+ft)*(2*ot.covariance(ht,dt,mt,_t)+pt)/((Math.pow(mt,2)+Math.pow(_t,2)+ft)*(St+Et+pt))}rt.bezkrovnySsim=function(at,ut,ct){for(var ht=ct.windowSize,dt=Math.ceil(at.width/ht),vt=Math.ceil(at.height/ht),yt=new Array(dt*vt),gt=0,xt=0;xt<at.height;xt+=ht)for(var ft=0;ft<at.width;ft+=ht){var pt=Math.min(ht,at.width-ft),mt=Math.min(ht,at.height-xt),_t=lt.sub(at,ft,mt,xt,pt),St=lt.sub(ut,ft,mt,xt,pt);yt[gt++]=st(_t,St,ct)}return{data:yt,width:dt,height:vt}}},63:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.defaults=void 0,rt.defaults={windowSize:11,k1:.01,k2:.03,bitDepth:8,downsample:"original",ssim:"weber",maxSize:256,rgb2grayVersion:"integer"}},441:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.downsample=void 0;var ot=it(490),lt=it(971);function st(at,ut,ct){var ht=lt.imfilter(at,ut,"symmetric","same");return lt.skip2d(ht,[0,ct,ht.height],[0,ct,ht.width])}rt.downsample=function(at,ut){return ut.downsample==="original"?function(ct,ht,dt){dt===void 0&&(dt=256);var vt=Math.min(ct.width,ht.height)/dt,yt=Math.round(vt);if(yt>1){var gt=lt.ones(yt);ct=st(ct,gt=ot.divide2d(gt,ot.sum2d(gt)),yt),ht=st(ht,gt,yt)}return[ct,ht]}(at[0],at[1],ut.maxSize):at}},607:function(nt,rt,it){var ot=this&&this.__assign||function(){return(ot=Object.assign||function(ft){for(var pt,mt=1,_t=arguments.length;mt<_t;mt++)for(var St in pt=arguments[mt])Object.prototype.hasOwnProperty.call(pt,St)&&(ft[St]=pt[St]);return ft}).apply(this,arguments)};Object.defineProperty(rt,"__esModule",{value:!0}),rt.ssim=rt.getOptions=void 0;var lt=it(971),st=it(490),at=it(773),ut=it(595),ct=it(132),ht=it(441),dt=it(63),vt=it(535),yt={fast:at.ssim,original:ut.originalSsim,bezkrovny:ct.bezkrovnySsim,weber:vt.weberSsim};function gt(ft){var pt=ot(ot({},dt.defaults),ft);return function(mt){if(Object.keys(mt).forEach(function(_t){if(!(_t in dt.defaults))throw new Error('"'+_t+'" is not a valid option')}),"k1"in mt&&(typeof mt.k1!="number"||mt.k1<0))throw new Error("Invalid k1 value. Default is "+dt.defaults.k1);if("k2"in mt&&(typeof mt.k2!="number"||mt.k2<0))throw new Error("Invalid k2 value. Default is "+dt.defaults.k2);if(!(mt.ssim in yt))throw new Error("Invalid ssim option (use: "+Object.keys(yt).join(", ")+")")}(pt),pt}function xt(ft,pt,mt){var _t,St,Et,kt,wt=new Date().getTime(),bt=function(Mt){var Rt=Mt[0],It=Mt[1],$t=Mt[2];return yt[$t.ssim](Rt,It,$t)}(function(Mt){var Rt=Mt[0],It=Mt[1],$t=Mt[2],Ft=ht.downsample([Rt,It],$t);return[Ft[0],Ft[1],$t]}((_t=function(Mt){var Rt=Mt[0],It=Mt[1],$t=Mt[2];if(Rt.width!==It.width||Rt.height!==It.height)throw new Error("Image dimensions do not match");return[Rt,It,$t]}([ft,pt,gt(mt)]),St=_t[0],Et=_t[1],(kt=_t[2]).rgb2grayVersion==="original"?[lt.rgb2gray(St),lt.rgb2gray(Et),kt]:[lt.rgb2grayInteger(St),lt.rgb2grayInteger(Et),kt])));return{mssim:bt.mssim!==void 0?bt.mssim:st.mean2d(bt),ssim_map:bt,performance:new Date().getTime()-wt}}rt.getOptions=gt,rt.ssim=xt,rt.default=xt},490:(nt,rt)=>{function it(ut){return ot(ut)/ut.length}function ot(ut){for(var ct=0,ht=0;ht<ut.length;ht++)ct+=ut[ht];return ct}function lt(ut){for(var ct=ut.data,ht=0,dt=0;dt<ct.length;dt++)ht+=ct[dt];return ht}function st(ut,ct){for(var ht=ut.data,dt=ut.width,vt=ut.height,yt=new Array(ht.length),gt=0;gt<ht.length;gt++)yt[gt]=ht[gt]+ct;return{data:yt,width:dt,height:vt}}function at(ut,ct){return typeof ct=="number"?function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=new Array(vt.length),ft=0;ft<vt.length;ft++)xt[ft]=vt[ft]*dt;return{data:xt,width:yt,height:gt}}(ut,ct):function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=dt.data,ft=new Array(vt.length),pt=0;pt<vt.length;pt++)ft[pt]=vt[pt]*xt[pt];return{data:ft,width:yt,height:gt}}(ut,ct)}Object.defineProperty(rt,"__esModule",{value:!0}),rt.covariance=rt.variance=rt.mean2d=rt.square2d=rt.multiply2d=rt.divide2d=rt.subtract2d=rt.add2d=rt.sum2d=rt.floor=rt.sum=rt.average=void 0,rt.average=it,rt.sum=ot,rt.floor=function(ut){for(var ct=new Array(ut.length),ht=0;ht<ut.length;ht++)ct[ht]=Math.floor(ut[ht]);return ct},rt.sum2d=lt,rt.add2d=function(ut,ct){return typeof ct=="number"?st(ut,ct):function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=dt.data,ft=new Array(vt.length),pt=0;pt<gt;pt++)for(var mt=pt*yt,_t=0;_t<yt;_t++)ft[mt+_t]=vt[mt+_t]+xt[mt+_t];return{data:ft,width:yt,height:gt}}(ut,ct)},rt.subtract2d=function(ut,ct){return typeof ct=="number"?st(ut,-ct):function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=dt.data,ft=new Array(vt.length),pt=0;pt<gt;pt++)for(var mt=pt*yt,_t=0;_t<yt;_t++)ft[mt+_t]=vt[mt+_t]-xt[mt+_t];return{data:ft,width:yt,height:gt}}(ut,ct)},rt.divide2d=function(ut,ct){return typeof ct=="number"?function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=new Array(vt.length),ft=0;ft<vt.length;ft++)xt[ft]=vt[ft]/dt;return{data:xt,width:yt,height:gt}}(ut,ct):function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=dt.data,ft=new Array(vt.length),pt=0;pt<vt.length;pt++)ft[pt]=vt[pt]/xt[pt];return{data:ft,width:yt,height:gt}}(ut,ct)},rt.multiply2d=at,rt.square2d=function(ut){return at(ut,ut)},rt.mean2d=function(ut){return lt(ut)/ut.data.length},rt.variance=function(ut,ct){ct===void 0&&(ct=it(ut));for(var ht=0,dt=ut.length;dt--;)ht+=Math.pow(ut[dt]-ct,2);return ht/ut.length},rt.covariance=function(ut,ct,ht,dt){ht===void 0&&(ht=it(ut)),dt===void 0&&(dt=it(ct));for(var vt=0,yt=ut.length;yt--;)vt+=(ut[yt]-ht)*(ct[yt]-dt);return vt/ut.length}},687:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.conv2=void 0;var ot=it(490),lt=it(298),st=it(118),at=it(799);function ut(yt,gt,xt){var ft=yt.data,pt=yt.width,mt=yt.height;xt===void 0&&(xt="full");for(var _t=pt+gt.width-1,St=mt+gt.height-1,Et=at.zeros(St,_t).data,kt=0;kt<gt.height;kt++)for(var wt=0;wt<gt.width;wt++){var bt=gt.data[kt*gt.width+wt];if(bt)for(var Mt=0;Mt<mt;Mt++)for(var Rt=0;Rt<pt;Rt++)Et[(Mt+kt)*_t+Rt+wt]+=ft[Mt*pt+Rt]*bt}return vt({data:Et,width:_t,height:St},xt,mt,gt.height,pt,gt.width)}function ct(yt,gt,xt){var ft=gt.data,pt=gt.width,mt=gt.height;xt===void 0&&(xt="full");var _t=dt(yt,lt.ones(mt,1),lt.ones(1,pt),xt);return ot.multiply2d(_t,ft[0])}function ht(yt){for(var gt=yt.data,xt=gt[0],ft=1;ft<gt.length;ft++)if(gt[ft]!==xt)return!1;return!0}function dt(yt,gt,xt,ft){ft===void 0&&(ft="full");var pt=Math.max(gt.height,gt.width),mt=Math.max(xt.height,xt.width),_t=ut(yt,gt,"full");return vt(ut(_t,xt,"full"),ft,yt.height,pt,yt.width,mt)}function vt(yt,gt,xt,ft,pt,mt){if(gt==="full")return yt;if(gt==="same"){var _t=Math.ceil((yt.height-xt)/2),St=Math.ceil((yt.width-pt)/2);return st.sub(yt,_t,xt,St,pt)}return st.sub(yt,ft-1,xt-ft+1,mt-1,pt-mt+1)}rt.conv2=function(){for(var yt=[],gt=0;gt<arguments.length;gt++)yt[gt]=arguments[gt];return yt[2]&&yt[2].data?dt.apply(void 0,yt):ht(yt[1])?ct.apply(void 0,yt):ut.apply(void 0,yt)}},346:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.filter2=void 0;var ot=it(687);rt.filter2=function(lt,st,at){return at===void 0&&(at="same"),ot.conv2(st,function(ut){for(var ct=ut.data,ht=ut.width,dt=ut.height,vt=new Array(ct.length),yt=0;yt<dt;yt++)for(var gt=0;gt<ht;gt++)vt[yt*ht+gt]=ct[(dt-1-yt)*ht+ht-1-gt];return{data:vt,width:ht,height:dt}}(lt),at)}},470:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.fspecial=void 0;var ot=it(490);rt.fspecial=function(lt,st,at){st===void 0&&(st=3),at===void 0&&(at=1.5);var ut=function(ht,dt){for(var vt=ht.data,yt=ht.width,gt=ht.height,xt=new Array(vt.length),ft=0;ft<vt.length;ft++)xt[ft]=Math.exp(-vt[ft]/(2*Math.pow(dt,2)));return{data:xt,width:yt,height:gt}}(function(ht){for(var dt=2*ht+1,vt=new Array(Math.pow(dt,2)),yt=0;yt<dt;yt++)for(var gt=0;gt<dt;gt++)vt[yt*dt+gt]=Math.pow(yt-ht,2)+Math.pow(gt-ht,2);return{data:vt,width:dt,height:dt}}(st=(st-1)/2),at),ct=ot.sum2d(ut);return ot.divide2d(ut,ct)}},521:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.imfilter=void 0;var ot=it(20),lt=it(389),st=it(490),at=it(346);rt.imfilter=function(ut,ct,ht,dt){return ht===void 0&&(ht="symmetric"),dt===void 0&&(dt="same"),ut=function(vt,yt,gt,xt){if(vt=lt.padarray(vt,st.floor([yt/2,gt/2]),xt),ot.mod(yt,2)===0&&(vt.data=vt.data.slice(0,-vt.width),vt.height--),ot.mod(gt,2)===0){for(var ft=[],pt=0;pt<vt.data.length;pt++)(pt+1)%vt.width!=0&&ft.push(vt.data[pt]);vt.data=ft,vt.width--}return vt}(ut,ct.width,ct.height,ht),dt=function(vt){return vt==="same"&&(vt="valid"),vt}(dt),at.filter2(ct,ut,dt)}},971:function(nt,rt,it){var ot=this&&this.__createBinding||(Object.create?function(st,at,ut,ct){ct===void 0&&(ct=ut),Object.defineProperty(st,ct,{enumerable:!0,get:function(){return at[ut]}})}:function(st,at,ut,ct){ct===void 0&&(ct=ut),st[ct]=at[ut]}),lt=this&&this.__exportStar||function(st,at){for(var ut in st)ut==="default"||Object.prototype.hasOwnProperty.call(at,ut)||ot(at,st,ut)};Object.defineProperty(rt,"__esModule",{value:!0}),lt(it(687),rt),lt(it(346),rt),lt(it(470),rt),lt(it(521),rt),lt(it(150),rt),lt(it(298),rt),lt(it(389),rt),lt(it(582),rt),lt(it(439),rt),lt(it(118),rt),lt(it(240),rt),lt(it(799),rt)},928:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.numbers=void 0,rt.numbers=function(it,ot,lt){for(var st=ot*it,at=new Array(st),ut=0;ut<st;ut++)at[ut]=lt;return{data:at,width:ot,height:it}}},20:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.mod=void 0,rt.mod=function(it,ot){return it-ot*Math.floor(it/ot)}},150:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.normpdf=void 0,rt.normpdf=function(it,ot,lt){var st=it.data,at=it.width,ut=it.height;ot===void 0&&(ot=0),lt===void 0&&(lt=1);for(var ct=new Array(st.length),ht=0;ht<st.length;ht++){var dt=(st[ht]-ot)/lt;ct[ht]=Math.exp(-Math.pow(dt,2)/2)/(2.5066282746310007*lt)}return{data:ct,width:at,height:ut}}},298:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.ones=void 0;var ot=it(928);rt.ones=function(lt,st){return st===void 0&&(st=lt),ot.numbers(lt,st,1)}},389:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.padarray=void 0;var ot=it(20);rt.padarray=function(lt,st,at,ut){var ct=st[0],ht=st[1];return lt.height>=ct&&lt.width>=ht?function(dt,vt){for(var yt=vt[0],gt=vt[1],xt=dt.width+2*gt,ft=dt.height+2*yt,pt=new Array(xt*ft),mt=-yt;mt<0;mt++){for(var _t=-gt;_t<0;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(Math.abs(mt)-1)*dt.width+Math.abs(_t)-1];for(_t=0;_t<dt.width;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(Math.abs(mt)-1)*dt.width+_t];for(_t=dt.width;_t<dt.width+gt;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(Math.abs(mt)-1)*dt.width+2*dt.width-_t-1]}for(mt=0;mt<dt.height;mt++){for(_t=-gt;_t<0;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[mt*dt.width+Math.abs(_t)-1];for(_t=0;_t<dt.width;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[mt*dt.width+_t];for(_t=dt.width;_t<dt.width+gt;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[mt*dt.width+2*dt.width-_t-1]}for(mt=dt.height;mt<dt.height+yt;mt++){for(_t=-gt;_t<0;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(2*dt.height-mt-1)*dt.width+Math.abs(_t)-1];for(_t=0;_t<dt.width;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(2*dt.height-mt-1)*dt.width+_t];for(_t=dt.width;_t<dt.width+gt;_t++)pt[(mt+yt)*xt+_t+gt]=dt.data[(2*dt.height-mt-1)*dt.width+2*dt.width-_t-1]}return{data:pt,width:xt,height:ft}}(lt,[ct,ht]):function(dt,vt){for(var yt=function(mt,_t){return{data:mt.data.concat(_t.data),height:mt.height+_t.height,width:mt.width}}(dt,function(mt){for(var _t=mt.data,St=mt.width,Et=mt.height,kt=new Array(_t.length),wt=0;wt<Et;wt++)for(var bt=0;bt<St;bt++)kt[wt*St+bt]=_t[(Et-1-wt)*St+bt];return{data:kt,width:St,height:Et}}(dt)),gt=dt.height+2*vt,xt=new Array(dt.width*gt),ft=-vt;ft<dt.height+vt;ft++)for(var pt=0;pt<dt.width;pt++)xt[(ft+vt)*dt.width+pt]=yt.data[ot.mod(ft,yt.height)*dt.width+pt];return{data:xt,width:dt.width,height:gt}}(function(dt,vt){for(var yt=dt.width+2*vt,gt=new Array(yt*dt.height),xt=function(mt,_t){for(var St=mt.width+_t.width,Et=new Array(mt.height*St),kt=0;kt<mt.height;kt++){for(var wt=0;wt<mt.width;wt++)Et[kt*St+wt]=mt.data[kt*mt.width+wt];for(wt=0;wt<_t.width;wt++)Et[kt*St+wt+mt.width]=_t.data[kt*_t.width+wt]}return{data:Et,width:St,height:mt.height}}(dt,function(mt){for(var _t=mt.data,St=mt.width,Et=mt.height,kt=new Array(_t.length),wt=0;wt<Et;wt++)for(var bt=0;bt<St;bt++)kt[wt*St+bt]=_t[wt*St+St-1-bt];return{data:kt,width:St,height:Et}}(dt)),ft=0;ft<dt.height;ft++)for(var pt=-vt;pt<dt.width+vt;pt++)gt[ft*yt+pt+vt]=xt.data[ft*xt.width+ot.mod(pt,xt.width)];return{data:gt,width:yt,height:dt.height}}(lt,ht),ct)}},582:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.rgb2grayInteger=rt.rgb2gray=void 0,rt.rgb2gray=function(it){for(var ot=it.data,lt=it.width,st=it.height,at=new Uint8Array(lt*st),ut=0;ut<ot.length;ut+=4)at[ut/4]=.29894*ot[ut]+.58704*ot[ut+1]+.11402*ot[ut+2]+.5;return{data:Array.from(at),width:lt,height:st}},rt.rgb2grayInteger=function(it){for(var ot=it.data,lt=it.width,st=it.height,at=new Array(lt*st),ut=0;ut<ot.length;ut+=4)at[ut/4]=77*ot[ut]+150*ot[ut+1]+29*ot[ut+2]+128>>8;return{data:at,width:lt,height:st}}},439:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.skip2d=void 0,rt.skip2d=function(it,ot,lt){for(var st=ot[0],at=ot[1],ut=ot[2],ct=lt[0],ht=lt[1],dt=lt[2],vt=Math.ceil((dt-ct)/ht),yt=Math.ceil((ut-st)/at),gt=new Array(vt*yt),xt=0;xt<yt;xt++)for(var ft=0;ft<vt;ft++){var pt=st+xt*at,mt=ct+ft*ht;gt[xt*vt+ft]=it.data[pt*it.width+mt]}return{data:gt,width:vt,height:yt}}},118:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.sub=void 0,rt.sub=function(it,ot,lt,st,at){for(var ut=it.data,ct=it.width,ht=new Array(at*lt),dt=0;dt<lt;dt++)for(var vt=0;vt<at;vt++)ht[dt*at+vt]=ut[(st+dt)*ct+ot+vt];return{data:ht,width:at,height:lt}}},240:(nt,rt)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.transpose=void 0,rt.transpose=function(it){for(var ot=it.data,lt=it.width,st=it.height,at=new Array(lt*st),ut=0;ut<st;ut++)for(var ct=0;ct<lt;ct++)at[ct*st+ut]=ot[ut*lt+ct];return{data:at,height:lt,width:st}}},799:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.zeros=void 0;var ot=it(928);rt.zeros=function(lt,st){return st===void 0&&(st=lt),ot.numbers(lt,st,0)}},595:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.originalSsim=void 0;var ot=it(490),lt=it(971);rt.originalSsim=function(st,at,ut){var ct=lt.fspecial("gaussian",ut.windowSize,1.5),ht=Math.pow(2,ut.bitDepth)-1,dt=Math.pow(ut.k1*ht,2),vt=Math.pow(ut.k2*ht,2);ct=ot.divide2d(ct,ot.sum2d(ct));var yt=lt.filter2(ct,st,"valid"),gt=lt.filter2(ct,at,"valid"),xt=ot.square2d(yt),ft=ot.square2d(gt),pt=ot.multiply2d(yt,gt),mt=ot.square2d(st),_t=ot.square2d(at),St=ot.subtract2d(lt.filter2(ct,mt,"valid"),xt),Et=ot.subtract2d(lt.filter2(ct,_t,"valid"),ft),kt=ot.subtract2d(lt.filter2(ct,ot.multiply2d(st,at),"valid"),pt);if(dt>0&&vt>0){var wt=ot.add2d(ot.multiply2d(pt,2),dt),bt=ot.add2d(ot.multiply2d(kt,2),vt),Mt=ot.add2d(ot.add2d(xt,ft),dt),Rt=ot.add2d(ot.add2d(St,Et),vt);return ot.divide2d(ot.multiply2d(wt,bt),ot.multiply2d(Mt,Rt))}var It=ot.multiply2d(pt,2),$t=ot.multiply2d(kt,2),Ft=ot.add2d(xt,ft),Lt=ot.add2d(St,Et);return ot.divide2d(ot.multiply2d(It,$t),ot.multiply2d(Ft,Lt))}},773:(nt,rt,it)=>{Object.defineProperty(rt,"__esModule",{value:!0}),rt.ssim=void 0;var ot=it(490),lt=it(971);rt.ssim=function(st,at,ut){var ct=lt.normpdf(function(bt){for(var Mt=Math.floor(bt/2),Rt=new Array(2*Mt+1),It=-Mt;It<=Mt;It++)Rt[It+Mt]=Math.abs(It);return{data:Rt,width:Rt.length,height:1}}(ut.windowSize),0,1.5),ht=Math.pow(2,ut.bitDepth)-1,dt=Math.pow(ut.k1*ht,2),vt=Math.pow(ut.k2*ht,2);ct=ot.divide2d(ct,ot.sum2d(ct));var yt=lt.transpose(ct),gt=lt.conv2(st,ct,yt,"valid"),xt=lt.conv2(at,ct,yt,"valid"),ft=ot.square2d(gt),pt=ot.square2d(xt),mt=ot.multiply2d(gt,xt),_t=ot.square2d(st),St=ot.square2d(at),Et=ot.subtract2d(lt.conv2(_t,ct,yt,"valid"),ft),kt=ot.subtract2d(lt.conv2(St,ct,yt,"valid"),pt),wt=ot.subtract2d(lt.conv2(ot.multiply2d(st,at),ct,yt,"valid"),mt);return dt>0&&vt>0?function(bt,Mt,Rt,It,$t,Ft,Lt,Tt){var Dt=ot.add2d(ot.multiply2d(bt,2),Lt),At=ot.add2d(ot.multiply2d(Mt,2),Tt),zt=ot.add2d(ot.add2d(Rt,It),Lt),jt=ot.add2d(ot.add2d($t,Ft),Tt);return ot.divide2d(ot.multiply2d(Dt,At),ot.multiply2d(zt,jt))}(mt,wt,ft,pt,Et,kt,dt,vt):function(bt,Mt,Rt,It,$t,Ft){var Lt=ot.multiply2d(bt,2),Tt=ot.multiply2d(Mt,2),Dt=ot.add2d(Rt,It),At=ot.add2d($t,Ft);return ot.divide2d(ot.multiply2d(Lt,Tt),ot.multiply2d(Dt,At))}(mt,wt,ft,pt,Et,kt)}},535:function(nt,rt){var it=this&&this.__assign||function(){return(it=Object.assign||function(dt){for(var vt,yt=1,gt=arguments.length;yt<gt;yt++)for(var xt in vt=arguments[yt])Object.prototype.hasOwnProperty.call(vt,xt)&&(dt[xt]=vt[xt]);return dt}).apply(this,arguments)};function ot(dt,vt,yt,gt){return{rightEdge:yt[vt*gt+dt+1],bottomEdge:yt[(vt+1)*gt+dt],bottomRightEdge:yt[(vt+1)*gt+dt+1]}}function lt(dt,vt){for(var yt=dt.width,gt=dt.height,xt=dt.data,ft=yt+1,pt=gt+1,mt=new Int32Array(ft*pt),_t=gt-1;_t>=0;--_t)for(var St=yt-1;St>=0;--St){var Et=ot(St,_t,mt,ft),kt=Et.rightEdge,wt=Et.bottomEdge,bt=Et.bottomRightEdge;mt[_t*ft+St]=vt(xt[_t*yt+St],St,_t)+kt+wt-bt}return{data:mt,height:pt,width:ft}}function st(dt,vt,yt){for(var gt=dt.width,xt=dt.height,ft=dt.data,pt=vt.data,mt=gt+1,_t=xt+1,St=new Int32Array(mt*_t),Et=xt-1;Et>=0;--Et)for(var kt=gt-1;kt>=0;--kt){var wt=ot(kt,Et,St,mt),bt=wt.rightEdge,Mt=wt.bottomEdge,Rt=wt.bottomRightEdge,It=Et*gt+kt;St[Et*mt+kt]=yt(ft[It],pt[It],kt,Et)+bt+Mt-Rt}return{data:St,height:_t,width:mt}}function at(dt,vt,yt){for(var gt=dt.width,xt=dt.height,ft=dt.data,pt=gt-1,mt=xt-1,_t=pt-vt+1,St=mt-vt+1,Et=new Int32Array(_t*St),kt=0;kt<mt;++kt)for(var wt=0;wt<pt;++wt)if(wt<_t&&kt<St){var bt=ft[gt*kt+wt]-ft[gt*kt+wt+vt]-ft[gt*(kt+vt)+wt]+ft[gt*(kt+vt)+wt+vt];Et[kt*_t+wt]=bt/yt}return{height:St,width:_t,data:Et}}function ut(dt,vt){return at(lt(dt,function(yt){return yt}),vt,1)}function ct(dt,vt,yt){for(var gt=yt*yt,xt=at(lt(dt,function(St){return St*St}),yt,1),ft=0;ft<vt.data.length;++ft){var pt=vt.data[ft]/gt,mt=xt.data[ft]/gt,_t=pt*pt;xt.data[ft]=1024*(mt-_t)}return xt}function ht(dt,vt,yt,gt,xt){for(var ft=xt*xt,pt=at(st(dt,vt,function(_t,St){return _t*St}),xt,1),mt=0;mt<yt.data.length;++mt)pt.data[mt]=1024*(pt.data[mt]/ft-yt.data[mt]/ft*(gt.data[mt]/ft));return pt}Object.defineProperty(rt,"__esModule",{value:!0}),rt.weberSsim=rt.windowCovariance=rt.windowVariance=rt.windowSums=rt.windowMatrix=rt.partialSumMatrix2=rt.partialSumMatrix1=void 0,rt.partialSumMatrix1=lt,rt.partialSumMatrix2=st,rt.windowMatrix=at,rt.windowSums=ut,rt.windowVariance=ct,rt.windowCovariance=ht,rt.weberSsim=function(dt,vt,yt){for(var gt=yt.bitDepth,xt=yt.k1,ft=yt.k2,pt=yt.windowSize,mt=Math.pow(2,gt)-1,_t=xt*mt*(xt*mt),St=ft*mt*(ft*mt),Et=pt*pt,kt=it(it({},dt),{data:Int32Array.from(dt.data,function(Ot){return Ot+.5})}),wt=it(it({},vt),{data:Int32Array.from(vt.data,function(Ot){return Ot+.5})}),bt=ut(kt,pt),Mt=ct(kt,bt,pt),Rt=ut(wt,pt),It=ct(wt,Rt,pt),$t=ht(kt,wt,bt,Rt,pt),Ft=bt.data.length,Lt=0,Tt=new Array(Ft),Dt=0;Dt<Ft;++Dt){var At=bt.data[Dt]/Et,zt=Rt.data[Dt]/Et,jt=Mt.data[Dt]/1024,Nt=It.data[Dt]/1024,Pt=(2*At*zt+_t)*($t.data[Dt]/1024*2+St)/(At*At+zt*zt+_t)/(jt+Nt+St);Tt[Dt]=Pt,Dt==0?Lt=Pt:Lt+=(Pt-Lt)/(Dt+1)}return{data:Tt,width:bt.width,height:bt.height,mssim:Lt}}}},tt={};return function nt(rt){if(tt[rt])return tt[rt].exports;var it=tt[rt]={exports:{}};return et[rt].call(it.exports,it,it.exports,nt),it.exports}(607)})()})})(ssim_web);function validateChannels(_,_e){for(const et of _)validateChannel(et,_e)}function validateChannel(_,_e){if(!Number.isInteger(_)||_>_e.channels||_<0)throw new RangeError(`invalid channel: ${_}. It must be a positive integer smaller than ${_e.channels+1}`)}function validateValues(_,_e){for(const et of _)validateValue(et,_e)}function validateValue(_,_e){if(_>_e.maxValue||_<0)throw new RangeError(`invalid value: ${_}. It must be a positive value smaller than ${_e.maxValue+1}`)}function validateForComparison(_,_e){if(_.width!==_e.width||_.height!==_e.height)throw new RangeError("both images must have the same size");if(_.alpha!==_e.alpha||_.bitDepth!==_e.bitDepth)throw new RangeError("both images must have the same alpha and bitDepth");if(_.channels!==_e.channels)throw new RangeError("both images must have the same number of channels")}function validateColor(_,_e){validateChannel(_.length,_e),validateValues(_,_e)}function subtract(_,_e,et={}){let{absolute:tt=!1}=et;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:[1,3],alpha:!1}),validateForComparison(_,_e);let nt=_.clone();if(nt instanceof Image)for(let rt=0;rt<_.size;rt++)for(let it=0;it<_.channels;it++){let ot=_.getValueByIndex(rt,it)-_e.getValueByIndex(rt,it);tt?nt.setValueByIndex(rt,it,Math.abs(ot)):nt.setValueByIndex(rt,it,Math.max(ot,0))}else if(_ instanceof Mask&&_e instanceof Mask)for(let rt=0;rt<_.size;rt++){let it=_.getBitByIndex(rt)-_e.getBitByIndex(rt);tt?nt.setBitByIndex(rt,Math.abs(it)?1:0):nt.setBitByIndex(rt,Math.max(it,0)?1:0)}return nt}function median(_){let _e=new Array(_.channels).fill(0);for(let et=0;et<_.channels;et++){const tt=_.getChannel(et);_e[et]=quickMedian(tt)}return _e}function variance(_){const _e=_.mean();let et=new Array(_.channels).fill(0);for(let nt=0;nt<_.size;nt++)for(let rt=0;rt<_.channels;rt++)et[rt]+=Math.pow(_.getValueByIndex(nt,rt)-_e[rt],2);const tt=_.size*_.channels;return et.map(nt=>nt/tt)}class MultivariateLinearRegression{constructor(_e,et,tt={}){const{intercept:nt=!0,statistics:rt=!0}=tt;if(this.statistics=rt,_e===!0)this.weights=et.weights,this.inputs=et.inputs,this.outputs=et.outputs,this.intercept=et.intercept;else{_e=new Matrix(_e),et=new Matrix(et),nt&&_e.addColumn(new Array(_e.rows).fill(1));let it=_e.transpose();const ot=it.mmul(_e),lt=it.mmul(et),st=new SingularValueDecomposition(ot).inverse(),at=lt.transpose().mmul(st).transpose();if(this.weights=at.to2DArray(),this.inputs=_e.columns,this.outputs=et.columns,nt&&this.inputs--,this.intercept=nt,rt){const ut=_e.mmul(at),ht=et.clone().addM(ut.neg()).to2DArray().map(dt=>Math.pow(dt[0],2)).reduce((dt,vt)=>dt+vt)/(et.rows-_e.columns);this.stdError=Math.sqrt(ht),this.stdErrorMatrix=pseudoInverse(ot).mul(ht),this.stdErrors=this.stdErrorMatrix.diagonal().map(dt=>Math.sqrt(dt)),this.tStats=this.weights.map((dt,vt)=>this.stdErrors[vt]===0?0:dt[0]/this.stdErrors[vt])}}}predict(_e){if(Array.isArray(_e)){if(typeof _e[0]=="number")return this._predict(_e);if(Array.isArray(_e[0])){const et=new Array(_e.length);for(let tt=0;tt<_e.length;tt++)et[tt]=this._predict(_e[tt]);return et}}else if(Matrix.isMatrix(_e)){const et=new Matrix(_e.rows,this.outputs);for(let tt=0;tt<_e.rows;tt++)et.setRow(tt,this._predict(_e.getRow(tt)));return et}throw new TypeError("x must be a matrix or array of numbers")}_predict(_e){const et=new Array(this.outputs);if(this.intercept)for(let tt=0;tt<this.outputs;tt++)et[tt]=this.weights[this.inputs][tt];else et.fill(0);for(let tt=0;tt<this.inputs;tt++)for(let nt=0;nt<this.outputs;nt++)et[nt]+=this.weights[tt][nt]*_e[tt];return et}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((_e,et)=>({label:et===this.weights.length-1?"Intercept":`X Variable ${et+1}`,coefficients:_e,standardError:this.stdErrors[et],tStat:this.tStats[et]}))}:void 0}}static load(_e){if(_e.name!=="multivariateLinearRegression")throw new Error("not a MLR model");return new MultivariateLinearRegression(!0,_e)}}var r$1={grad:.9,turn:360,rad:360/(2*Math.PI)},t$1=function(_){return typeof _=="string"?_.length>0:typeof _=="number"},n$1=function(_,_e,et){return _e===void 0&&(_e=0),et===void 0&&(et=Math.pow(10,_e)),Math.round(et*_)/et+0},e$1=function(_,_e,et){return _e===void 0&&(_e=0),et===void 0&&(et=1),_>et?et:_>_e?_:_e},u$1=function(_){return(_=isFinite(_)?_%360:0)>0?_:_+360},a$1=function(_){return{r:e$1(_.r,0,255),g:e$1(_.g,0,255),b:e$1(_.b,0,255),a:e$1(_.a)}},o$1=function(_){return{r:n$1(_.r),g:n$1(_.g),b:n$1(_.b),a:n$1(_.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s=function(_){var _e=_.toString(16);return _e.length<2?"0"+_e:_e},h$1=function(_){var _e=_.r,et=_.g,tt=_.b,nt=_.a,rt=Math.max(_e,et,tt),it=rt-Math.min(_e,et,tt),ot=it?rt===_e?(et-tt)/it:rt===et?2+(tt-_e)/it:4+(_e-et)/it:0;return{h:60*(ot<0?ot+6:ot),s:rt?it/rt*100:0,v:rt/255*100,a:nt}},b$1=function(_){var _e=_.h,et=_.s,tt=_.v,nt=_.a;_e=_e/360*6,et/=100,tt/=100;var rt=Math.floor(_e),it=tt*(1-et),ot=tt*(1-(_e-rt)*et),lt=tt*(1-(1-_e+rt)*et),st=rt%6;return{r:255*[tt,ot,it,it,lt,tt][st],g:255*[lt,tt,tt,ot,it,it][st],b:255*[it,it,lt,tt,tt,ot][st],a:nt}},g=function(_){return{h:u$1(_.h),s:e$1(_.s,0,100),l:e$1(_.l,0,100),a:e$1(_.a)}},d=function(_){return{h:n$1(_.h),s:n$1(_.s),l:n$1(_.l),a:n$1(_.a,3)}},f=function(_){return b$1((et=(_e=_).s,{h:_e.h,s:(et*=((tt=_e.l)<50?tt:100-tt)/100)>0?2*et/(tt+et)*100:0,v:tt+et,a:_e.a}));var _e,et,tt},c=function(_){return{h:(_e=h$1(_)).h,s:(nt=(200-(et=_e.s))*(tt=_e.v)/100)>0&&nt<200?et*tt/100/(nt<=100?nt:200-nt)*100:0,l:nt/2,a:_e.a};var _e,et,tt,nt},l$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(_){var _e=i$1.exec(_);return _e?(_=_e[1]).length<=4?{r:parseInt(_[0]+_[0],16),g:parseInt(_[1]+_[1],16),b:parseInt(_[2]+_[2],16),a:_.length===4?n$1(parseInt(_[3]+_[3],16)/255,2):1}:_.length===6||_.length===8?{r:parseInt(_.substr(0,2),16),g:parseInt(_.substr(2,2),16),b:parseInt(_.substr(4,2),16),a:_.length===8?n$1(parseInt(_.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_){var _e=v.exec(_)||m.exec(_);return _e?_e[2]!==_e[4]||_e[4]!==_e[6]?null:a$1({r:Number(_e[1])/(_e[2]?100/255:1),g:Number(_e[3])/(_e[4]?100/255:1),b:Number(_e[5])/(_e[6]?100/255:1),a:_e[7]===void 0?1:Number(_e[7])/(_e[8]?100:1)}):null},"rgb"],[function(_){var _e=l$1.exec(_)||p$1.exec(_);if(!_e)return null;var et,tt,nt=g({h:(et=_e[1],tt=_e[2],tt===void 0&&(tt="deg"),Number(et)*(r$1[tt]||1)),s:Number(_e[3]),l:Number(_e[4]),a:_e[5]===void 0?1:Number(_e[5])/(_e[6]?100:1)});return f(nt)},"hsl"]],object:[[function(_){var _e=_.r,et=_.g,tt=_.b,nt=_.a,rt=nt===void 0?1:nt;return t$1(_e)&&t$1(et)&&t$1(tt)?a$1({r:Number(_e),g:Number(et),b:Number(tt),a:Number(rt)}):null},"rgb"],[function(_){var _e=_.h,et=_.s,tt=_.l,nt=_.a,rt=nt===void 0?1:nt;if(!t$1(_e)||!t$1(et)||!t$1(tt))return null;var it=g({h:Number(_e),s:Number(et),l:Number(tt),a:Number(rt)});return f(it)},"hsl"],[function(_){var _e=_.h,et=_.s,tt=_.v,nt=_.a,rt=nt===void 0?1:nt;if(!t$1(_e)||!t$1(et)||!t$1(tt))return null;var it=function(ot){return{h:u$1(ot.h),s:e$1(ot.s,0,100),v:e$1(ot.v,0,100),a:e$1(ot.a)}}({h:Number(_e),s:Number(et),v:Number(tt),a:Number(rt)});return b$1(it)},"hsv"]]},N=function(_,_e){for(var et=0;et<_e.length;et++){var tt=_e[et][0](_);if(tt)return[tt,_e[et][1]]}return[null,void 0]},x=function(_){return typeof _=="string"?N(_.trim(),y.string):typeof _=="object"&&_!==null?N(_,y.object):[null,void 0]},M$1=function(_,_e){var et=c(_);return{h:et.h,s:e$1(et.s+100*_e,0,100),l:et.l,a:et.a}},H=function(_){return(299*_.r+587*_.g+114*_.b)/1e3/255},$=function(_,_e){var et=c(_);return{h:et.h,s:et.s,l:e$1(et.l+100*_e,0,100),a:et.a}},j=function(){function _(_e){this.parsed=x(_e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _.prototype.isValid=function(){return this.parsed!==null},_.prototype.brightness=function(){return n$1(H(this.rgba),2)},_.prototype.isDark=function(){return H(this.rgba)<.5},_.prototype.isLight=function(){return H(this.rgba)>=.5},_.prototype.toHex=function(){return _e=o$1(this.rgba),et=_e.r,tt=_e.g,nt=_e.b,it=(rt=_e.a)<1?s(n$1(255*rt)):"","#"+s(et)+s(tt)+s(nt)+it;var _e,et,tt,nt,rt,it},_.prototype.toRgb=function(){return o$1(this.rgba)},_.prototype.toRgbString=function(){return _e=o$1(this.rgba),et=_e.r,tt=_e.g,nt=_e.b,(rt=_e.a)<1?"rgba("+et+", "+tt+", "+nt+", "+rt+")":"rgb("+et+", "+tt+", "+nt+")";var _e,et,tt,nt,rt},_.prototype.toHsl=function(){return d(c(this.rgba))},_.prototype.toHslString=function(){return _e=d(c(this.rgba)),et=_e.h,tt=_e.s,nt=_e.l,(rt=_e.a)<1?"hsla("+et+", "+tt+"%, "+nt+"%, "+rt+")":"hsl("+et+", "+tt+"%, "+nt+"%)";var _e,et,tt,nt,rt},_.prototype.toHsv=function(){return _e=h$1(this.rgba),{h:n$1(_e.h),s:n$1(_e.s),v:n$1(_e.v),a:n$1(_e.a,3)};var _e},_.prototype.invert=function(){return w$1({r:255-(_e=this.rgba).r,g:255-_e.g,b:255-_e.b,a:_e.a});var _e},_.prototype.saturate=function(_e){return _e===void 0&&(_e=.1),w$1(M$1(this.rgba,_e))},_.prototype.desaturate=function(_e){return _e===void 0&&(_e=.1),w$1(M$1(this.rgba,-_e))},_.prototype.grayscale=function(){return w$1(M$1(this.rgba,-1))},_.prototype.lighten=function(_e){return _e===void 0&&(_e=.1),w$1($(this.rgba,_e))},_.prototype.darken=function(_e){return _e===void 0&&(_e=.1),w$1($(this.rgba,-_e))},_.prototype.rotate=function(_e){return _e===void 0&&(_e=15),this.hue(this.hue()+_e)},_.prototype.alpha=function(_e){return typeof _e=="number"?w$1({r:(et=this.rgba).r,g:et.g,b:et.b,a:_e}):n$1(this.rgba.a,3);var et},_.prototype.hue=function(_e){var et=c(this.rgba);return typeof _e=="number"?w$1({h:_e,s:et.s,l:et.l,a:et.a}):n$1(et.h)},_.prototype.isEqual=function(_e){return this.toHex()===w$1(_e).toHex()},_}(),w$1=function(_){return _ instanceof j?_:new j(_)},S=[],k=function(_){_.forEach(function(_e){S.indexOf(_e)<0&&(_e(j,y),S.push(_e))})},a=function(_){return typeof _=="string"?_.length>0:typeof _=="number"},t=function(_,_e,et){return _e===void 0&&(_e=0),et===void 0&&(et=Math.pow(10,_e)),Math.round(et*_)/et+0},o=function(_,_e,et){return _e===void 0&&(_e=0),et===void 0&&(et=1),_>et?et:_>_e?_:_e},r=function(_){var _e=_/255;return _e<.04045?_e/12.92:Math.pow((_e+.055)/1.055,2.4)},h=function(_){return 255*(_>.0031308?1.055*Math.pow(_,1/2.4)-.055:12.92*_)},n=96.422,p=100,M=82.521,u=function(_){var _e,et,tt={x:.9555766*(_e=_).x+-.0230393*_e.y+.0631636*_e.z,y:-.0282895*_e.x+1.0099416*_e.y+.0210077*_e.z,z:.0122982*_e.x+-.020483*_e.y+1.3299098*_e.z};return et={r:h(.032404542*tt.x-.015371385*tt.y-.004985314*tt.z),g:h(-.00969266*tt.x+.018760108*tt.y+41556e-8*tt.z),b:h(556434e-9*tt.x-.002040259*tt.y+.010572252*tt.z),a:_.a},{r:o(et.r,0,255),g:o(et.g,0,255),b:o(et.b,0,255),a:o(et.a)}},e=function(_){var _e=r(_.r),et=r(_.g),tt=r(_.b);return function(nt){return{x:o(nt.x,0,n),y:o(nt.y,0,p),z:o(nt.z,0,M),a:o(nt.a)}}(function(nt){return{x:1.0478112*nt.x+.0228866*nt.y+-.050127*nt.z,y:.0295424*nt.x+.9904844*nt.y+-.0170491*nt.z,z:-.0092345*nt.x+.0150436*nt.y+.7521316*nt.z,a:nt.a}}({x:100*(.4124564*_e+.3575761*et+.1804375*tt),y:100*(.2126729*_e+.7151522*et+.072175*tt),z:100*(.0193339*_e+.119192*et+.9503041*tt),a:_.a}))},w=216/24389,b=24389/27,i=function(_){var _e=_.l,et=_.a,tt=_.b,nt=_.alpha,rt=nt===void 0?1:nt;if(!a(_e)||!a(et)||!a(tt))return null;var it=function(ot){return{l:o(ot.l,0,400),a:ot.a,b:ot.b,alpha:o(ot.alpha)}}({l:Number(_e),a:Number(et),b:Number(tt),alpha:Number(rt)});return l(it)},l=function(_){var _e=(_.l+16)/116,et=_.a/500+_e,tt=_e-_.b/200;return u({x:(Math.pow(et,3)>w?Math.pow(et,3):(116*et-16)/b)*n,y:(_.l>8?Math.pow((_.l+16)/116,3):_.l/b)*p,z:(Math.pow(tt,3)>w?Math.pow(tt,3):(116*tt-16)/b)*M,a:_.alpha})};function labPlugin(_,_e){_.prototype.toLab=function(){return tt=e(this.rgba),rt=tt.y/p,it=tt.z/M,nt=(nt=tt.x/n)>w?Math.cbrt(nt):(b*nt+16)/116,et={l:116*(rt=rt>w?Math.cbrt(rt):(b*rt+16)/116)-16,a:500*(nt-rt),b:200*(rt-(it=it>w?Math.cbrt(it):(b*it+16)/116)),alpha:tt.a},{l:t(et.l,2),a:t(et.a,2),b:t(et.b,2),alpha:t(et.alpha,3)};var et,tt,nt,rt,it},_.prototype.delta=function(et){et===void 0&&(et="#FFF");var tt=et instanceof _?et:new _(et),nt=function(rt,it){var ot=rt.l,lt=rt.a,st=rt.b,at=it.l,ut=it.a,ct=it.b,ht=180/Math.PI,dt=Math.PI/180,vt=Math.pow(Math.pow(lt,2)+Math.pow(st,2),.5),yt=Math.pow(Math.pow(ut,2)+Math.pow(ct,2),.5),gt=(ot+at)/2,xt=Math.pow((vt+yt)/2,7),ft=.5*(1-Math.pow(xt/(xt+Math.pow(25,7)),.5)),pt=lt*(1+ft),mt=ut*(1+ft),_t=Math.pow(Math.pow(pt,2)+Math.pow(st,2),.5),St=Math.pow(Math.pow(mt,2)+Math.pow(ct,2),.5),Et=(_t+St)/2,kt=pt===0&&st===0?0:Math.atan2(st,pt)*ht,wt=mt===0&&ct===0?0:Math.atan2(ct,mt)*ht;kt<0&&(kt+=360),wt<0&&(wt+=360);var bt=wt-kt,Mt=Math.abs(wt-kt);Mt>180&&wt<=kt?bt+=360:Mt>180&&wt>kt&&(bt-=360);var Rt=kt+wt;Mt<=180?Rt/=2:Rt=(kt+wt<360?Rt+360:Rt-360)/2;var It=1-.17*Math.cos(dt*(Rt-30))+.24*Math.cos(2*dt*Rt)+.32*Math.cos(dt*(3*Rt+6))-.2*Math.cos(dt*(4*Rt-63)),$t=at-ot,Ft=St-_t,Lt=2*Math.sin(dt*bt/2)*Math.pow(_t*St,.5),Tt=1+.015*Math.pow(gt-50,2)/Math.pow(20+Math.pow(gt-50,2),.5),Dt=1+.045*Et,At=1+.015*Et*It,zt=30*Math.exp(-1*Math.pow((Rt-275)/25,2)),jt=-2*Math.pow(xt/(xt+Math.pow(25,7)),.5)*Math.sin(2*dt*zt);return Math.pow(Math.pow($t/1/Tt,2)+Math.pow(Ft/1/Dt,2)+Math.pow(Lt/1/At,2)+jt*Ft*Lt/(1*Dt*1*At),.5)}(this.toLab(),tt.toLab())/100;return o(t(nt,3))},_e.object.push([i,"lab"])}k([labPlugin]);function formatReferenceForMlr(_,_e){const et={r:[],g:[],b:[]};for(let tt of _)et.r.push([tt.r/_e]),et.g.push([tt.g/_e]),et.b.push([tt.b/_e]);return et}function formatInputForMlr(_,_e){const et=[];for(let tt of _)et.push(getRegressionVariables(tt.r,tt.g,tt.b,_e));return et}function correctColor(_,_e,et){if(checkProcessable(_,{colorModel:["RGB","RGBA"]}),_e.length!==et.length)throw new RangeError("number of measured colors and reference colors must be the same");const tt=formatInputForMlr(_e,_.maxValue),nt=formatReferenceForMlr(et,_.maxValue),rt=new MultivariateLinearRegression(tt,nt.r),it=new MultivariateLinearRegression(tt,nt.g),ot=new MultivariateLinearRegression(tt,nt.b),lt=Image.createFrom(_);for(let st=0;st<_.height;st++)for(let at=0;at<_.width;at++){const ut=_.getPixel(at,st),ct=getRegressionVariables(ut[0],ut[1],ut[2],_.maxValue),ht=getClamp(_),dt=[0,0,0],vt=rt.predict(ct)[0]*_.maxValue,yt=it.predict(ct)[0]*_.maxValue,gt=ot.predict(ct)[0]*_.maxValue;dt[0]=ht(vt),dt[1]=ht(yt),dt[2]=ht(gt),_.alpha&&(dt[3]=_.getValue(at,st,3)),lt.setPixel(at,st,dt)}return lt}function getRegressionVariables(_,_e,et,tt){return _/=tt,_e/=tt,et/=tt,[_,_e,et,_**2,_e**2,et**2,_**3,_e**3,et**3,_*_e,_*et,et*_e]}function getDefaultColor(_){switch(_.colorModel){case"GREY":return[0];case"GREYA":return[0,_.maxValue];case"RGB":return[0,0,0];case"RGBA":return[0,0,0,_.maxValue];case"BINARY":return[1];default:assert$1(!1,`invalid image color model: ${_.colorModel}`)}}function roundPoint(_){return{row:Math.round(_.row),column:Math.round(_.column)}}function drawCircleOnImage(_,_e,et,tt={}){const nt=getOutputImage(_,tt,{clone:!0}),{color:rt=getDefaultColor(nt),fill:it}=tt;if(validateColor(rt,nt),checkProcessable(nt,{bitDepth:[8,16]}),et<0)throw new RangeError("circle radius must be positive");return _e=roundPoint(_e),et=Math.round(et),et===0?(nt.setVisiblePixel(_e.column,_e.row,rt),nt):(it?(et===1&&nt.setVisiblePixel(_e.column,_e.row,it),circle(_e.column,_e.row,et,(ot,lt)=>{nt.setVisiblePixel(ot,lt,rt),ot-1>_e.column?nt.drawLine({row:lt,column:ot-1},{row:lt,column:_e.column},{strokeColor:it,out:nt}):ot+1<_e.column&&nt.drawLine({row:lt,column:ot+1},{row:lt,column:_e.column},{strokeColor:it,out:nt})})):circle(_e.column,_e.row,et,(ot,lt)=>{nt.setVisiblePixel(ot,lt,rt)}),nt)}function drawLineOnImage(_,_e,et,tt={}){const nt=getOutputImage(_,tt,{clone:!0});let{strokeColor:rt=getDefaultColor(nt),origin:it={column:0,row:0}}=tt;return validateColor(rt,nt),checkProcessable(nt,{bitDepth:[8,16]}),line(Math.round(it.column+_e.column),Math.round(it.row+_e.row),Math.round(it.column+et.column),Math.round(it.row+et.row),(ot,lt)=>{nt.setVisiblePixel(ot,lt,rt)}),nt}function drawLineOnMask(_,_e,et,tt={}){const{origin:nt={column:0,row:0}}=tt,rt=maskToOutputMask(_,tt,{clone:!0});return line(Math.round(nt.column+_e.column),Math.round(nt.row+_e.row),Math.round(nt.column+et.column),Math.round(nt.row+et.row),(it,ot)=>{rt.setVisiblePixel(it,ot,[1])}),rt}function drawPolylineOnImage(_,_e,et={}){const{strokeColor:tt=getDefaultColor(_),origin:nt={column:0,row:0}}=et;checkProcessable(_,{bitDepth:[8,16]});let rt=getOutputImage(_,et,{clone:!0});validateColor(tt,rt);for(let it=0;it<_e.length-1;it++){const ot=_e[it],lt=_e[it+1];rt.drawLine(ot,lt,{out:rt,strokeColor:tt,origin:nt})}return rt}function drawPolylineOnMask(_,_e,et={}){let tt=maskToOutputMask(_,et,{clone:!0});for(let nt=0;nt<_e.length-1;nt++){const rt=_e[nt],it=_e[nt+1];tt.drawLine(rt,it,{out:tt,origin:et.origin})}return tt}var orientation={exports:{}},twoProduct_1=twoProduct$1,SPLITTER=+(Math.pow(2,27)+1);function twoProduct$1(_,_e,et){var tt=_*_e,nt=SPLITTER*_,rt=nt-_,it=nt-rt,ot=_-it,lt=SPLITTER*_e,st=lt-_e,at=lt-st,ut=_e-at,ct=tt-it*at,ht=ct-ot*at,dt=ht-it*ut,vt=ot*ut-dt;return et?(et[0]=vt,et[1]=tt,et):[vt,tt]}var robustSum=linearExpansionSum;function scalarScalar$1(_,_e){var et=_+_e,tt=et-_,nt=et-tt,rt=_e-tt,it=_-nt,ot=it+rt;return ot?[ot,et]:[et]}function linearExpansionSum(_,_e){var et=_.length|0,tt=_e.length|0;if(et===1&&tt===1)return scalarScalar$1(_[0],_e[0]);var nt=et+tt,rt=new Array(nt),it=0,ot=0,lt=0,st=Math.abs,at=_[ot],ut=st(at),ct=_e[lt],ht=st(ct),dt,vt;ut<ht?(vt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(vt=ct,lt+=1,lt<tt&&(ct=_e[lt],ht=st(ct))),ot<et&&ut<ht||lt>=tt?(dt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(dt=ct,lt+=1,lt<tt&&(ct=_e[lt],ht=st(ct)));for(var yt=dt+vt,gt=yt-dt,xt=vt-gt,ft=xt,pt=yt,mt,_t,St,Et,kt;ot<et&&lt<tt;)ut<ht?(dt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(dt=ct,lt+=1,lt<tt&&(ct=_e[lt],ht=st(ct))),vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt;for(;ot<et;)dt=at,vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt,ot+=1,ot<et&&(at=_[ot]);for(;lt<tt;)dt=ct,vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt,lt+=1,lt<tt&&(ct=_e[lt]);return ft&&(rt[it++]=ft),pt&&(rt[it++]=pt),it||(rt[it++]=0),rt.length=it,rt}var twoSum$1=fastTwoSum;function fastTwoSum(_,_e,et){var tt=_+_e,nt=tt-_,rt=tt-nt,it=_e-nt,ot=_-rt;return et?(et[0]=ot+it,et[1]=tt,et):[ot+it,tt]}var twoProduct=twoProduct_1,twoSum=twoSum$1,robustScale=scaleLinearExpansion;function scaleLinearExpansion(_,_e){var et=_.length;if(et===1){var tt=twoProduct(_[0],_e);return tt[0]?tt:[tt[1]]}var nt=new Array(2*et),rt=[.1,.1],it=[.1,.1],ot=0;twoProduct(_[0],_e,rt),rt[0]&&(nt[ot++]=rt[0]);for(var lt=1;lt<et;++lt){twoProduct(_[lt],_e,it);var st=rt[1];twoSum(st,it[0],rt),rt[0]&&(nt[ot++]=rt[0]);var at=it[1],ut=rt[1],ct=at+ut,ht=ct-at,dt=ut-ht;rt[1]=ct,dt&&(nt[ot++]=dt)}return rt[1]&&(nt[ot++]=rt[1]),ot===0&&(nt[ot++]=0),nt.length=ot,nt}var robustDiff=robustSubtract;function scalarScalar(_,_e){var et=_+_e,tt=et-_,nt=et-tt,rt=_e-tt,it=_-nt,ot=it+rt;return ot?[ot,et]:[et]}function robustSubtract(_,_e){var et=_.length|0,tt=_e.length|0;if(et===1&&tt===1)return scalarScalar(_[0],-_e[0]);var nt=et+tt,rt=new Array(nt),it=0,ot=0,lt=0,st=Math.abs,at=_[ot],ut=st(at),ct=-_e[lt],ht=st(ct),dt,vt;ut<ht?(vt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(vt=ct,lt+=1,lt<tt&&(ct=-_e[lt],ht=st(ct))),ot<et&&ut<ht||lt>=tt?(dt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(dt=ct,lt+=1,lt<tt&&(ct=-_e[lt],ht=st(ct)));for(var yt=dt+vt,gt=yt-dt,xt=vt-gt,ft=xt,pt=yt,mt,_t,St,Et,kt;ot<et&&lt<tt;)ut<ht?(dt=at,ot+=1,ot<et&&(at=_[ot],ut=st(at))):(dt=ct,lt+=1,lt<tt&&(ct=-_e[lt],ht=st(ct))),vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt;for(;ot<et;)dt=at,vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt,ot+=1,ot<et&&(at=_[ot]);for(;lt<tt;)dt=ct,vt=ft,yt=dt+vt,gt=yt-dt,xt=vt-gt,xt&&(rt[it++]=xt),mt=pt+yt,_t=mt-pt,St=mt-_t,Et=yt-_t,kt=pt-St,ft=kt+Et,pt=mt,lt+=1,lt<tt&&(ct=-_e[lt]);return ft&&(rt[it++]=ft),pt&&(rt[it++]=pt),it||(rt[it++]=0),rt.length=it,rt}(function(_){var _e=twoProduct_1,et=robustSum,tt=robustScale,nt=robustDiff,rt=5,it=11102230246251565e-32,ot=(3+16*it)*it,lt=(7+56*it)*it;function st(ft,pt,mt,_t){return function(Et,kt,wt){var bt=ft(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0]))),Mt=ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),Rt=_t(bt,Mt);return Rt[Rt.length-1]}}function at(ft,pt,mt,_t){return function(Et,kt,wt,bt){var Mt=ft(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),kt[2]),ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),-wt[2]),mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),bt[2]))),ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),bt[2])))),Rt=ft(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-wt[2]),mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),bt[2]))),ft(mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),wt[2])))),It=_t(Mt,Rt);return It[It.length-1]}}function ut(ft,pt,mt,_t){return function(Et,kt,wt,bt,Mt){var Rt=ft(ft(ft(mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),wt[2]),ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),-bt[2]),mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),Mt[2]))),kt[3]),ft(mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),kt[2]),ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),-bt[2]),mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),Mt[2]))),-wt[3]),mt(ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),kt[2]),ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),-wt[2]),mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),Mt[2]))),bt[3]))),ft(mt(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),kt[2]),ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),-wt[2]),mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),bt[2]))),-Mt[3]),ft(mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),kt[2]),ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),-bt[2]),mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),Mt[2]))),Et[3]),mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-bt[2]),mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),Mt[2]))),-kt[3])))),ft(ft(mt(ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),Mt[2]))),bt[3]),ft(mt(ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),bt[2]))),-Mt[3]),mt(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),kt[2]),ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),-wt[2]),mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),bt[2]))),Et[3]))),ft(mt(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-wt[2]),mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),bt[2]))),-kt[3]),ft(mt(ft(mt(ft(pt(kt[1],bt[0]),pt(-bt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),bt[2]))),wt[3]),mt(ft(mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),wt[2]))),-bt[3]))))),It=ft(ft(ft(mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),wt[2]),ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),-bt[2]),mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),Mt[2]))),Et[3]),mt(ft(mt(ft(pt(bt[1],Mt[0]),pt(-Mt[1],bt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-bt[2]),mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),Mt[2]))),-wt[3])),ft(mt(ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-wt[2]),mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),Mt[2]))),bt[3]),mt(ft(mt(ft(pt(wt[1],bt[0]),pt(-bt[1],wt[0])),Et[2]),ft(mt(ft(pt(Et[1],bt[0]),pt(-bt[1],Et[0])),-wt[2]),mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),bt[2]))),-Mt[3]))),ft(ft(mt(ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),kt[2]),ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),-wt[2]),mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),Mt[2]))),Et[3]),mt(ft(mt(ft(pt(wt[1],Mt[0]),pt(-Mt[1],wt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-wt[2]),mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),Mt[2]))),-kt[3])),ft(mt(ft(mt(ft(pt(kt[1],Mt[0]),pt(-Mt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],Mt[0]),pt(-Mt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),Mt[2]))),wt[3]),mt(ft(mt(ft(pt(kt[1],wt[0]),pt(-wt[1],kt[0])),Et[2]),ft(mt(ft(pt(Et[1],wt[0]),pt(-wt[1],Et[0])),-kt[2]),mt(ft(pt(Et[1],kt[0]),pt(-kt[1],Et[0])),wt[2]))),-Mt[3])))),$t=_t(Rt,It);return $t[$t.length-1]}}function ct(ft){var pt=ft===3?st:ft===4?at:ut;return pt(et,_e,tt,nt)}var ht=ct(3),dt=ct(4),vt=[function(){return 0},function(){return 0},function(pt,mt){return mt[0]-pt[0]},function(pt,mt,_t){var St=(pt[1]-_t[1])*(mt[0]-_t[0]),Et=(pt[0]-_t[0])*(mt[1]-_t[1]),kt=St-Et,wt;if(St>0){if(Et<=0)return kt;wt=St+Et}else if(St<0){if(Et>=0)return kt;wt=-(St+Et)}else return kt;var bt=ot*wt;return kt>=bt||kt<=-bt?kt:ht(pt,mt,_t)},function(pt,mt,_t,St){var Et=pt[0]-St[0],kt=mt[0]-St[0],wt=_t[0]-St[0],bt=pt[1]-St[1],Mt=mt[1]-St[1],Rt=_t[1]-St[1],It=pt[2]-St[2],$t=mt[2]-St[2],Ft=_t[2]-St[2],Lt=kt*Rt,Tt=wt*Mt,Dt=wt*bt,At=Et*Rt,zt=Et*Mt,jt=kt*bt,Nt=It*(Lt-Tt)+$t*(Dt-At)+Ft*(zt-jt),Pt=(Math.abs(Lt)+Math.abs(Tt))*Math.abs(It)+(Math.abs(Dt)+Math.abs(At))*Math.abs($t)+(Math.abs(zt)+Math.abs(jt))*Math.abs(Ft),Ot=lt*Pt;return Nt>Ot||-Nt>Ot?Nt:dt(pt,mt,_t,St)}];function yt(ft){var pt=vt[ft.length];return pt||(pt=vt[ft.length]=ct(ft.length)),pt.apply(void 0,ft)}function gt(ft,pt,mt,_t,St,Et,kt){return function(bt,Mt,Rt,It,$t){switch(arguments.length){case 0:case 1:return 0;case 2:return _t(bt,Mt);case 3:return St(bt,Mt,Rt);case 4:return Et(bt,Mt,Rt,It);case 5:return kt(bt,Mt,Rt,It,$t)}for(var Ft=new Array(arguments.length),Lt=0;Lt<arguments.length;++Lt)Ft[Lt]=arguments[Lt];return ft(Ft)}}function xt(){for(;vt.length<=rt;)vt.push(ct(vt.length));_.exports=gt.apply(void 0,[yt].concat(vt));for(var ft=0;ft<=rt;++ft)_.exports[ft]=vt[ft]}xt()})(orientation);var orientationExports=orientation.exports,robustPnp=robustPointInPolygon,orient=orientationExports;function robustPointInPolygon(_,_e){for(var et=_e[0],tt=_e[1],nt=_.length,rt=1,it=nt,ot=0,lt=nt-1;ot<it;lt=ot++){var st=_[ot],at=_[lt],ut=st[1],ct=at[1];if(ct<ut){if(ct<tt&&tt<ut){var ht=orient(st,at,_e);if(ht===0)return 0;rt^=0<ht|0}else if(tt===ut){var dt=_[(ot+1)%nt],vt=dt[1];if(ut<vt){var ht=orient(st,at,_e);if(ht===0)return 0;rt^=0<ht|0}}}else if(ut<ct){if(ut<tt&&tt<ct){var ht=orient(st,at,_e);if(ht===0)return 0;rt^=ht<0|0}else if(tt===ut){var dt=_[(ot+1)%nt],vt=dt[1];if(vt<ut){var ht=orient(st,at,_e);if(ht===0)return 0;rt^=ht<0|0}}}else if(tt===ut){var yt=Math.min(st[0],at[0]),gt=Math.max(st[0],at[0]);if(ot===0){for(;lt>0;){var xt=(lt+nt-1)%nt,ft=_[xt];if(ft[1]!==tt)break;var pt=ft[0];yt=Math.min(yt,pt),gt=Math.max(gt,pt),lt=xt}if(lt===0)return yt<=et&&et<=gt?0:1;it=lt+1}for(var mt=_[(lt+nt-1)%nt][1];ot+1<it;){var ft=_[ot+1];if(ft[1]!==tt)break;var pt=ft[0];yt=Math.min(yt,pt),gt=Math.max(gt,pt),ot+=1}if(yt<=et&&et<=gt)return 0;var _t=_[(ot+1)%nt][1];et<yt&&mt<tt!=_t<tt&&(rt^=1)}}return 2*rt-1}const robustPointInPolygon$1=getDefaultExportFromCjs(robustPnp);function arrayPointsToObjects(_){let _e=[];for(let et of _)_e.push([et.column,et.row]);return _e}function drawPolygonOnImage(_,_e,et={}){const{fillColor:tt,origin:nt={column:0,row:0},...rt}=et;checkProcessable(_,{bitDepth:[8,16]});let it=getOutputImage(_,et,{clone:!0});if(tt===void 0)return it.drawPolyline([..._e,_e[0]],{origin:nt,...rt});{validateColor(tt,it);const ot=deleteDuplicates(_e),lt=arrayPointsToObjects(ot);for(let st=0;st<it.height;st++)for(let at=0;at<it.width;at++)robustPointInPolygon$1(lt,[at,st])===-1&&it.setPixel(nt.column+at,nt.row+st,tt)}return it.drawPolyline([..._e,_e[0]],{origin:nt,...rt})}function drawPolygonOnMask(_,_e,et={}){const{filled:tt=!1,origin:nt={column:0,row:0},...rt}=et;let it=maskToOutputMask(_,et,{clone:!0});if(!tt)return it.drawPolyline([..._e,_e[0]],{origin:nt,...rt});const ot=deleteDuplicates(_e),lt=arrayPointsToObjects(ot);for(let st=0;st<it.height;st++)for(let at=0;at<it.width;at++)robustPointInPolygon$1(lt,[at,st])===-1&&it.setBit(nt.column+at,nt.row+st,1);return it.drawPolyline([..._e,_e[0]],{origin:nt,...rt})}function drawRectangle(_,_e={}){const{origin:et={column:0,row:0},width:tt=_.width,height:nt=_.height,strokeColor:rt=getDefaultColor(_),fillColor:it="none"}=_e,{column:ot,row:lt}=et;let st;if(_ instanceof Image?(checkProcessable(_,{bitDepth:[8,16]}),st=getOutputImage(_,_e,{clone:!0})):st=maskToOutputMask(_,_e,{clone:!0}),rt!=="none"){for(let at=ot;at<ot+tt;at++)st.setVisiblePixel(at,lt,rt),st.setVisiblePixel(at,lt+nt-1,rt);for(let at=lt+1;at<lt+nt-1;at++)st.setVisiblePixel(ot,at,rt),st.setVisiblePixel(ot+tt-1,at,rt)}if(it!=="none")for(let at=lt+1;at<lt+nt-1;at++)for(let ut=ot+1;ut<ot+tt-1;ut++)st.setVisiblePixel(ut,at,it),st.setVisiblePixel(ut,at,it);return st}function drawPoints(_,_e,et={}){const{color:tt=getDefaultColor(_),origin:nt={row:0,column:0}}=et;let rt;_ instanceof Image?(rt=getOutputImage(_,et,{clone:!0}),validateColor(tt,rt)):rt=maskToOutputMask(_,et,{clone:!0}),checkProcessable(rt,{bitDepth:[1,8,16]});for(const it of _e)rt.setVisiblePixel(Math.round(nt.column+it.column),Math.round(nt.row+it.row),tt);return rt}function drawMarker(_,_e,et){const tt=getOutputImage(_,et,{clone:!0}),{color:nt=getDefaultColor(tt),filled:rt=!1,shape:it="cross",size:ot=1}=et;if(validateColor(nt,tt),checkProcessable(tt,{bitDepth:[8,16]}),it==="circle"&&tt.drawCircle(_e,ot,{color:nt,fill:rt?nt:void 0,out:tt}),it==="triangle"){const lt=[{row:_e.row-ot,column:_e.column},{row:_e.row,column:_e.column+ot},{row:_e.row,column:_e.column-ot}];tt.drawPolygon(lt,{strokeColor:nt,fillColor:rt?nt:void 0,out:tt})}if(it==="cross"&&(tt.drawLine({row:_e.row-ot,column:_e.column},{row:_e.row+ot,column:_e.column},{strokeColor:nt,out:tt}),tt.drawLine({row:_e.row,column:_e.column-ot},{row:_e.row,column:_e.column+ot},{strokeColor:nt,out:tt})),it==="square"){const lt={row:Math.floor(_e.row-ot/2),column:Math.floor(_e.column-ot/2)};tt.drawRectangle({origin:lt,width:ot,height:ot,strokeColor:nt,fillColor:rt?nt:void 0,out:tt})}return tt}function drawMarkers(_,_e,et={}){const tt=getOutputImage(_,et,{clone:!0});for(const nt of _e)drawMarker(tt,nt,{...et,out:tt});return tt}function and(_,_e,et){const tt=maskToOutputMask(_,et);if(_.width!==_e.width||_.height!==_e.height)throw new RangeError("both masks must have the same size");for(let nt=0;nt<tt.size;nt++)_.getBitByIndex(nt)&&_e.getBitByIndex(nt)?tt.setBitByIndex(nt,1):tt.setBitByIndex(nt,0);return tt}function checkSize(_){if(!Number.isInteger(_)||_<1)throw new TypeError(`size must be a positive integer. Got ${_}`)}function checkKernel$1(_){if(_.length===0||_.length%2!==1)throw new RangeError(`kernel must have an odd positive length. Got ${_.length}`)}function checkBorderType(_){if(_!=="CONSTANT"&&_!=="CUT")throw new RangeError(`unexpected border type: ${_}`)}function checkInputLength(_,_e){if(_!==_e)throw new RangeError(`input length (${_}) does not match setup size (${_e})`)}function createArray(_){const _e=[];for(var et=0;et<_;et++)_e.push(0);return _e}class DirectConvolution{constructor(_e,et,tt="CONSTANT"){checkSize(_e),checkKernel$1(et),checkBorderType(tt),this.size=_e,this.kernelOffset=(et.length-1)/2,this.outputSize=tt==="CONSTANT"?_e:_e-2*this.kernelOffset,this.output=createArray(this.outputSize),this.kernel=et,this.kernelSize=et.length,this.borderType=tt}convolve(_e){return checkInputLength(_e.length,this.size),this.output.fill(0),this.borderType==="CONSTANT"?this._convolutionBorder0(_e):this._convolutionBorderCut(_e),this.output}_convolutionBorder0(_e){for(let et=0;et<this.size;et++)for(let tt=0;tt<this.kernelSize;tt++)this.output[et]+=interpolateInput(_e,et-this.kernelOffset+tt)*this.kernel[tt]}_convolutionBorderCut(_e){for(let et=this.kernelOffset;et<this.size-this.kernelOffset;et++){const tt=et-this.kernelOffset;for(let nt=0;nt<this.kernelSize;nt++)this.output[tt]+=_e[tt+nt]*this.kernel[nt]}}}function interpolateInput(_,_e){return _e<0||_e>=_.length?0:_[_e]}const BorderType={CONSTANT:"CONSTANT",CUT:"CUT"};function getBorderInterpolation(_,_e){switch(_){case"constant":return getInterpolateConstant(_e);case"replicate":return interpolateReplicate;case"reflect":return interpolateReflect;case"reflect101":return interpolateReflect101;case"wrap":return interpolateWrap;default:throw new RangeError(`invalid border type: ${_}`)}}function checkRange(_,_e){if(_<=0-_e||_>=_e+_e-1)throw new RangeError("border must be smaller than the original image")}function getInterpolateConstant(_){return function(et,tt,nt,rt){const it=interpolateConstantPoint(et,rt.width),ot=interpolateConstantPoint(tt,rt.height);return it===-1||ot===-1?_:rt.getValue(it,ot,nt)}}function interpolateConstantPoint(_,_e){return _>=0&&_<_e?_:-1}function interpolateReplicate(_,_e,et,tt){return tt.getValue(interpolateReplicatePoint(_,tt.width),interpolateReplicatePoint(_e,tt.height),et)}function interpolateReplicatePoint(_,_e){return _>=0&&_<_e?_:(checkRange(_,_e),_<0?0:_e-1)}function interpolateReflect(_,_e,et,tt){return tt.getValue(interpolateReflectPoint(_,tt.width),interpolateReflectPoint(_e,tt.height),et)}function interpolateReflectPoint(_,_e){return _>=0&&_<_e?_:(checkRange(_,_e),_<0?-1-_:_e+_e-1-_)}function interpolateWrap(_,_e,et,tt){return tt.getValue(interpolateWrapPoint(_,tt.width),interpolateWrapPoint(_e,tt.height),et)}function interpolateWrapPoint(_,_e){return _>=0&&_<_e?_:(checkRange(_,_e),_<0?_e+_:_-_e)}function interpolateReflect101(_,_e,et,tt){return tt.getValue(interpolateReflect101Point(_,tt.width),interpolateReflect101Point(_e,tt.height),et)}function interpolateReflect101Point(_,_e){return _>=0&&_<_e?_:(checkRange(_,_e),_<0?0-_:_e+_e-2-_)}function extendBorders(_,_e){const{horizontal:et,vertical:tt,borderType:nt="reflect101",borderValue:rt=0}=_e,it=getBorderInterpolation(nt,rt),ot=Image.createFrom(_,{width:_.width+2*et,height:_.height+2*tt});_.copyTo(ot,{origin:{column:et,row:tt},out:ot});for(let lt=0;lt<tt;lt++)for(let st=0;st<ot.width;st++)for(let at=0;at<_.channels;at++){const ut=it(st-et,lt-tt,at,_);ot.setValue(st,lt,at,ut)}for(let lt=ot.height-tt;lt<ot.height;lt++)for(let st=0;st<ot.width;st++)for(let at=0;at<_.channels;at++){const ut=it(st-et,lt-tt,at,_);ot.setValue(st,lt,at,ut)}for(let lt=tt;lt<ot.height-tt;lt++)for(let st=0;st<et;st++)for(let at=0;at<_.channels;at++){const ut=it(st-et,lt-tt,at,_);ot.setValue(st,lt,at,ut)}for(let lt=tt;lt<ot.height-tt;lt++)for(let st=ot.width-et;st<ot.width;st++)for(let at=0;at<_.channels;at++){const ut=it(st-et,lt-tt,at,_);ot.setValue(st,lt,at,ut)}return ot}function round(_){const _e=Math.trunc(_),et=_-_e;return et<.5?_e:et>.5?_e+1:_e%2===0?_e:_e+1}function directConvolution(_,_e,et={}){const{borderType:tt="reflect101",borderValue:nt=0}=et,rt=rawDirectConvolution(_,_e,{borderType:tt,borderValue:nt}),it=getOutputImage(_,et),ot=getClamp(it);for(let lt=0;lt<_.size;lt++)for(let st=0;st<_.channels;st++){let at=lt*_.channels+st,ut=round(ot(rt[at]));it.setValueByIndex(lt,st,ut)}return it}function rawDirectConvolution(_,_e,et={}){const{borderType:tt="reflect101",borderValue:nt=0}=et,rt=getBorderInterpolation(tt,nt);let it=new Float64Array(_.size*_.channels);for(let ot=0;ot<_.channels;ot++)for(let lt=0;lt<_.height;lt++)for(let st=0;st<_.width;st++){let at=getIndex(st,lt,_,ot);it[at]=computeConvolutionValue(st,lt,ot,_,_e,rt,{returnRawValue:!0})}return it}function separableConvolution(_,_e,et,tt={}){const{normalize:nt,borderType:rt="reflect101",borderValue:it=0}=tt;nt&&([_e,et]=normalizeSeparatedKernel(_e,et));const lt=(_e.length-1)/2,at=(et.length-1)/2,ut=extendBorders(_,{horizontal:lt,vertical:at,borderType:rt,borderValue:it}),ct=Image.createFrom(_),ht=getClamp(ct),dt=new DirectConvolution(ut.width,_e,BorderType.CUT),vt=new DirectConvolution(ut.height,et,BorderType.CUT),yt=new Float64Array(ut.width),gt=new Float64Array(ut.height),xt=new Float64Array(_.width*ut.height);for(let ft=0;ft<ut.channels;ft++){for(let pt=0;pt<ut.height;pt++){for(let _t=0;_t<ut.width;_t++)yt[_t]=ut.getValue(_t,pt,ft);const mt=dt.convolve(yt);for(let _t=0;_t<_.width;_t++)xt[pt*_.width+_t]=mt[_t]}for(let pt=0;pt<_.width;pt++){for(let _t=0;_t<ut.height;_t++)gt[_t]=xt[_t*_.width+pt];const mt=vt.convolve(gt);for(let _t=0;_t<_.height;_t++)ct.setValue(pt,_t,ft,round(ht(mt[_t])))}}return ct}function computeConvolutionValue(_,_e,et,tt,nt,rt,it={}){let{returnRawValue:ot=!1,clamp:lt}=it;ot&&(lt=void 0);let st=0;const at=nt[0].length,ut=nt.length,ct=(at-1)/2,ht=(ut-1)/2;for(let dt=0;dt<ut;dt++)for(let vt=0;vt<at;vt++){const yt=nt[dt][vt];st+=yt*rt(_+vt-ct,_e+dt-ht,et,tt)}return lt?round(lt(st)):st}function normalizeSeparatedKernel(_,_e){const et=_.reduce((it,ot)=>it+ot,0),tt=_e.reduce((it,ot)=>it+ot,0),nt=et*tt;if(nt<0)throw new RangeError("this separated kernel cannot be normalized");const rt=1/Math.sqrt(Math.abs(nt));return[_.map(it=>it*rt),_e.map(it=>it*rt)]}function blur(_,_e){const{width:et,height:tt}=_e,nt=new Array(et).fill(1),rt=new Array(tt).fill(1);return separableConvolution(_,nt,rt,{normalize:!0,..._e})}function derivativeFilter(_,_e={}){const{filter:et="sobel"}=_e;let tt=SOBEL_X,nt=SOBEL_Y;switch(et){case"sobel":break;case"scharr":tt=SCHARR_X,nt=SCHARR_Y;break;case"prewitt":tt=PREWITT_X,nt=PREWITT_Y;break;default:throw new RangeError(`invalid derivative filter: ${et}`)}return _.gradientFilter({kernelX:tt,kernelY:nt,..._e})}const colorModels={GREY:{components:1,alpha:!1,channels:1},GREYA:{components:1,alpha:!0,channels:2},RGB:{components:3,alpha:!1,channels:3},RGBA:{components:3,alpha:!0,channels:4},BINARY:{components:1,alpha:!1,channels:1}};function gaussianBlur(_,_e){if("sigma"in _e){const{sigma:et,size:tt=getSize$1(et),borderType:nt}=_e,rt=getRadius(tt),it=getKernel(rt,et);return separableConvolution(_,it,it,{borderType:nt})}else{const{sigmaX:et,sigmaY:tt,sizeX:nt=getSize$1(et),sizeY:rt=getSize$1(tt),borderType:it}=_e,ot=getRadius(nt),lt=getRadius(rt),st=getKernel(ot,et),at=getKernel(lt,tt);return separableConvolution(_,st,at,{borderType:it})}}function getKernel(_,_e){const et=_*2+1,tt=new Array(et),nt=_e||((et-1)*.5-1)*.3+.8,rt=-.5/(nt*nt);let it=0;for(let ot=0;ot<et;ot++){const lt=ot-_,st=Math.exp(rt*lt*lt);tt[ot]=st,it+=st}for(let ot=0;ot<et;ot++)tt[ot]/=it;return tt}function getSize$1(_){return 2*Math.ceil(2*_)+1}function gradientFilter(_,_e){const{borderType:et="replicate",borderValue:tt=0}=_e;if(checkProcessable(_,{bitDepth:[8,16],colorModel:"GREY"}),"kernelX"in _e&&"kernelY"in _e){const{kernelX:nt,kernelY:rt}=_e,it=_.rawDirectConvolution(nt,{borderType:et,borderValue:tt}),ot=_.rawDirectConvolution(rt,{borderType:et,borderValue:tt});let lt=new Image(_.width,_.height,{colorModel:"GREY"});for(let st=0;st<_.size;st++)lt.setValueByIndex(st,0,Math.hypot(it[st],ot[st]));return lt}else{if("kernelX"in _e)return _.directConvolution(_e.kernelX,{borderType:et,borderValue:tt});if("kernelY"in _e)return _.directConvolution(_e.kernelY,{borderType:et,borderValue:tt});throw new TypeError("kernelX and KernelY are not defined")}}function hypotenuse(_,_e,et={}){let{bitDepth:tt=_.bitDepth,channels:nt=[]}=et;for(let it=0;it<_.components;it++)nt.push(it);if(checkProcessable(_,{bitDepth:[8,16]}),_.width!==_e.width||_.height!==_e.height)throw new RangeError("both images must have the same size");if(_.alpha!==_e.alpha||_.bitDepth!==_e.bitDepth)throw new RangeError("both images must have the same alpha and bitDepth");if(_.channels!==_e.channels)throw new RangeError("both images must have the same number of channels");validateChannels(nt,_);let rt=Image.createFrom(_,{bitDepth:tt});for(const it of nt)for(let ot=0;ot<_.size;ot++){let lt=Math.hypot(_.getValueByIndex(ot,it),_e.getValueByIndex(ot,it));rt.setValueByIndex(ot,it,lt>rt.maxValue?rt.maxValue:lt)}return rt}function invert(_,_e){if(_ instanceof Image){const et=getOutputImage(_,_e);_.alpha&&copyAlpha(_,et);const{maxValue:tt,size:nt}=et;for(let rt=0;rt<nt;rt++)for(let it=0;it<_.components;it++)et.setValueByIndex(rt,it,tt-_.getValueByIndex(rt,it));return et}else{const et=maskToOutputMask(_,_e);for(let tt=0;tt<et.size;tt++)et.setBitByIndex(tt,!_.getBitByIndex(tt));return et}}function level(_,_e={}){let{inputMin:et=0,inputMax:tt=_.maxValue,outputMin:nt=0,outputMax:rt=_.maxValue,gamma:it=1,channels:ot=new Array(_.components).fill(0).map((at,ut)=>ut)}=_e;validateChannels(ot,_),checkProcessable(_,{bitDepth:[8,16]});let lt=getOutputImage(_,_e,{clone:!0});const st=getClamp(_);et=getValueArray(et,_.channels),tt=getValueArray(tt,_.channels),nt=getValueArray(nt,_.channels),rt=getValueArray(rt,_.channels),it=getValueArray(it,_.channels);for(let at=0;at<_.height;at++)for(let ut=0;ut<_.width;ut++)for(let ct of ot){let ht=_.getValue(ut,at,ct),dt=Math.max(Math.min(ht,tt[ct]),et[ct]);const vt=st((dt-et[ct])/(tt[ct]-et[ct])),yt=st(vt**(1/it[ct])*(rt[ct]-nt[ct])+nt[ct]);lt.setValue(ut,at,ct,yt)}return lt}function getValueArray(_,_e){if(Array.isArray(_)){if(_.length===_e)return _;throw new RangeError("array length is not compatible with channel option")}else return new Array(_e).fill(_)}function or(_,_e,et){const tt=maskToOutputMask(_,et);if(_.width!==_e.width||_.height!==_e.height)throw new RangeError("both masks must have the same size");for(let nt=0;nt<tt.size;nt++)_.getBitByIndex(nt)||_e.getBitByIndex(nt)?tt.setBitByIndex(nt,1):tt.setBitByIndex(nt,0);return tt}function flipX(_){checkProcessable(_,{bitDepth:[8,16]});for(let _e=0;_e<_.height;_e++)for(let et=0;et<Math.floor(_.width/2);et++){const tt=et,nt=_.width-et-1;for(let rt=0;rt<_.channels;rt++){const it=_.getValue(tt,_e,rt);_.setValue(tt,_e,rt,_.getValue(nt,_e,rt)),_.setValue(nt,_e,rt,it)}}return _}function flipY(_){checkProcessable(_,{bitDepth:[8,16]});for(let _e=0;_e<Math.floor(_.height/2);_e++)for(let et=0;et<_.width;et++){const tt=_e,nt=_.height-_e-1;for(let rt=0;rt<_.channels;rt++){const it=_.getValue(et,tt,rt);_.setValue(et,tt,rt,_.getValue(et,nt,rt)),_.setValue(et,nt,rt,it)}}return _}function flip(_,_e={}){const{axis:et="horizontal"}=_e;let tt=getOutputImage(_,_e,{clone:!0});return et==="horizontal"?flipX(tt):flipY(et==="vertical"?tt:flipX(tt))}function medianFilter(_,_e){let{cellSize:et=3,borderType:tt="reflect101",borderValue:nt}=_e;if(checkProcessable(_,{bitDepth:[8,16]}),et<1)throw new RangeError("cellSize must be greater than 0");if(et%2===0)throw new RangeError("cellSize must be an odd number");let rt=getBorderInterpolation(tt,nt),it=Image.createFrom(_),ot=et**2,lt=new Uint16Array(ot),st=(et-1)/2;for(let at=0;at<_.channels;at++)for(let ut=0;ut<_.height;ut++)for(let ct=0;ct<_.width;ct++){let ht=0;for(let dt=-st;dt<=st;dt++)for(let vt=-st;vt<=st;vt++)lt[ht++]=rt(ct+vt,ut+dt,at,_);it.setValue(ct,ut,at,xMedian(lt))}return it}function pixelate(_,_e){const{cellSize:et,algorithm:tt="center"}=_e;if(!Number.isInteger(et))throw new TypeError("cellSize must be an integer");if(et<2)throw new RangeError("cellSize must be greater than 1");const nt=getOutputImage(_,_e),rt=getCellValueFunction(tt);for(let it=0;it<_.channels;it++)for(let ot=0;ot<_.width;ot+=et)for(let lt=0;lt<_.height;lt+=et){const st=Math.min(et,_.width-ot),at=Math.min(et,_.height-lt);let ut=rt(_,it,{width:st,height:at,origin:{column:ot,row:lt}});for(let ct=ot;ct<ot+st;ct++)for(let ht=lt;ht<lt+at;ht++)nt.setValue(ct,ht,it,ut)}return nt}function getCellCenter(_,_e,et){const tt={column:Math.floor((et.origin.column+et.origin.column+et.width-1)/2),row:Math.floor((et.origin.row+et.origin.row+et.height-1)/2)};return _.getValue(tt.column,tt.row,_e)}function getCellMean(_,_e,et){let tt=0;for(let nt=et.origin.column;nt<et.origin.column+et.width;nt++)for(let rt=et.origin.row;rt<et.origin.row+et.height;rt++)tt+=_.getValue(nt,rt,_e);return Math.round(tt/(et.width*et.height))}function getCellMedian(_,_e,et){let tt=[];for(let nt=et.origin.column;nt<et.origin.column+et.width;nt++)for(let rt=et.origin.row;rt<et.origin.row+et.height;rt++)tt.push(_.getValue(nt,rt,_e));return xMedian(tt)}function getCellValueFunction(_){switch(_){case"mean":return getCellMean;case"median":return getCellMedian;case"center":return getCellCenter;default:assertUnreachable$1(_);break}}function getInterpolationFunction(_){switch(_){case"nearest":return interpolateNearest;case"bilinear":return interpolateBilinear;case"bicubic":return interpolateBicubic;default:throw new RangeError(`invalid interpolationType: ${_}`)}}function interpolateNearest(_,_e,et,tt,nt){return _e=Math.round(_e),et=Math.round(et),nt(_e,et,tt,_)}function interpolateBilinear(_,_e,et,tt,nt){const rt=Math.floor(_e),it=Math.floor(et),ot=rt+1,lt=it+1;if(ot<_.width&&lt<_.height&&rt>=0&&it>=0){const st=_.getValue(rt,it,tt),at=_.getValue(ot,it,tt),ut=_.getValue(rt,lt,tt),ct=_.getValue(ot,lt,tt),ht=(ot-_e)*st+(_e-rt)*at,dt=(ot-_e)*ut+(_e-rt)*ct;return round((lt-et)*ht+(et-it)*dt)}else{const st=nt(rt,it,tt,_),at=nt(ot,it,tt,_),ut=nt(rt,lt,tt,_),ct=nt(ot,lt,tt,_),ht=(ot-_e)*st+(_e-rt)*at,dt=(ot-_e)*ut+(_e-rt)*ct;return round((lt-et)*ht+(et-it)*dt)}}function interpolateBicubic(_,_e,et,tt,nt,rt){const it=Math.floor(_e),ot=Math.floor(et);if(it===_e&&ot===et)return nt(it,ot,tt,_);const lt=_e-it,st=et-ot,at=nt(it-1,ot-1,tt,_),ut=nt(it,ot-1,tt,_),ct=nt(it+1,ot-1,tt,_),ht=nt(it+2,ot-1,tt,_),dt=cubic(at,ut,ct,ht,lt),vt=nt(it-1,ot,tt,_),yt=nt(it,ot,tt,_),gt=nt(it+1,ot,tt,_),xt=nt(it+2,ot,tt,_),ft=cubic(vt,yt,gt,xt,lt),pt=nt(it-1,ot+1,tt,_),mt=nt(it,ot+1,tt,_),_t=nt(it+1,ot+1,tt,_),St=nt(it+2,ot+1,tt,_),Et=cubic(pt,mt,_t,St,lt),kt=nt(it-1,ot+2,tt,_),wt=nt(it,ot+2,tt,_),bt=nt(it+1,ot+2,tt,_),Mt=nt(it+2,ot+2,tt,_),Rt=cubic(kt,wt,bt,Mt,lt);return round(rt(cubic(dt,ft,Et,Rt,st)))}function cubic(_,_e,et,tt,nt){return _e+.5*nt*(et-_+nt*(2*_-5*_e+4*et-tt+nt*(3*(_e-et)+tt-_)))}function resize$1(_,_e){const{interpolationType:et="bilinear",borderType:tt="constant",borderValue:nt=0}=_e,{width:rt,height:it}=checkOptions(_,_e),ot=Image.createFrom(_,{width:rt,height:it}),lt=getInterpolationFunction(et),st=getBorderInterpolation(tt,nt),at=getClamp(ot),ut=(_.width-1)/(rt-1),ct=(_.height-1)/(it-1);for(let ht=0;ht<ot.height;ht++)for(let dt=0;dt<ot.width;dt++){const vt=dt*ut,yt=ht*ct;for(let gt=0;gt<ot.channels;gt++){const xt=lt(_,vt,yt,gt,st,at);ot.setValue(dt,ht,gt,xt)}}return ot}function checkOptions(_,_e){const{width:et,height:tt,xFactor:nt,yFactor:rt,preserveAspectRatio:it=!0}=_e;if(et===void 0&&tt===void 0&&nt===void 0&&rt===void 0)throw new TypeError("at least one of the width, height, xFactor or yFactor options must be passed");let ot,lt;const st=getSize(et,nt,_.width,it),at=getSize(tt,rt,_.height,it);return st===void 0?(assert$1(at!==void 0),ot=Math.round(at*(_.width/_.height))):ot=st,at===void 0?(assert$1(st!==void 0),lt=Math.round(st*(_.height/_.width))):lt=at,{width:ot,height:lt,xFactor:nt??ot/_.width,yFactor:rt??lt/_.height}}function getSize(_,_e,et,tt){if(_===void 0){if(_e!==void 0)return Math.round(et*_e);if(!tt)return et}else{if(_e!==void 0)throw new TypeError("factor and size cannot be passed together");return _}}function rotate(_,_e){const et=_e%180===0?_.width:_.height,tt=_e%180===0?_.height:_.width,nt=Image.createFrom(_,{width:et,height:tt});if(_e===90||_e===-270)for(let rt=0;rt<_.width;rt++)for(let it=0;it<_.height;it++)for(let ot=0;ot<_.channels;ot++)nt.setValue(nt.width-it-1,rt,ot,_.getValue(rt,it,ot));else if(_e===180||_e===-180)for(let rt=0;rt<_.width;rt++)for(let it=0;it<_.height;it++)for(let ot=0;ot<_.channels;ot++)nt.setValue(nt.width-rt-1,nt.height-it-1,ot,_.getValue(rt,it,ot));else if(_e===270||_e===-90)for(let rt=0;rt<_.width;rt++)for(let it=0;it<_.height;it++)for(let ot=0;ot<_.channels;ot++)nt.setValue(it,nt.height-rt-1,ot,_.getValue(rt,it,ot));else throw new RangeError(`invalid angle: ${_e}`);return nt}function transform(_,_e,et={}){const{borderType:tt="constant",borderValue:nt=0,interpolationType:rt="bilinear",fullImage:it}=et;let{width:ot=_.width,height:lt=_.height}=et;if(it){_e=_e.map(wt=>wt.slice()),_e[0][2]=0,_e[1][2]=0;const ht=[_.getCoordinates("top-left"),_.getCoordinates("top-right"),_.getCoordinates("bottom-right"),_.getCoordinates("bottom-left")];ht[1].column+=1,ht[2].column+=1,ht[2].row+=1,ht[3].row+=1;const dt=ht.map(wt=>[transformPoint(_e[0],wt.column,wt.row),transformPoint(_e[1],wt.column,wt.row)]),vt=dt.map(wt=>wt[0]),yt=dt.map(wt=>wt[1]),gt=Math.max(...vt),xt=Math.max(...yt),ft=Math.min(...vt),pt=Math.min(...yt),mt=[(_.width-1)/2,(_.height-1)/2];ot=gt-ft,lt=xt-pt;const _t=transformPoint(_e[0],mt[0],mt[1]),St=transformPoint(_e[1],mt[0],mt[1]),Et=(ot-1)/2-_t,kt=(lt-1)/2-St;_e[0][2]=Et,_e[1][2]=kt,ot=Math.round(ot),lt=Math.round(lt)}if(_e.length!==2||_e[0].length!==3||_e[1].length!==3)throw new TypeError(`transformation matrix must be 2x3. Received ${_e.length}x${_e[1].length}`);et.inverse||(_e=[_e[0],_e[1],[0,0,1]],_e=inverse(new Matrix(_e)).to2DArray());const st=Image.createFrom(_,{width:ot,height:lt}),at=getBorderInterpolation(tt,nt),ut=getClamp(st),ct=getInterpolationFunction(rt);for(let ht=0;ht<st.height;ht++)for(let dt=0;dt<st.width;dt++){const vt=transformPoint(_e[0],dt,ht),yt=transformPoint(_e[1],dt,ht);for(let gt=0;gt<st.channels;gt++){const xt=ct(_,vt,yt,gt,at,ut);st.setValue(dt,ht,gt,xt)}}return st}function transformPoint(_,_e,et){return _[0]*_e+_[1]*et+_[2]}function transformRotate(_,_e,et={}){const{center:tt="center",scale:nt=1,...rt}=et;let it;typeof tt=="string"?it=_.getCoordinates(tt):it=tt;const ot=getRotationMatrix(_e,it,nt);return transform(_,ot,rt)}function getRotationMatrix(_,_e,et){const tt=_*Math.PI/180,nt=et*Math.cos(tt),rt=et*Math.sin(tt);return[[nt,rt,(1-nt)*_e.column-rt*_e.row],[-rt,nt,rt*_e.column+(1-nt)*_e.row]]}function checkKernel(_){if(_.length%2===0||_[0].length%2===0)throw new TypeError("the number of rows and columns of the kernel must be odd")}function erode(_,_e={}){let et=!1;_e.kernel===void 0&&(et=!0);let{kernel:tt=[[1,1,1],[1,1,1],[1,1,1]],iterations:nt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(tt);let rt=!0;if(!et){e:for(const ot of tt)for(const lt of ot)if(lt!==1){rt=!1;break e}}let it=_;for(let ot=0;ot<nt;ot++)if(it instanceof Mask)if(rt){const lt=it.clone();it=erodeMaskOnlyOnes(it,lt,tt[0].length,tt.length)}else{const lt=Mask.createFrom(_);it=erodeMask(it,lt,tt)}else if(rt){const lt=Image.createFrom(_);it=erodeGreyOnlyOnes(it,lt,tt[0].length,tt.length)}else{const lt=Image.createFrom(_);it=erodeGrey(it,lt,tt)}return it}function erodeGrey(_,_e,et){const tt=et[0].length,nt=et.length;let rt=(tt-1)/2,it=(nt-1)/2;for(let ot=0;ot<_.height;ot++)for(let lt=0;lt<_.width;lt++){let st=_.maxValue;for(let at=0;at<nt;at++)for(let ut=0;ut<tt;ut++){if(et[at][ut]!==1)continue;let ct=ut-rt+lt,ht=at-it+ot;if(ct<0||ht<0||ct>=_.width||ht>=_.height)continue;const dt=_.getValue(ct,ht,0);dt<st&&(st=dt)}_e.setValue(lt,ot,0,st)}return _e}function erodeGreyOnlyOnes(_,_e,et,tt){const nt=(et-1)/2,rt=(tt-1)/2,it=[];for(let ot=0;ot<_.width;ot++)it.push(0);for(let ot=0;ot<_.height;ot++){for(let lt=0;lt<_.width;lt++){let st=_.maxValue;for(let at=Math.max(0,ot-rt);at<Math.min(_.height,ot+rt+1);at++){const ut=_.getValue(lt,at,0);ut<st&&(st=ut)}it[lt]=st}for(let lt=0;lt<_.width;lt++){let st=_.maxValue;for(let at=Math.max(0,lt-nt);at<Math.min(_.width,lt+nt+1);at++)it[at]<st&&(st=it[at]);_e.setValue(lt,ot,0,st)}}return _e}function erodeMask(_,_e,et){const tt=et[0].length,nt=et.length;let rt=(tt-1)/2,it=(nt-1)/2;for(let ot=0;ot<_.height;ot++)for(let lt=0;lt<_.width;lt++){let st=1;for(let at=0;at<nt;at++)for(let ut=0;ut<tt;ut++){if(et[at][ut]!==1)continue;let ct=ut-rt+lt,ht=at-it+ot;if(ht<0||ct<0||ct>=_.width||ht>=_.height)continue;if(_.getBit(ct,ht)===0){st=0;break}}st===1&&_e.setBit(lt,ot,1)}return _e}function erodeMaskOnlyOnes(_,_e,et,tt){const nt=(et-1)/2,rt=(tt-1)/2,it=[];for(let ot=0;ot<_.width;ot++)it.push(0);for(let ot=0;ot<_.height;ot++){for(let lt=0;lt<_.width;lt++){it[lt]=1;for(let st=Math.max(0,ot-rt);st<Math.min(_.height,ot+rt+1);st++)if(_.getBit(lt,st)===0){it[lt]=0;break}}for(let lt=0;lt<_.width;lt++)if(_e.getBit(lt,ot)!==0){for(let st=Math.max(0,lt-nt);st<Math.min(_.width,lt+nt+1);st++)if(it[st]===0){_e.setBit(lt,ot,0);break}}}return _e}function dilate(_,_e={}){let et=!1;_e.kernel===void 0&&(et=!0);let{kernel:tt=[[1,1,1],[1,1,1],[1,1,1]],iterations:nt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(tt);let rt=!0;if(!et){e:for(const ot of tt)for(const lt of ot)if(lt!==1){rt=!1;break e}}let it=_;for(let ot=0;ot<nt;ot++)if(it instanceof Mask)if(rt){const lt=it.clone();it=dilatMaskOnlyOnes(it,lt,tt[0].length,tt.length)}else{const lt=Mask.createFrom(it);it=dilateMask(it,lt,tt)}else if(rt){const lt=Image.createFrom(it);it=dilateGreyOnlyOnes(it,lt,tt[0].length,tt.length)}else{const lt=Image.createFrom(it);it=dilateGrey(it,lt,tt)}return it}function dilateGrey(_,_e,et){const tt=et[0].length,nt=et.length;let rt=(tt-1)/2,it=(nt-1)/2;for(let ot=0;ot<_.height;ot++)for(let lt=0;lt<_.width;lt++){let st=0;for(let at=0;at<nt;at++)for(let ut=0;ut<tt;ut++){if(et[at][ut]!==1)continue;let ct=ut-rt+lt,ht=at-it+ot;if(ct<0||ht<0||ct>=_.width||ht>=_.height)continue;const dt=_.getValue(ct,ht,0);dt>st&&(st=dt)}_e.setValue(lt,ot,0,st)}return _e}function dilateGreyOnlyOnes(_,_e,et,tt){const nt=(et-1)/2,rt=(tt-1)/2,it=[];for(let ot=0;ot<_.width;ot++)it.push(0);for(let ot=0;ot<_.height;ot++){for(let lt=0;lt<_.width;lt++){let st=0;for(let at=Math.max(0,ot-rt);at<Math.min(_.height,ot+rt+1);at++){const ut=_.getValue(lt,at,0);ut>st&&(st=ut)}it[lt]=st}for(let lt=0;lt<_.width;lt++){let st=0;for(let at=Math.max(0,lt-nt);at<Math.min(_.width,lt+nt+1);at++)it[at]>st&&(st=it[at]);_e.setValue(lt,ot,0,st)}}return _e}function dilateMask(_,_e,et){const tt=et[0].length,nt=et.length;let rt=(tt-1)/2,it=(nt-1)/2;for(let ot=0;ot<_.height;ot++)for(let lt=0;lt<_.width;lt++){let st=0;for(let at=0;at<nt;at++)for(let ut=0;ut<tt;ut++){if(et[at][ut]!==1)continue;let ct=ut-rt+lt,ht=at-it+ot;if(ht<0||ct<0||ct>=_.width||ht>=_.height)continue;if(_.getBit(ct,ht)===1){st=1;break}}st===1&&_e.setBit(lt,ot,1)}return _e}function dilatMaskOnlyOnes(_,_e,et,tt){const nt=(et-1)/2,rt=(tt-1)/2,it=[];for(let ot=0;ot<_.width;ot++)it.push(1);for(let ot=0;ot<_.height;ot++){for(let lt=0;lt<_.width;lt++){it[lt]=0;for(let st=Math.max(0,ot-rt);st<Math.min(_.height,ot+rt+1);st++)if(_.getBit(lt,st)===1){it[lt]=1;break}}for(let lt=0;lt<_.width;lt++)if(_e.getBit(lt,ot)!==1){for(let st=Math.max(0,lt-nt);st<Math.min(_.width,lt+nt+1);st++)if(it[st]===1){_e.setBit(lt,ot,1);break}}}return _e}function open(_,_e={}){let{kernel:et=[[1,1,1],[1,1,1],[1,1,1]],iterations:tt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(et);let nt=_;for(let rt=0;rt<tt;rt++)nt=nt.erode({kernel:et}),nt=nt.dilate({kernel:et});return nt}function close(_,_e={}){let{kernel:et=[[1,1,1],[1,1,1],[1,1,1]],iterations:tt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(et);let nt=_;for(let rt=0;rt<tt;rt++)nt=nt.dilate({kernel:et}).erode({kernel:et});return nt}function topHat(_,_e={}){let{kernel:et=[[1,1,1],[1,1,1],[1,1,1]],iterations:tt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(et);let nt=_;for(let rt=0;rt<tt;rt++){let it=nt.open({kernel:et});nt=subtract(it,nt,{absolute:!0})}return nt}function bottomHat(_,_e={}){let{kernel:et=[[1,1,1],[1,1,1],[1,1,1]],iterations:tt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(et);let nt=_;for(let rt=0;rt<tt;rt++){let it=nt.close({kernel:et});nt=subtract(it,nt,{absolute:!0})}return nt}function morphologicalGradient(_,_e={}){let{kernel:et=[[1,1,1],[1,1,1],[1,1,1]],iterations:tt=1}=_e;_ instanceof Image&&checkProcessable(_,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(et);let nt=_;for(let rt=0;rt<tt;rt++){let it=nt.dilate({kernel:et}),ot=nt.erode({kernel:et});nt=subtract(it,ot,{absolute:!0})}return nt}function*borderIterator(_){for(let _e=0;_e<_.width;_e++)yield _e;for(let _e=2;_e<_.height;_e++)yield _e*_.width-1;for(let _e=0;_e<_.width;_e++)yield _.width*_.height-_e-1;for(let _e=_.height-2;_e>=1;_e--)yield _e*_.width}const MAX_ARRAY=65536,toProcess=new Uint32Array(MAX_ARRAY);function multipleFloodFill(_,_e={}){let{startPixels:et=[0],startPixelValue:tt=0,newPixelValue:nt=1,allowCorners:rt=!1}=_e,it=maskToOutputMask(_,_e,{clone:!0}),ot=Mask.createFrom(_),lt=0,st=0;for(let ut of et)it.getBitByIndex(ut)===tt&&(toProcess[st++%MAX_ARRAY]=ut,ot.setBitByIndex(ut,1),it.setBitByIndex(ut,nt));for(;lt<st;){assert$1(st-lt<=MAX_ARRAY);const ut=toProcess[lt++%MAX_ARRAY];it.setBitByIndex(ut,nt);const ct=ut<_.width,ht=ut%_.width===0,dt=ut%_.width===_.width-1,vt=ut>_.size-_.width;if(!vt){const yt=ut+_.width;at(yt)}if(!ht){const yt=ut-1;at(yt)}if(!ct){const yt=ut-_.width;at(yt)}if(!dt){const yt=ut+1;at(yt)}if(rt){if(!ct){if(!ht){const yt=ut-_.width-1;at(yt)}if(!dt){const yt=ut-_.width+1;at(yt)}}if(!vt){if(!ht){const yt=ut+_.width-1;at(yt)}if(!dt){const yt=ut+_.width+1;at(yt)}}}}function at(ut){ot.getBitByIndex(ut)||it.getBitByIndex(ut)===tt&&(toProcess[st++%MAX_ARRAY]=ut,ot.setBitByIndex(ut,1))}return it}function clearBorder(_,_e={}){let{allowCorners:et=!1,out:tt,color:nt="white"}=_e;return multipleFloodFill(_,{startPixels:borderIterator(_),startPixelValue:nt==="white"?1:0,newPixelValue:nt==="white"?0:1,allowCorners:et,out:tt})}const kernelX=[[-1,0,1],[-2,0,2],[-1,0,1]],kernelY=[[-1,-2,-1],[0,0,0],[1,2,1]];function cannyEdgeDetector(_,_e={}){const{hysteresis:et=!0,lowThreshold:tt=.04,highThreshold:nt=.1,gaussianBlurOptions:rt={sigma:1}}=_e,it=tt*_.maxValue,ot=nt*_.maxValue;checkProcessable(_,{colorModel:"GREY"});const lt=_.width,st=_.height,at=_.gaussianBlur(rt),ut=at.rawDirectConvolution(kernelY),ct=at.rawDirectConvolution(kernelX);let ht=new Float64Array(_.size);for(let gt=0;gt<_.size;gt++)ht[gt]=Math.hypot(ut[gt],ct[gt]);let dt=new Float64Array(_.size),vt=new Float64Array(_.size);const yt=imageToOutputMask(_,_e);for(let gt=1;gt<lt-1;gt++)for(let xt=1;xt<st-1;xt++){const ft=ut[getIndex(gt,xt,_,0)],pt=ct[getIndex(gt,xt,_,0)];let mt=getDirection(ft,pt);const _t=ht[getIndex(gt,xt,_,0)];(mt===0&&_t>=ht[getIndex(gt,xt-1,_,0)]&&_t>=ht[getIndex(gt,xt+1,_,0)]||mt===1&&_t>=ht[getIndex(gt-1,xt-1,_,0)]&&_t>=ht[getIndex(gt+1,xt+1,_,0)]||mt===2&&_t>=ht[getIndex(gt-1,xt,_,0)]&&_t>=ht[getIndex(gt+1,xt,_,0)]||mt===3&&_t>=ht[getIndex(gt-1,xt+1,_,0)]&&_t>=ht[getIndex(gt+1,xt-1,_,0)])&&(dt[getIndex(gt,xt,_,0)]=_t)}for(let gt=0;gt<lt*st;++gt){let xt=dt[gt],ft=0;xt>ot&&(ft++,yt.setBitByIndex(gt,1)),xt>it&&ft++,vt[gt]=ft}if(et){let gt=[];for(let xt=1;xt<lt-1;++xt)for(let ft=1;ft<st-1;++ft)if(vt[getIndex(xt,ft,_,0)]===1){e:for(let pt=xt-1;pt<xt+2;++pt)for(let mt=ft-1;mt<ft+2;++mt)if(vt[getIndex(pt,mt,_,0)]===2){gt.push([xt,ft]),yt.setValue(xt,ft,0,1);break e}}for(;gt.length>0;){let xt=[];for(let ft of gt)for(let pt=-1;pt<2;++pt)for(let mt=-1;mt<2;++mt){if(pt===0&&mt===0)continue;let _t=ft[0]+pt,St=ft[1]+mt;vt[getIndex(St,_t,_,0)]===1&&yt.getValue(St,_t,0)===0&&(xt.push([_t,St]),yt.setValue(St,_t,0,1))}gt=xt}}return yt}function getDirection(_,_e){return(Math.round(Math.atan2(_e,_)*(4/Math.PI))+4)%4}function floodFill(_,_e={}){let{origin:et={row:0,column:0},allowCorners:tt=!1,out:nt}=_e;const rt=getIndex(et.column,et.row,_);return multipleFloodFill(_,{startPixels:[rt],allowCorners:tt,out:nt})}function solidFill(_,_e={}){let{allowCorners:et=!1}=_e,tt=maskToOutputMask(_,_e,{clone:!0}),rt=_.invert().clearBorder({allowCorners:et});return tt.or(rt,{out:tt})}function convertColor(_,_e,et={}){const tt=new Map([["GREY",["GREYA","RGB","RGBA"]],["GREYA",["GREY","RGB","RGBA"]],["RGB",["GREY","GREYA","RGBA"]],["RGBA",["GREY","GREYA","RGB"]],["BINARY",["GREY","RGB","RGBA"]]]);if(_.colorModel===_e)throw new TypeError(`cannot convert color, image is already ${_e}`);const nt=tt.get(_.colorModel);if(!(nt!=null&&nt.includes(_e)))throw new RangeError(`conversion from ${_.colorModel} to ${_e} not implemented`);if(_ instanceof Image){const rt=getOutputImage(_,et,{newParameters:{colorModel:_e}});return(_.colorModel==="GREY"||_.colorModel==="GREYA")&&convertGreyToAny(_,rt),(_.colorModel==="RGB"||_.colorModel==="RGBA")&&(_e==="RGB"||_e==="RGBA"?convertRgbToRgb(_,rt):convertRgbToGrey(_,rt)),!_.alpha&&rt.alpha&&rt.fillAlpha(rt.maxValue),_.alpha&&rt.alpha&&copyAlpha(_,rt),rt}else if(_e==="GREY"){const rt=maskToOutputImage(_,et);return convertBinaryToGrey(_,rt),rt}else{const rt=new Image(_.width,_.height,{colorModel:_e});return convertBinaryToRgb(_,rt),rt}}function copyAlpha(_,_e){if(_.size!==_e.size)throw new RangeError("source and destination have different sizes");if(!_.alpha)throw new RangeError("source image does not have alpha");if(!_e.alpha)throw new RangeError("destination does not have alpha");for(let et=0;et<_e.size;et++)_e.setValueByIndex(et,_e.channels-1,_.getValueByIndex(et,_.channels-1))}function convertGreyToAny(_,_e){for(let et=0;et<_.size;et++)for(let tt=0;tt<_e.components;tt++)_e.setValueByIndex(et,tt,_.getValueByIndex(et,0))}function convertRgbToRgb(_,_e){for(let et=0;et<_.size;et++)for(let tt=0;tt<3;tt++)_e.setValueByIndex(et,tt,_.getValueByIndex(et,tt))}function convertRgbToGrey(_,_e){for(let et=0;et<_.size;et++){const tt=_.getValueByIndex(et,0),nt=_.getValueByIndex(et,1),rt=_.getValueByIndex(et,2);_e.setValueByIndex(et,0,Math.round(.299*tt+.587*nt+.114*rt))}}function convertBinaryToGrey(_,_e){for(let et=0;et<_.size;et++)_e.setValueByIndex(et,0,_.getBitByIndex(et)?_e.maxValue:0)}function convertBinaryToRgb(_,_e){const et=new Array(_e.components).fill(0),tt=new Array(_e.components).fill(_e.maxValue);_e.alpha&&(et.push(_e.maxValue),tt.push(_e.maxValue));for(let nt=0;nt<_.size;nt++)_e.setPixelByIndex(nt,_.getBitByIndex(nt)?tt:et)}function convertBitDepth(_,_e){if(_.bitDepth===_e)throw new RangeError("cannot convert image to same bitDepth");return _e===16?convertToUint16(_):convertToUint8(_)}function convertToUint16(_){const _e=new Image(_.width,_.height,{bitDepth:16,colorModel:_.colorModel,origin:_.origin});for(let et=0;et<_.size;et++)for(let tt=0;tt<_e.channels;tt++)_e.setValueByIndex(et,tt,_.getValueByIndex(et,tt)<<8);return _e}function convertToUint8(_){const _e=new Image(_.width,_.height,{bitDepth:8,colorModel:_.colorModel,origin:_.origin});for(let et=0;et<_.size;et++)for(let tt=0;tt<_e.channels;tt++)_e.setValueByIndex(et,tt,_.getValueByIndex(et,tt)>>8);return _e}function checkPointIsInteger(_,_e="Point"){if(!Number.isInteger(_.row)||!Number.isInteger(_.column))throw new TypeError(`${_e} row and column must be integers`)}function extract(_,_e,et={}){const{origin:tt={row:0,column:0}}=et,{row:nt,column:rt}=tt;assert$1(nt<_.height&&rt<_.width&&nt+_e.width>0&&rt+_e.height>0,"extract: image and mask have no overlap"),checkPointIsInteger(tt,"Origin");const it=Math.min(_.width,_e.width+rt)-Math.max(0,rt),ot=Math.min(_.height,_e.height+nt)-Math.max(0,nt);let lt=new Image(it,ot,{colorModel:_.colorModel,origin:tt});lt.alpha&&(lt=lt.fillAlpha(0));const st=Math.max(0,nt),at=Math.max(0,rt),ut=nt<0?-nt:0,ct=rt<0?-rt:0;for(let ht=0;ht<ot;ht++)for(let dt=0;dt<it;dt++)_e.getBit(ct+dt,ut+ht)&&lt.setPixel(dt,ht,_.getPixel(at+dt,st+ht));return lt}function split(_){const _e=[];for(let et=0;et<_.channels;et++){const tt=Image.createFrom(_,{colorModel:"GREY"});for(let nt=0;nt<tt.size;nt++)tt.setValueByIndex(nt,0,_.getValueByIndex(nt,et));_e.push(tt)}return _e}function huang(_){let _e=0;for(let at=0;at<_.length;at++)if(_[at]!==0){_e=at;break}let et=_.length-1;for(let at=_.length-1;at>=_e;at--)if(_[at]!==0){et=at;break}const tt=1/(et-_e),nt=new Array(_.length);let rt=0,it=0;for(let at=_e;at<_.length;at++)rt+=at*_[at],it+=_[at],nt[at]=rt/it;const ot=new Array(_.length);rt=0,it=0;for(let at=et;at>0;at--)rt+=at*_[at],it+=_[at],ot[at-1]=rt/it;let lt=-1,st=Number.MAX_VALUE;for(let at=0;at<_.length;at++){let ut=0,ct;for(let ht=0;ht<=at;ht++)ct=1/(1+tt*Math.abs(ht-nt[at])),ct<1e-6||ct>.999999||(ut+=_[ht]*(-ct*Math.log(ct)-(1-ct)*Math.log(1-ct)));for(let ht=at+1;ht<_.length;ht++)ct=1/(1+tt*Math.abs(ht-ot[at])),ct<1e-6||ct>.999999||(ut+=_[ht]*(-ct*Math.log(ct)-(1-ct)*Math.log(1-ct)));ut<st&&(st=ut,lt=at)}return lt}function intermodes(_){const _e=_.slice();let et=0;for(;!bimodalTest$1(_e);){let nt=0,rt=0,it=_e[0];for(let ot=0;ot<_.length-1;ot++)nt=rt,rt=it,it=_e[ot+1],_e[ot]=(nt+rt+it)/3;_e[_.length-1]=(rt+it)/3,et++,assert$1(et<1e3,"Intermodes threshold not found after 1000 iterations")}let tt=0;for(let nt=1;nt<_.length-1;nt++)_e[nt-1]<_e[nt]&&_e[nt+1]<_e[nt]&&(tt+=nt);return Math.floor(tt/2)}function bimodalTest$1(_){let _e=!1,et=0;for(let tt=1;tt<_.length-1;tt++)if(_[tt-1]<_[tt]&&_[tt+1]<_[tt]&&(et++,et>2))return!1;return et===2&&(_e=!0),_e}function isodata(_){let _e,et,tt,nt,rt=0;for(let it=1;it<_.length;it++)if(_[it]>0){rt=it+1;break}for(;;){_e=0,tt=0;for(let it=0;it<rt;it++)tt=tt+_[it],_e=_e+_[it]*it;nt=0,et=0;for(let it=rt+1;it<_.length;it++)et+=_[it],nt+=_[it]*it;if(tt>0&&et>0&&(_e/=tt,nt/=et,rt===Math.round((_e+nt)/2)))break;rt++,assert$1(rt<=_.length-2,"Threshold not found")}return rt}function li(_,_e){let et,tt,nt,rt,it,ot,lt,st,at,ut,ht;ut=0;for(let dt=0;dt<_.length;dt++)ut+=dt*_[dt];ut/=_e,lt=ut;do{ot=lt,et=ot+.5|0,tt=0,rt=0;for(let dt=0;dt<=et;dt++)tt+=dt*_[dt],rt+=_[dt];st=rt===0?0:tt/rt,nt=0,it=0;for(let dt=et+1;dt<_.length;dt++)nt+=dt*_[dt],it+=_[dt];at=it===0?0:nt/it,ht=(st-at)/(Math.log(st)-Math.log(at)),ht<-Number.EPSILON?lt=ht-.5|0:lt=ht+.5|0}while(Math.abs(lt-ot)>.5);return et}function maxEntropy(_,_e){const et=new Array(_.length);for(let ct=0;ct<_.length;ct++)et[ct]=_[ct]/_e;const tt=new Array(_.length),nt=new Array(_.length);tt[0]=et[0],nt[0]=1-tt[0];for(let ct=1;ct<_.length;ct++)tt[ct]=tt[ct-1]+et[ct],nt[ct]=1-tt[ct];let rt=0;for(let ct=0;ct<_.length;ct++)if(Math.abs(tt[ct])>=Number.EPSILON){rt=ct;break}let it=_.length-1;for(let ct=_.length-1;ct>=rt;ct--)if(Math.abs(nt[ct])>=Number.EPSILON){it=ct;break}let ot=-1,lt,st=Number.MIN_VALUE,at,ut;for(let ct=rt;ct<=it;ct++){at=0;for(let ht=0;ht<=ct;ht++)_[ht]!==0&&(at-=et[ht]/tt[ct]*Math.log(et[ht]/tt[ct]));ut=0;for(let ht=ct+1;ht<_.length;ht++)_[ht]!==0&&(ut-=et[ht]/nt[ct]*Math.log(et[ht]/nt[ct]));lt=at+ut,st<lt&&(st=lt,ot=ct)}return ot}function mean$1(_,_e){let et=0;for(let tt=0;tt<_.length;tt++)et+=tt*_[tt];return Math.floor(et/_e)}function minError(_,_e){let et,tt=-2,nt,rt,it,ot,lt,st,at,ut,ct,ht,dt,vt=0;for(let yt=0;yt<_.length;yt++)vt+=yt*_[yt];for(vt/=_e,et=vt;et!==tt;){const yt=sumA(_,et),gt=sumA(_,_.length-1),xt=sumB(_,et),ft=sumB(_,_.length-1),pt=sumC(_,et),mt=sumC(_,_.length-1);if(nt=xt/yt,rt=(ft-xt)/(gt-yt),it=yt/gt,ot=(gt-yt)/gt,lt=pt/yt-nt*nt,st=(mt-pt)/(gt-yt)-rt*rt,at=1/lt-1/st,ut=nt/lt-rt/st,ct=nt*nt/lt-rt*rt/st+Math.log10(lt*(ot*ot)/(st*(it*it))),ht=ut*ut-at*ct,ht<0)return et;tt=et,dt=(ut+Math.sqrt(ht))/at,Number.isNaN(dt)?et=tt:et=Math.floor(dt)}return et}function sumA(_,_e){let et=0;for(let tt=0;tt<=_e;tt++)et+=_[tt];return et}function sumB(_,_e){let et=0;for(let tt=0;tt<=_e;tt++)et+=tt*_[tt];return et}function sumC(_,_e){let et=0;for(let tt=0;tt<=_e;tt++)et+=tt*tt*_[tt];return et}function minimum(_){if(_.length<2)return 0;let _e=0,et=-1,tt=-1,nt=new Array(_.length);for(let rt=0;rt<_.length;rt++)nt[rt]=_[rt],_[rt]>0&&(tt=rt);for(;!bimodalTest(nt);)if(nt=smoothed(nt),_e++,_e>1e4)return et;for(let rt=1;rt<tt;rt++)if(nt[rt-1]>nt[rt]&&nt[rt+1]>=nt[rt]){et=rt;break}return et}function smoothed(_){const _e=new Array(_.length);for(let et=1;et<_.length-1;et++)_e[et]=(_[et-1]+_[et]+_[et+1])/3;return _e[0]=(_[0]+_[1])/3,_e[_.length-1]=(_.at(-2)+_.at(-1))/3,_e}function bimodalTest(_){const _e=_.length;let et=!1,tt=0;for(let nt=1;nt<_e-1;nt++)if(_[nt-1]<_[nt]&&_[nt+1]<_[nt]&&(tt++,tt>2))return!1;return tt===2&&(et=!0),et}function moments(_,_e){let tt=0,nt=0,rt=0,it=0,ot=-1;const lt=_.length,st=new Array(lt);for(let yt=0;yt<lt;yt++)st[yt]=_[yt]/_e;for(let yt=0;yt<lt;yt++)tt+=yt*st[yt],nt+=yt*yt*st[yt],rt+=yt*yt*yt*st[yt];const at=1*nt-tt*tt,ut=(-nt*nt+tt*rt)/at,ct=(1*-rt+nt*tt)/at,ht=.5*(-ct-Math.sqrt(ct*ct-4*ut)),dt=.5*(-ct+Math.sqrt(ct*ct-4*ut)),vt=(dt-tt)/(dt-ht);for(let yt=0;yt<lt;yt++)if(it+=st[yt],it>vt){ot=yt;break}return ot}function otsu(_,_e){let et=0,tt=0,nt=0,rt=0,it=0;for(let ot=0;ot<_.length;ot++)it+=ot*_[ot];for(let ot=0;ot<_.length;ot++){tt=tt+_[ot];const lt=_e-tt;if(tt===0||lt===0)continue;et=et+ot*_[ot];const st=(it-et)/lt,at=tt*lt*(et/tt-st)*(et/tt-st);at>=nt&&(rt=ot,nt=at)}return rt}function percentile(_){let _e=-1;const et=.5,tt=new Array(_.length),nt=partialSum(_,_.length-1);let rt=1;for(let it=0;it<_.length;it++)tt[it]=Math.abs(partialSum(_,it)/nt-et),tt[it]<rt&&(rt=tt[it],_e=it);return _e}function partialSum(_,_e){let et=0;for(let tt=0;tt<=_e;tt++)et+=_[tt];return et}function renyiEntropy(_,_e){let et,tt;const nt=new Array(_.length),rt=new Array(_.length),it=new Array(_.length);let ot=0,lt=0,st=0,at=0,ut=0,ct=0;const dt=1/(1-.5),yt=1/(1-2);for(let mt=0;mt<_.length;mt++)nt[mt]=_[mt]/_e;rt[0]=nt[0],it[0]=1-rt[0];for(let mt=1;mt<_.length;mt++)rt[mt]=rt[mt-1]+nt[mt],it[mt]=1-rt[mt];et=0;for(let mt=0;mt<_.length;mt++)if(Math.abs(rt[mt])>=Number.EPSILON){et=mt;break}tt=_.length-1;for(let mt=_.length-1;mt>=et;mt--)if(Math.abs(it[mt])>=Number.EPSILON){tt=mt;break}for(let mt=et;mt<=tt;mt++){let _t=0,St=0,Et=0;for(let $t=0;$t<=mt;$t++)_[$t]!==0&&(_t-=nt[$t]/rt[mt]*Math.log(nt[$t]/rt[mt])),St+=Math.sqrt(nt[$t]/rt[mt]),Et+=nt[$t]*nt[$t]/(rt[mt]*rt[mt]);let kt=0,wt=0,bt=0;for(let $t=mt+1;$t<_.length;$t++)_[$t]!==0&&(kt-=nt[$t]/it[mt]*Math.log(nt[$t]/it[mt])),wt+=Math.sqrt(nt[$t]/it[mt]),bt+=nt[$t]*nt[$t]/(it[mt]*it[mt]);const Mt=_t+kt,Rt=dt*(St*wt>0?Math.log(St*wt):0),It=yt*(Et*bt>0?Math.log(Et*bt):0);Mt>at&&(at=Mt,ot=mt),Rt>ut&&(ut=Rt,lt=mt),It>ct&&(ct=It,st=mt)}const gt=new Uint32Array([ot,lt,st]);gt.sort();let xt;Math.abs(gt[0]-gt[1])<=5?Math.abs(gt[1]-gt[2])<=5?xt=[1,2,1]:xt=[0,1,3]:Math.abs(gt[1]-gt[2])<=5?xt=[3,1,0]:xt=[1,2,1];const ft=rt[gt[2]]-rt[gt[0]];return Math.round(gt[0]*(rt[gt[0]]+.25*ft*xt[0])+.25*gt[1]*ft*xt[1]+gt[2]*(it[gt[2]]+.25*ft*xt[2]))}function shanbhag(_,_e){const et=new Array(_.length);for(let ht=0;ht<_.length;ht++)et[ht]=_[ht]/_e;const tt=new Array(_.length),nt=new Array(_.length);tt[0]=et[0],nt[0]=1-tt[0];for(let ht=1;ht<_.length;ht++)tt[ht]=tt[ht-1]+et[ht],nt[ht]=1-tt[ht];let rt=0;for(let ht=0;ht<_.length;ht++)if(Math.abs(tt[ht])>=Number.EPSILON){rt=ht;break}let it=_.length-1;for(let ht=_.length-1;ht>=rt;ht--)if(Math.abs(nt[ht])>=Number.EPSILON){it=ht;break}let ot=-1,lt=Number.MAX_VALUE,st,at,ut,ct;for(let ht=rt;ht<=it;ht++){ut=0,st=.5/tt[ht];for(let dt=1;dt<=ht;dt++)ut-=et[dt]*Math.log(1-st*tt[dt-1]);ut*=st,ct=0,st=.5/nt[ht];for(let dt=ht+1;dt<_.length;dt++)ct-=et[dt]*Math.log(1-st*nt[dt]);ct*=st,at=Math.abs(ut-ct),at<lt&&(lt=at,ot=ht)}return ot}function triangle(_){let _e=0,et=0,tt=0,nt=0;for(let ut=0;ut<_.length;ut++)if(_[ut]>0){_e=ut;break}_e>0&&_e--;for(let ut=_.length-1;ut>0;ut--)if(_[ut]>0){nt=ut;break}nt<_.length-1&&nt++;for(let ut=0;ut<_.length;ut++)_[ut]>et&&(tt=ut,et=_[ut]);let rt=!1;if(tt-_e<nt-tt){rt=!0;let ut=0,ct=_.length-1;for(;ut<ct;){const ht=_[ut];_[ut]=_[ct],_[ct]=ht,ut++,ct--}_e=_.length-1-nt,tt=_.length-1-tt}if(_e===tt)return _e;let it,ot,lt;it=_[tt],ot=_e-tt,lt=Math.sqrt(it*it+ot*ot),it/=lt,ot/=lt,lt=it*_e+ot*_[_e];let st=_e,at=0;for(let ut=_e+1;ut<=tt;ut++){const ct=it*ut+ot*_[ut]-lt;ct>at&&(st=ut,at=ct)}if(st--,rt){let ut=0,ct=_.length-1;for(;ut<ct;){const ht=_[ut];_[ut]=_[ct],_[ct]=ht,ut++,ct--}return _.length-1-st}else return st}function yen(_,_e){const et=new Array(_.length);for(let st=0;st<_.length;st++)et[st]=_[st]/_e;const tt=new Array(_.length);tt[0]=et[0];for(let st=1;st<_.length;st++)tt[st]=tt[st-1]+et[st];const nt=new Array(_.length);nt[0]=et[0]*et[0];for(let st=1;st<_.length;st++)nt[st]=nt[st-1]+et[st]*et[st];const rt=new Array(_.length);rt[_.length-1]=0;for(let st=_.length-2;st>=0;st--)rt[st]=rt[st+1]+et[st+1]*et[st+1];let it=-1,ot=Number.MIN_VALUE,lt;for(let st=0;st<_.length;st++)lt=-1*(nt[st]*rt[st]>0?Math.log(nt[st]*rt[st]):0)+2*(tt[st]*(1-tt[st])>0?Math.log(tt[st]*(1-tt[st])):0),lt>ot&&(ot=lt,it=st);return it}function computeThreshold(_,_e="otsu"){if(_.channels!==1)throw new TypeError("threshold can only be computed on images with one channel");const et=_.histogram();switch(_e){case"huang":return huang(et);case"intermodes":return intermodes(et);case"isodata":return isodata(et);case"li":return li(et,_.size);case"maxEntropy":return maxEntropy(et,_.size);case"mean":return mean$1(et,_.size);case"minimum":return minimum(et);case"minError":return minError(et,_.size);case"moments":return moments(et,_.size);case"otsu":return otsu(et,_.size);case"percentile":return percentile(et);case"renyiEntropy":return renyiEntropy(et,_.size);case"shanbhag":return shanbhag(et,_.size);case"triangle":return triangle(et);case"yen":return yen(et,_.size);default:throw new RangeError(`invalid threshold algorithm: ${_e}`)}}function threshold(_,_e={}){let et;if("threshold"in _e){const nt=_e.threshold;if(nt<0||nt>1)throw new RangeError("threshold must be a value between 0 and 1");et=nt*_.maxValue}else et=computeThreshold(_,_e.algorithm);const tt=imageToOutputMask(_,_e);for(let nt=0;nt<_.size;nt++)tt.setBitByIndex(nt,_.getValueByIndex(nt,0)>et?1:0);return tt}function luma709(_,_e,et){return _*6966+_e*23436+et*2366>>15}function luma601(_,_e,et){return _*9798+_e*19235+et*3735>>15}function max(_,_e,et){return Math.max(_,_e,et)}function min(_,_e,et){return Math.min(_,_e,et)}function average(_,_e,et){return(_+_e+et)/3>>0}function minmax(_,_e,et){return(Math.max(_,_e,et)+Math.min(_,_e,et))/2}function red(_){return _}function green(_,_e){return _e}function blue(_,_e,et){return et}function black(_,_e,et,tt){return Math.min(tt.maxValue-_,tt.maxValue-_e,tt.maxValue-et)}function cyan(_,_e,et,tt){let nt=black(_,_e,et,tt);return(tt.maxValue-_-nt)/(1-nt/tt.maxValue)>>0}function magenta(_,_e,et,tt){let nt=black(_,_e,et,tt);return(tt.maxValue-_e-nt)/(1-nt/tt.maxValue)>>0}function yellow(_,_e,et,tt){let nt=black(_,_e,et,tt);return(tt.maxValue-et-nt)/(1-nt/tt.maxValue)>>0}function hue(_,_e,et,tt){const nt=min(_,_e,et),rt=max(_,_e,et);if(rt===nt)return 0;let it=0;const ot=rt-nt;return rt===_?it=(_e-et)/ot+(_e<et?6:0):rt===_e?it=(et-_)/ot+2:(assert$1(rt===et),it=(_-_e)/ot+4),it/6*tt.maxValue>>0}function saturation(_,_e,et,tt){let nt=min(_,_e,et),rt=max(_,_e,et),it=rt-nt;return rt===0?0:it/rt*tt.maxValue}function lightness(_,_e,et){let tt=min(_,_e,et);return(max(_,_e,et)+tt)/2}const greyAlgorithms=Object.freeze(Object.defineProperty({__proto__:null,average,black,blue,cyan,green,hue,lightness,luma601,luma709,magenta,max,min,minmax,red,saturation,yellow},Symbol.toStringTag,{value:"Module"})),GreyAlgorithm={LUMA_709:"luma709",LUMA_601:"luma601",MAX:"max",MIN:"min",AVERAGE:"average",MINMAX:"minmax",RED:"red",GREEN:"green",BLUE:"blue",BLACK:"black",CYAN:"cyan",MAGENTA:"magenta",YELLOW:"yellow",HUE:"hue",SATURATION:"saturation",LIGHTNESS:"lightness"};{const _=new Set(Object.values(GreyAlgorithm));for(const _e of Object.keys(greyAlgorithms))assert$1(_.has(_e),`Grey algorithm ${_e} is missing in the GreyAlgorithm enum`)}function grey(_,_e={}){let{algorithm:et="luma709",keepAlpha:tt=!1,mergeAlpha:nt=!0}=_e;checkProcessable(_,{colorModel:["RGB","RGBA"]}),tt=tt&&_.alpha,nt=nt&&_.alpha,tt&&(nt=!1);let it=getOutputImage(_,_e,{newParameters:{colorModel:tt?"GREYA":"GREY"}}),ot;typeof et=="function"?ot=et:ot=greyAlgorithms[et];let lt=getClamp(it);for(let st=0;st<_.size;st++){const at=_.getValueByIndex(st,0),ut=_.getValueByIndex(st,1),ct=_.getValueByIndex(st,2);let ht;if(nt){const dt=_.getValueByIndex(st,3);ht=lt(ot(at,ut,ct,_)*dt/_.maxValue)}else if(ht=lt(ot(at,ut,ct,_)),tt){const dt=_.getValueByIndex(st,3);it.setValueByIndex(st,1,dt)}it.setValueByIndex(st,0,ht)}return it}function setBlendedPixel(_,_e,et,tt={}){const{color:nt=getDefaultColor(_)}=tt;if(!_.alpha)_.setPixel(_e,et,nt);else{assert$1(_ instanceof Image);const rt=nt.at(-1);if(rt===_.maxValue){_.setPixel(_e,et,nt);return}const it=_.getValue(_e,et,_.channels-1);let ot=rt+it*(1-rt/_.maxValue);_.setValue(_e,et,_.channels-1,ot);for(let lt=0;lt<_.components;lt++){let st=nt[lt],at=_.getValue(_e,et,lt),ut=(st*rt+at*it*(1-rt/_.maxValue))/ot;_.setValue(_e,et,lt,ut)}}}function copyTo(_,_e,et={}){const{origin:tt={column:0,row:0}}=et,{column:nt,row:rt}=tt;if(_.colorModel!==_e.colorModel)throw new RangeError("source and target must have the same color model");checkPointIsInteger(tt,"Origin");let it;_e instanceof Image?it=getOutputImage(_e,et,{clone:!0}):it=maskToOutputMask(_e,et,{clone:!0});for(let ot=Math.max(rt,0);ot<Math.min(_.height+rt,_e.height);ot++)for(let lt=Math.max(nt,0);lt<Math.min(_.width+nt,_e.width);lt++){let st=_.getPixel(lt-nt,ot-rt);setBlendedPixel(it,lt,ot,{color:st})}return it}function crop(_,_e={}){const{origin:et={row:0,column:0},width:tt=_.width-et.column,height:nt=_.height-et.row}=_e,{column:rt,row:it}=et;if(checkProcessable(_,{bitDepth:[8,16]}),checkPointIsInteger(et,"Origin"),!Number.isInteger(tt)||!Number.isInteger(nt))throw new RangeError(`Width and height (width:${tt}; height:${nt}) must be integers`);if(it>_.height-1||rt>_.width-1)throw new RangeError(`Origin (row:${it}, column:${rt}) out of range (${_.width-1}; ${_.height-1})`);if(tt<=0||nt<=0)throw new RangeError(`Width and height (width:${tt}; height:${nt}) must be positive numbers`);if(it<0||rt<0)throw new RangeError(`Row and column (row:${it}, column:${rt}) must be positive numbers`);if(tt>_.width-rt||nt>_.height-it)throw new RangeError(`Size is out of range (row:${it}, column:${rt}, width:${tt}, height:${nt})`);const ot=Image.createFrom(_,{width:tt,height:nt});for(let lt=0;lt<nt;lt++)for(let st=0;st<tt;st++)ot.setPixel(st,lt,_.getPixel(rt+st,it+lt));return ot}function paintMaskOnImage(_,_e,et={}){const{origin:tt={row:0,column:0},color:nt=getDefaultColor(_),blend:rt=!0}=et,{column:it,row:ot}=tt;if(nt.length!==_.channels)throw new RangeError("the given color is not compatible with the image");checkPointIsInteger(tt,"Origin");const lt=getOutputImage(_,et,{clone:!0});if(rt){checkColorIsNumberArray(nt);for(let st=Math.max(ot,0);st<Math.min(_e.height+ot,_.height);st++)for(let at=Math.max(it,0);at<Math.min(_e.width+it,_.width);at++)_e.getBit(at-it,st-ot)&&setBlendedPixel(lt,at,st,{color:nt})}else for(let st=Math.max(ot,0);st<Math.min(_e.height+ot,_.height);st++)for(let at=Math.max(it,0);at<Math.min(_e.width+it,_.width);at++)if(_e.getBit(at-it,st-ot))for(let ut=0;ut<_.channels;ut++){const ct=nt[ut];typeof ct=="number"&&lt.setValue(at,st,ut,ct)}return lt}function checkColorIsNumberArray(_){for(let _e of _)if(typeof _e!="number")throw new TypeError("cannot have null channels in color if blend is true")}function paintMaskOnMask(_,_e,et={}){const{origin:tt={row:0,column:0},value:nt=1}=et,{column:rt,row:it}=tt;checkPointIsInteger(tt,"Origin");const ot=maskToOutputMask(_,et,{clone:!0});for(let lt=Math.max(it,0);lt<Math.min(_e.height+it,_.height);lt++)for(let st=Math.max(rt,0);st<Math.min(_e.width+rt,_.width);st++)_e.getBit(st-rt,lt-it)&&ot.setBit(st,lt,nt);return ot}function cropAlpha(_,_e={}){checkProcessable(_,{alpha:!0});const{threshold:et=_.maxValue}=_e;let tt=findLeft(_,et,_.components);if(tt===-1)throw new RangeError(`could not find new dimensions. Threshold may be too high: ${et}`);let nt=findTop(_,et,_.components,tt),rt=findBottom(_,et,_.components,tt),it=findRight(_,et,_.components,tt,nt,rt);return _.crop({origin:{column:tt,row:nt},width:it-tt+1,height:rt-nt+1})}function findLeft(_,_e,et){for(let tt=0;tt<_.width;tt++)for(let nt=0;nt<_.height;nt++)if(_.getValue(tt,nt,et)>=_e)return tt;return-1}function findTop(_,_e,et,tt){for(let nt=0;nt<_.height;nt++)for(let rt=tt;rt<_.width;rt++)if(_.getValue(rt,nt,et)>=_e)return nt;return-1}function findBottom(_,_e,et,tt){for(let nt=_.height-1;nt>=0;nt--)for(let rt=tt;rt<_.width;rt++)if(_.getValue(rt,nt,et)>=_e)return nt;return-1}function findRight(_,_e,et,tt,nt,rt){for(let it=_.width-1;it>=tt;it--)for(let ot=nt;ot<=rt;ot++)if(_.getValue(it,ot,et)>=_e)return it;return-1}function getMinMax(_){const _e=new Array(_.channels).fill(_.maxValue),et=new Array(_.channels).fill(0);for(let tt=0;tt<_.height;tt++)for(let nt=0;nt<_.width;nt++)for(let rt=0;rt<_.channels;rt++){let it=_.getValue(nt,tt,rt);it<_e[rt]&&(_e[rt]=it),it>et[rt]&&(et[rt]=it)}return{min:_e,max:et}}class Image{constructor(_e,et,tt={}){const{bitDepth:nt=8,data:rt,colorModel:it="RGB",origin:ot={row:0,column:0},meta:lt}=tt;if(_e<1||!Number.isInteger(_e))throw new RangeError(`width must be an integer and at least 1. Received ${_e}`);if(et<1||!Number.isInteger(et))throw new RangeError(`height must be an integer and at least 1. Received ${et}`);this.width=_e,this.height=et,this.size=_e*et,this.bitDepth=nt,this.colorModel=it,this.origin=ot,this.meta=lt;const st=colorModels[it];if(this.components=st.components,this.alpha=st.alpha,this.channels=st.channels,this.maxValue=2**nt-1,rt===void 0)this.data=createPixelArray(this.size,this.channels,this.alpha,this.bitDepth,this.maxValue);else{if(nt===8&&rt instanceof Uint16Array)throw new RangeError(`bitDepth is ${nt} but data is Uint16Array`);if(nt===16&&rt instanceof Uint8Array)throw new RangeError(`bitDepth is ${nt} but data is Uint8Array`);const at=this.size*this.channels;if(rt.length!==at)throw new RangeError(`incorrect data size: ${rt.length}. Expected ${at}`);this.data=rt}}static createFrom(_e,et={}){const{width:tt=_e.width,height:nt=_e.height}=et;let rt;return _e instanceof Image?rt=_e.bitDepth:rt=8,new Image(tt,nt,{bitDepth:rt,colorModel:_e.colorModel,origin:_e.origin,...et})}getPixel(_e,et){const tt=[],nt=(et*this.width+_e)*this.channels;for(let rt=0;rt<this.channels;rt++)tt.push(this.data[nt+rt]);return tt}getColumn(_e){let et=[];for(let tt=0;tt<this.channels;tt++){let nt=[];for(let rt=0;rt<this.height;rt++)nt.push(this.getValue(_e,rt,tt));et.push(nt)}return et}getRow(_e){let et=[];for(let tt=0;tt<this.channels;tt++){let nt=[];for(let rt=0;rt<this.width;rt++)nt.push(this.getValue(rt,_e,tt));et.push(nt)}return et}setPixel(_e,et,tt){const nt=(et*this.width+_e)*this.channels;for(let rt=0;rt<this.channels;rt++)this.data[nt+rt]=tt[rt]}setVisiblePixel(_e,et,tt){_e>=0&&_e<this.width&&et>=0&&et<this.height&&this.setPixel(_e,et,tt)}getPixelByIndex(_e){const et=[],tt=_e*this.channels;for(let nt=0;nt<this.channels;nt++)et.push(this.data[tt+nt]);return et}setPixelByIndex(_e,et){const tt=_e*this.channels;for(let nt=0;nt<this.channels;nt++)this.data[tt+nt]=et[nt]}getValue(_e,et,tt){return this.data[(et*this.width+_e)*this.channels+tt]}setValue(_e,et,tt,nt){this.data[(et*this.width+_e)*this.channels+tt]=nt}getValueByIndex(_e,et){return this.data[_e*this.channels+et]}setValueByIndex(_e,et,tt){this.data[_e*this.channels+et]=tt}getValueByPoint(_e,et){return this.getValue(_e.column,_e.row,et)}setValueByPoint(_e,et,tt){this.setValue(_e.column,_e.row,et,tt)}minMax(){return getMinMax(this)}getRawImage(){return{width:this.width,height:this.height,data:this.data,channels:this.channels,bitDepth:this.bitDepth}}[Symbol.for("nodejs.util.inspect.custom")](){let _e;return this.height>20||this.width>20?_e="[...]":_e=printData$1(this),`Image {
  width: ${this.width}
  height: ${this.height}
  bitDepth: ${this.bitDepth}
  colorModel: ${this.colorModel}
  channels: ${this.channels}
  data: ${_e}
}`}fill(_e){if(typeof _e=="number")return validateValue(_e,this),this.data.fill(_e),this;if(_e.length!==this.channels)throw new RangeError(`the size of value must match the number of channels (${this.channels}). Received ${_e.length}`);for(const et of _e)validateValue(et,this);for(let et=0;et<this.data.length;et+=this.channels)for(let tt=0;tt<=this.channels;tt++)this.data[et+tt]=_e[tt];return this}fillChannel(_e,et){validateChannel(_e,this),validateValue(et,this);for(let tt=_e;tt<this.data.length;tt+=this.channels)this.data[tt]=et;return this}getChannel(_e){validateChannel(_e,this);let et=new Array(this.size);for(let tt=0;tt<this.size;tt++)et[tt]=this.data[_e+tt*this.channels];return et}fillAlpha(_e){if(validateValue(_e,this),!this.alpha)throw new TypeError("fillAlpha can only be called if the image has an alpha channel");const et=this.channels-1;return this.fillChannel(et,_e)}clone(){return Image.createFrom(this,{data:this.data.slice()})}changeEach(_e){for(let et=0;et<this.data.length;et++)this.data[et]=_e(this.data[et])}getCoordinates(_e,et=!1){switch(_e){case"center":{const tt=(this.width-1)/2,nt=(this.height-1)/2;return et?{column:Math.round(tt),row:Math.round(nt)}:{column:tt,row:nt}}case"top-left":return{column:0,row:0};case"top-right":return{column:this.width-1,row:0};case"bottom-left":return{column:0,row:this.height-1};case"bottom-right":return{column:this.width-1,row:this.height-1};default:throw new RangeError(`invalid image coordinates: ${_e}`)}}subtract(_e,et={}){return subtract(this,_e,et)}histogram(_e){return histogram(this,_e)}mean(){return mean(this)}median(){return median(this)}variance(){return variance(this)}drawPoints(_e,et={}){return drawPoints(this,_e,et)}drawLine(_e,et,tt={}){return drawLineOnImage(this,_e,et,tt)}drawRectangle(_e={}){return drawRectangle(this,_e)}drawPolyline(_e,et={}){return drawPolylineOnImage(this,_e,et)}drawPolygon(_e,et={}){return drawPolygonOnImage(this,_e,et)}drawCircle(_e,et,tt={}){return drawCircleOnImage(this,_e,et,tt)}drawMarker(_e,et={}){return drawMarker(this,_e,et)}drawMarkers(_e,et={}){return drawMarkers(this,_e,et)}split(){return split(this)}convertColor(_e,et){return convertColor(this,_e,et)}convertBitDepth(_e){return convertBitDepth(this,_e)}grey(_e){return grey(this,_e)}copyTo(_e,et={}){return copyTo(this,_e,et)}threshold(_e={}){return threshold(this,_e)}crop(_e){return crop(this,_e)}cropAlpha(_e={}){return cropAlpha(this,_e)}extract(_e,et){return extract(this,_e,et)}paintMask(_e,et){return paintMaskOnImage(this,_e,et)}blur(_e){return blur(this,_e)}pixelate(_e){return pixelate(this,_e)}directConvolution(_e,et){return directConvolution(this,_e,et)}rawDirectConvolution(_e,et){return rawDirectConvolution(this,_e,et)}separableConvolution(_e,et,tt){return separableConvolution(this,_e,et,tt)}gaussianBlur(_e){return gaussianBlur(this,_e)}flip(_e){return flip(this,_e)}invert(_e){return invert(this,_e)}hypotenuse(_e,et){return hypotenuse(this,_e,et)}gradientFilter(_e){return gradientFilter(this,_e)}derivativeFilter(_e){return derivativeFilter(this,_e)}level(_e){return level(this,_e)}correctColor(_e,et){return correctColor(this,_e,et)}medianFilter(_e){return medianFilter(this,_e)}resize(_e){return resize$1(this,_e)}rotate(_e){return rotate(this,_e)}transform(_e,et){return transform(this,_e,et)}transformRotate(_e,et){return transformRotate(this,_e,et)}erode(_e){return erode(this,_e)}dilate(_e){return dilate(this,_e)}open(_e){return open(this,_e)}close(_e){return close(this,_e)}topHat(_e){return topHat(this,_e)}bottomHat(_e){return bottomHat(this,_e)}morphologicalGradient(_e){return morphologicalGradient(this,_e)}cannyEdgeDetector(_e){return cannyEdgeDetector(this,_e)}}function createPixelArray(_,_e,et,tt,nt){const rt=_e*_;let it;switch(tt){case 8:it=new Uint8Array(rt);break;case 16:it=new Uint16Array(rt);break;default:throw new RangeError(`invalid bitDepth: ${tt}`)}if(et)for(let ot=_e-1;ot<rt;ot+=_e)it[ot]=nt;return it}function printData$1(_){const _e=[],et=_.bitDepth===8?3:5;for(let tt=0;tt<_.height;tt++){const nt=[];for(let rt=0;rt<_.width;rt++)for(let it=0;it<_.channels;it++)nt.push(String(_.getValue(rt,tt,it)).padStart(et," "));_e.push(`[${nt.join(" ")}]`)}return`{
    ${`[
     ${_e.join(`
     `)}
    ]`}
  }`}function getFeret(_){const _e=_.getConvexHull(),et=_e.points;if(_e.surface===0)return{minDiameter:{length:0,points:[{column:0,row:0},{column:0,row:0}],angle:0,calliperLines:[[{column:0,row:0},{column:0,row:0}],[{column:0,row:0},{column:0,row:0}]]},maxDiameter:{length:0,points:[{column:0,row:0},{column:0,row:0}],angle:0,calliperLines:[[{column:0,row:0},{column:0,row:0}],[{column:0,row:0},{column:0,row:0}]]},aspectRatio:1};let tt=Number.POSITIVE_INFINITY,nt=0,rt=[],it;for(let gt=0;gt<et.length;gt++){let xt=getAngle(et[gt],et[(gt+1)%et.length]);const ft=rotate$1(-xt,et);let pt=0,mt=[];for(let _t=0;_t<et.length;_t++){let St=Math.abs(ft[gt].row-ft[_t].row);St>pt&&(pt=St,mt=[ft[gt],ft[_t]])}if(pt<tt){tt=pt,nt=xt,rt=mt;const{minIndex:_t,maxIndex:St}=findPointIndexesOfExtremeColumns(ft);it=getMinLines(nt,_t,St,ft,rt)}}const ot={points:rotate$1(nt,rt),length:tt,angle:toDegrees(nt),calliperLines:it};let lt=[],st=0,at=[];for(let gt=0;gt<et.length-1;gt++)for(let xt=gt+1;xt<et.length;xt++){let ft=(et[gt].column-et[xt].column)**2+(et[gt].row-et[xt].row)**2;ft>st&&(st=ft,lt=[et[gt],et[xt]],at=[gt,xt])}const ut=getAngle(lt[0],lt[1]);let ct=rotate$1(-ut,et);const{minIndex:ht,maxIndex:dt}=findPointsIndexesOfExtremeRows(ct);let vt=getMaxLines(ut,ht,dt,ct,at);const yt={length:Math.sqrt(st),angle:toDegrees(getAngle(lt[0],lt[1])),points:lt,calliperLines:vt};return{minDiameter:ot,maxDiameter:yt,aspectRatio:ot.length/yt.length}}function findPointIndexesOfExtremeColumns(_){let _e=0,et=0;for(let tt=0;tt<_.length;tt++)_[tt].column>_[_e].column&&(_e=tt),_[tt].column<_[et].column&&(et=tt);return{minIndex:et,maxIndex:_e}}function findPointsIndexesOfExtremeRows(_){let _e=0,et=0;for(let tt=0;tt<_.length;tt++)_[tt].row>_[_e].row&&(_e=tt),_[tt].row<_[et].row&&(et=tt);return{minIndex:et,maxIndex:_e}}function getMinLines(_,_e,et,tt,nt){let rt=[{column:tt[_e].column,row:nt[0].row},{column:tt[et].column,row:nt[0].row}],it=[{column:tt[_e].column,row:nt[1].row},{column:tt[et].column,row:nt[1].row}];return[rotate$1(_,rt),rotate$1(_,it)]}function getMaxLines(_,_e,et,tt,nt){let rt=[{column:tt[nt[0]].column,row:tt[_e].row},{column:tt[nt[0]].column,row:tt[et].row}],it=[{column:tt[nt[1]].column,row:tt[_e].row},{column:tt[nt[1]].column,row:tt[et].row}];return[rotate$1(_,rt),rotate$1(_,it)]}function getBorderPoints(_,_e={}){const{innerBorders:et=!1,allowCorners:tt=!1}=_e;et||(_=_.solidFill());let nt=[];for(let rt=0;rt<_.width;rt++)_.getBit(rt,0)&&nt.push({column:rt,row:0}),_.getBit(rt,_.height-1)&&nt.push({column:rt,row:_.height-1});for(let rt=0;rt<_.height;rt++)_.getBit(0,rt)&&nt.push({column:0,row:rt}),_.getBit(_.width-1,rt)&&nt.push({column:_.width-1,row:rt});for(let rt=1;rt<_.height-1;rt++)for(let it=1;it<_.width-1;it++)_.getBit(it,rt)&&((_.getBit(it-1,rt)===0||_.getBit(it,rt-1)===0||_.getBit(it+1,rt)===0||_.getBit(it,rt+1)===0)&&nt.push({column:it,row:rt}),tt&&(_.getBit(it-1,rt-1)===0||_.getBit(it-1,rt+1)===0||_.getBit(it+1,rt-1)===0||_.getBit(it+1,rt+1)===0)&&nt.push({column:it,row:rt}));return nt}function getLineLength(_,_e){return Math.sqrt((_.column-_e.column)**2+(_.row-_e.row)**2)}function getPolygonPerimeter(_){let _e=0;for(let et=0;et<_.length;et++)_e+=getLineLength(_[(et+1)%_.length],_[et]);return _e}function getPolygonArea(_){let _e=0;for(let et=0;et<_.length;et++){const tt=(et+1)%_.length;_e+=_[et].column*_[tt].row,_e-=_[et].row*_[tt].column}return Math.abs(_e/2)}function getExtendedBorderPoints(_){const _e=_.getBorderPoints({allowCorners:!0,innerBorders:!1});let et=[];for(let tt of _e)et.push(tt,{column:tt.column+1,row:tt.row},{column:tt.column+1,row:tt.row+1},{column:tt.column,row:tt.row+1});return et}function monotoneChainConvexHull(_,_e={}){const{sorted:et=!1}=_e;et||(_=_.slice().sort(byXThenY));const tt=_.length,nt=new Array(tt*2);let rt=0;for(let ot=0;ot<tt;ot++){const lt=_[ot];for(;rt>=2&&cw(nt[rt-2],nt[rt-1],lt)<=0;)rt--;nt[rt++]=lt}const it=rt+1;for(let ot=tt-2;ot>=0;ot--){const lt=_[ot];for(;rt>=it&&cw(nt[rt-2],nt[rt-1],lt)<=0;)rt--;nt[rt++]=lt}return nt.slice(0,rt-1)}function cw(_,_e,et){return(_e.row-_.row)*(et.column-_.column)-(_e.column-_.column)*(et.row-_.row)}function byXThenY(_,_e){return _.column===_e.column?_.row-_e.row:_.column-_e.column}function getConvexHull(_){const _e=getExtendedBorderPoints(_);if(_e.length===0)return{points:[],surface:0,perimeter:0};const et=monotoneChainConvexHull(_e),tt=getPolygonPerimeter(et),nt=getPolygonArea(et);return{points:et,perimeter:tt,surface:nt}}const leftFirst=(_,_e)=>_.column<=_e.column?-1:1,topFirst=(_,_e)=>_.row>=_e.row?-1:1;function getMbrAngle(_){const _e=_.slice().sort(leftFirst),et=_e.slice(0,2),tt=_e.slice(2,4);et.sort(topFirst),tt.sort(topFirst);const nt=et[0],rt=tt[0];return-toDegrees(getAngle(nt,rt))}function getMbrFromPoints(_){if(_.length===0)return{points:[],angle:0,width:0,height:0,surface:0,perimeter:0,aspectRatio:0};if(_.length===1)return{points:[_[0],_[0],_[0],_[0]],perimeter:0,surface:0,angle:0,width:0,height:0,aspectRatio:1};let _e=[],et=Number.POSITIVE_INFINITY,tt=0,nt=[];for(let ut=0;ut<_.length;ut++){let ct=getAngle(_[ut],_[(ut+1)%_.length]);_e=rotate$1(-ct,_);let ht=_e[ut].column,dt=_e[ut].row,vt=_e[(ut+1)%_e.length].column,yt=_e[(ut+1)%_e.length].row,gt=!0,xt=0,ft=0,pt=0;for(let Et of _e){let kt=Et.column,wt=Et.row,bt=(kt-ht)/(vt-ht);gt?(gt=!1,xt=bt,ft=bt):(bt<xt&&(xt=bt),bt>ft&&(ft=bt));let Mt=(-(vt-ht)*wt+vt*dt-yt*ht)/(vt-ht);Math.abs(Mt)>Math.abs(pt)&&(pt=Mt)}let mt={column:ht+xt*(vt-ht),row:dt},_t={column:ht+ft*(vt-ht),row:dt},St=Math.abs(pt*(xt-ft)*(vt-ht));St<et&&(tt=ct,et=St,nt=[_t,mt,{column:mt.column,row:mt.row-pt},{column:_t.column,row:_t.row-pt}])}const rt=rotate$1(tt,nt),it=[Math.hypot(nt[0].column-nt[1].column,nt[0].row-nt[1].row),Math.hypot(nt[0].column-nt[3].column,nt[0].row-nt[3].row)],ot=Math.max(...it),lt=Math.min(...it),st=getMbrAngle(rt),at=lt/ot;return{points:rt,surface:et,angle:st,width:ot,height:lt,perimeter:2*ot+2*lt,aspectRatio:at}}function getMbr(_){const _e=monotoneChainConvexHull(getExtendedBorderPoints(_));return getMbrFromPoints(_e)}function boolToNumber(_){let _e;return typeof _=="boolean"?_e=_?1:0:_e=_,_e}class Mask{constructor(_e,et,tt={}){const{data:nt,origin:rt={row:0,column:0}}=tt;if(_e<1||!Number.isInteger(_e))throw new RangeError(`width must be an integer and at least 1. Received ${_e}`);if(et<1||!Number.isInteger(et))throw new RangeError(`height must be an integer and at least 1. Received ${et}`);this.width=_e,this.height=et,this.size=_e*et,this.bitDepth=1,this.colorModel="BINARY",this.origin=rt;const it=colorModels[this.colorModel];if(this.components=it.components,this.alpha=it.alpha,this.channels=it.channels,this.maxValue=1,nt===void 0)this.data=new Uint8Array(this.size);else{const ot=this.size*this.channels;if(nt.length!==ot)throw new RangeError(`incorrect data size: ${nt.length}. Expected ${ot}`);this.data=nt}}static createFrom(_e,et={}){const{width:tt=_e.width,height:nt=_e.height,origin:rt=_e.origin}=et;return new Mask(tt,nt,{origin:rt,...et})}getPixel(_e,et){const tt=[],nt=et*this.width+_e;return tt.push(this.data[nt]),tt}setPixel(_e,et,tt){const nt=et*this.width+_e;this.data[nt]=tt[0]}setVisiblePixel(_e,et,tt){_e>=0&&_e<this.width&&et>=0&&et<this.height&&this.setPixel(_e,et,tt)}getPixelByIndex(_e){return[this.data[_e]]}setPixelByIndex(_e,et){this.data[_e]=et[0]}static fromPoints(_e,et,tt){let nt=new Mask(_e,et);for(const rt of tt)nt.setBit(rt.column,rt.row,1);return nt}clone(){return Mask.createFrom(this,{data:this.data.slice()})}getBit(_e,et){const tt=et*this.width+_e;return this.data[tt]}setBit(_e,et,tt){const nt=et*this.width+_e;this.data[nt]=tt}getBitByIndex(_e){return this.data[_e*this.channels]}setBitByIndex(_e,et){let tt=boolToNumber(et);this.data[_e*this.channels]=tt}getValue(_e,et,tt){return checkChannel(tt),this.getBit(_e,et)}setValue(_e,et,tt,nt){checkChannel(tt),this.setBit(_e,et,nt)}getValueByIndex(_e,et){return checkChannel(et),this.getBitByIndex(_e)}setValueByIndex(_e,et,tt){checkChannel(et),this.setBitByIndex(_e,tt)}getValueByPoint(_e){return this.getValue(_e.column,_e.row,0)}setValueByPoint(_e,et){this.setValue(_e.column,_e.row,0,et)}getRawImage(){return{width:this.width,height:this.height,data:this.data}}[Symbol.for("nodejs.util.inspect.custom")](){let _e;return this.height>20||this.width>20?_e="[...]":_e=printData(this),`Mask {
  width: ${this.width}
  height: ${this.height}
  data: ${_e}
}`}fill(_e){let et=boolToNumber(_e);return this.data.fill(et),this}convertColor(_e){return convertColor(this,_e)}invert(_e){return invert(this,_e)}subtract(_e,et){return subtract(this,_e,et)}and(_e,et){return and(this,_e,et)}or(_e,et){return or(this,_e,et)}getBorderPoints(_e){return getBorderPoints(this,_e)}getConvexHull(){return getConvexHull(this)}getMbr(){return getMbr(this)}getFeret(){return getFeret(this)}erode(_e){return erode(this,_e)}dilate(_e){return dilate(this,_e)}open(_e){return open(this,_e)}close(_e){return close(this,_e)}topHat(_e){return topHat(this,_e)}bottomHat(_e){return bottomHat(this,_e)}morphologicalGradient(_e){return morphologicalGradient(this,_e)}clearBorder(_e){return clearBorder(this,_e)}floodFill(_e){return floodFill(this,_e)}solidFill(_e){return solidFill(this,_e)}drawPoints(_e,et={}){return drawPoints(this,_e,et)}drawLine(_e,et,tt={}){return drawLineOnMask(this,_e,et,tt)}drawPolyline(_e,et={}){return drawPolylineOnMask(this,_e,et)}drawPolygon(_e,et={}){return drawPolygonOnMask(this,_e,et)}drawRectangle(_e={}){return drawRectangle(this,_e)}copyTo(_e,et={}){return copyTo(this,_e,et)}paintMask(_e,et){return paintMaskOnMask(this,_e,et)}}function printData(_){const _e=[];for(let et=0;et<_.height;et++){const tt=[];for(let nt=0;nt<_.width;nt++)tt.push(String(_.getBit(nt,et)));_e.push(`[${tt.join(" ")}]`)}return _e.join(`
        `)}function checkChannel(_){if(_!==0)throw new RangeError(`channel value must be 0 on type Mask. Received ${_}`)}function copyData(_,_e){if(_e.width!==_.width||_e.height!==_.height||_e.colorModel!==_.colorModel)throw new RangeError("images width, height or color model is different");_e.data=_.data.slice()}function getOutputImage(_,_e={},et={}){const{out:tt}=_e,{newParameters:nt,clone:rt}=et;if(tt===void 0)return rt?_.clone():Image.createFrom(_,nt);{if(!(tt instanceof Image))throw new TypeError("out must be an Image");const it={width:_.width,height:_.height,bitDepth:_.bitDepth,colorModel:_.colorModel,...nt};return checkRequirements(it,tt),rt&&_!==tt&&copyData(_,tt),tt}}function maskToOutputImage(_,_e={}){const{out:et}=_e;if(et===void 0)return Image.createFrom(_,{colorModel:"GREY"});{if(!(et instanceof Image))throw new TypeError("out must be an Image");const tt={width:_.width,height:_.height,bitDepth:8,colorModel:"GREY"};return checkRequirements(tt,et),et}}function imageToOutputMask(_,_e={}){const{out:et}=_e;if(et===void 0)return Mask.createFrom(_);{if(!(et instanceof Mask))throw new TypeError("out must be a Mask");const tt={width:_.width,height:_.height,bitDepth:1,colorModel:"BINARY"};return checkRequirements(tt,et),et}}function checkRequirements(_,_e){for(const et in _){const tt=et;if(_e[tt]!==_[tt])throw new RangeError(`cannot use out image. Its ${et} property must be ${_[tt]}. Received ${_e[tt]}`)}}function maskToOutputMask(_,_e={},et={}){const{out:tt}=_e,{newParameters:nt,clone:rt}=et;if(tt===void 0)return rt?_.clone():Mask.createFrom(_,nt);{if(!(tt instanceof Mask))throw new TypeError("out must be a Mask");const it={width:_.width,height:_.height,bitDepth:1,colorModel:"BINARY"};return checkRequirements(it,tt),rt&&_!==tt&&copyData(_,tt),tt}}function mean(_){let _e=new Array(_.channels).fill(0);for(let tt=0;tt<_.height;tt++)for(let nt=0;nt<_.width;nt++)for(let rt=0;rt<_.channels;rt++)_e[rt]+=_.getValue(nt,tt,rt);return _e.map(tt=>tt/_.size)}function histogram(_,_e={}){let{channel:et,slots:tt=256}=_e;if(!(tt!==0&&!(tt&tt-1)))throw new RangeError("slots must be a power of 2, for example: 64, 256, 1024");if(typeof et!="number"){if(_.channels!==1)throw new TypeError("channel option is mandatory for multi-channel images");et=0}validateChannel(et,_);const nt=new Uint32Array(tt);let rt=0,it=Math.log2(tt);rt=_.bitDepth-it;for(let ot=0;ot<_.size;ot++)nt[_.getValueByIndex(ot,et)>>rt]++;return nt}var imageType$2={exports:{}},fileType$1={exports:{}};(function(module){const toBytes=_=>[..._].map(_e=>_e.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(_,_e=0){let et=_[_e],tt=1,nt=0;for(;++nt<8;)tt*=256,et+=_[_e+nt]*tt;return et}const fileType=_=>{if(!(_ instanceof Uint8Array||_ instanceof ArrayBuffer||Buffer.isBuffer(_)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof _}\``);const _e=_ instanceof Uint8Array?_:new Uint8Array(_);if(!(_e&&_e.length>1))return null;const et=(nt,rt)=>{rt=Object.assign({offset:0},rt);for(let it=0;it<nt.length;it++)if(rt.mask){if(nt[it]!==(rt.mask[it]&_e[it+rt.offset]))return!1}else if(nt[it]!==_e[it+rt.offset])return!1;return!0},tt=(nt,rt)=>et(toBytes(nt),rt);if(et([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(et([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(et([71,73,70]))return{ext:"gif",mime:"image/gif"};if(et([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(et([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((et([73,73,42,0])||et([77,77,0,42]))&&et([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(et([73,73,42,0])||et([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(et([66,77]))return{ext:"bmp",mime:"image/bmp"};if(et([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(et([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(et([80,75,3,4])){if(et([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(et(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(tt("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(tt("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(tt("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const nt=(lt,st=0)=>lt.findIndex((at,ut,ct)=>ut>=st&&ct[ut]===80&&ct[ut+1]===75&&ct[ut+2]===3&&ct[ut+3]===4);let rt=0,it=!1,ot=null;do{const lt=rt+30;if(it||(it=et(oxmlContentTypes,{offset:lt})||et(oxmlRels,{offset:lt})),ot||(tt("word/",{offset:lt})?ot={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:tt("ppt/",{offset:lt})?ot={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:tt("xl/",{offset:lt})&&(ot={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),it&&ot)return ot;rt=nt(_e,lt)}while(rt>=0);if(ot)return ot}if(et([80,75])&&(_e[2]===3||_e[2]===5||_e[2]===7)&&(_e[3]===4||_e[3]===6||_e[3]===8))return{ext:"zip",mime:"application/zip"};if(et([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(et([82,97,114,33,26,7])&&(_e[6]===0||_e[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(et([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(et([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(et([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(et([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(et([51,103,112,53])||et([0,0,0])&&et([102,116,121,112],{offset:4})&&(et([109,112,52,49],{offset:8})||et([109,112,52,50],{offset:8})||et([105,115,111,109],{offset:8})||et([105,115,111,50],{offset:8})||et([109,109,112,52],{offset:8})||et([77,52,86],{offset:8})||et([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(et([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(et([26,69,223,163])){const nt=_e.subarray(4,4100),rt=nt.findIndex((it,ot,lt)=>lt[ot]===66&&lt[ot+1]===130);if(rt!==-1){const it=rt+3,ot=lt=>[...lt].every((st,at)=>nt[it+at]===st.charCodeAt(0));if(ot("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(ot("webm"))return{ext:"webm",mime:"video/webm"}}}if(et([0,0,0,20,102,116,121,112,113,116,32,32])||et([102,114,101,101],{offset:4})||et([102,116,121,112,113,116,32,32],{offset:4})||et([109,100,97,116],{offset:4})||et([109,111,111,118],{offset:4})||et([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(et([82,73,70,70])){if(et([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(et([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(et([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(et([48,38,178,117,142,102,207,17,166,217])){let nt=30;do{const rt=readUInt64LE(_e,nt+16);if(et([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:nt})){if(et([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:nt+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(et([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:nt+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}nt+=rt}while(nt+24<=_e.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(et([0,0,1,186])||et([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(et([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let nt=0;nt<2&&nt<_e.length-16;nt++){if(et([73,68,51],{offset:nt})||et([255,226],{offset:nt,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(et([255,228],{offset:nt,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(et([255,248],{offset:nt,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(et([255,240],{offset:nt,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(et([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(et([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(et([79,103,103,83]))return et([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:et([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:et([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:et([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:et([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(et([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(et([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(et([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(et([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(et([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(et([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((_e[0]===67||_e[0]===70)&&et([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(et([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(et([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(et([119,79,70,70])&&(et([0,1,0,0],{offset:4})||et([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(et([119,79,70,50])&&(et([0,1,0,0],{offset:4})||et([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(et([76,80],{offset:34})&&(et([0,0,1],{offset:8})||et([1,0,2],{offset:8})||et([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(et([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(et([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(et([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(et([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(et([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(et([37,33]))return{ext:"ps",mime:"application/postscript"};if(et([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(et([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(et([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(et([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(et([77,83,67,70])||et([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(et([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(et([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(et([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(et([31,160])||et([31,157]))return{ext:"Z",mime:"application/x-compress"};if(et([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(et([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(et([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(et([71],{offset:4})&&(et([71],{offset:192})||et([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(et([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(et([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(et([0,0,0,12,106,80,32,32,13,10,135,10])){if(et([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(et([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(et([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(et([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(et([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(tt("<?xml "))return{ext:"xml",mime:"application/xml"};if(et([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(et([102,116,121,112],{offset:4})){if(et([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(et([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(et([104,101,105,99],{offset:8})||et([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(et([104,101,118,99],{offset:8})||et([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return et([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:et([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:et([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:et([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:et([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:et([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:et([212,195,178,161])||et([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const _=new stream.PassThrough,_e=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{_.fileType=fileType(_e)}catch(et){reject(et)}readableStream.unshift(_e),stream.pipeline?resolve(stream.pipeline(readableStream,_,()=>{})):resolve(readableStream.pipe(_))})})})(fileType$1);var fileTypeExports=fileType$1.exports;const fileType=fileTypeExports,imageExts=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),imageType=_=>{const _e=fileType(_);return imageExts.has(_e&&_e.ext)?_e:null};imageType$2.exports=imageType;imageType$2.exports.default=imageType;Object.defineProperty(imageType,"minimumBytes",{value:fileType.minimumBytes});var imageTypeExports=imageType$2.exports;const imageType$1=getDefaultExportFromCjs(imageTypeExports);(function(_){if(_.TextEncoder&&_.TextDecoder)return!1;function _e(tt="utf-8"){if(tt!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${tt}') is invalid.`)}Object.defineProperty(_e.prototype,"encoding",{value:"utf-8"}),_e.prototype.encode=function(tt,nt={stream:!1}){if(nt.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let rt=0;const it=tt.length;let ot=0,lt=Math.max(32,it+(it>>1)+7),st=new Uint8Array(lt>>3<<3);for(;rt<it;){let at=tt.charCodeAt(rt++);if(at>=55296&&at<=56319){if(rt<it){const ut=tt.charCodeAt(rt);(ut&64512)===56320&&(++rt,at=((at&1023)<<10)+(ut&1023)+65536)}if(at>=55296&&at<=56319)continue}if(ot+4>st.length){lt+=8,lt*=1+rt/tt.length*2,lt=lt>>3<<3;const ut=new Uint8Array(lt);ut.set(st),st=ut}if(at&4294967168)if(!(at&4294965248))st[ot++]=at>>6&31|192;else if(!(at&4294901760))st[ot++]=at>>12&15|224,st[ot++]=at>>6&63|128;else if(!(at&4292870144))st[ot++]=at>>18&7|240,st[ot++]=at>>12&63|128,st[ot++]=at>>6&63|128;else continue;else{st[ot++]=at;continue}st[ot++]=at&63|128}return st.slice(0,ot)};function et(tt="utf-8",nt={fatal:!1}){if(tt!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${tt}') is invalid.`);if(nt.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(et.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(et.prototype,"fatal",{value:!1}),Object.defineProperty(et.prototype,"ignoreBOM",{value:!1}),et.prototype.decode=function(tt,nt={stream:!1}){if(nt.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const rt=new Uint8Array(tt);let it=0;const ot=rt.length,lt=[];for(;it<ot;){const st=rt[it++];if(st===0)break;if(!(st&128))lt.push(st);else if((st&224)===192){const at=rt[it++]&63;lt.push((st&31)<<6|at)}else if((st&240)===224){const at=rt[it++]&63,ut=rt[it++]&63;lt.push((st&31)<<12|at<<6|ut)}else if((st&248)===240){const at=rt[it++]&63,ut=rt[it++]&63,ct=rt[it++]&63;let ht=(st&7)<<18|at<<12|ut<<6|ct;ht>65535&&(ht-=65536,lt.push(ht>>>10&1023|55296),ht=56320|ht&1023),lt.push(ht)}}return String.fromCharCode.apply(null,lt)},_.TextEncoder=_e,_.TextDecoder=et})(typeof window<"u"?window:typeof self<"u"?self:globalThis);function decode$3(_,_e="utf8"){return new TextDecoder(_e).decode(_)}const encoder$1=new TextEncoder;function encode$1(_){return encoder$1.encode(_)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const _=new Uint8Array(4),_e=new Uint32Array(_.buffer);return!((_e[0]=1)&_[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(_e=defaultByteLength,et={}){let tt=!1;typeof _e=="number"?_e=new ArrayBuffer(_e):(tt=!0,this.lastWrittenByte=_e.byteLength);const nt=et.offset?et.offset>>>0:0,rt=_e.byteLength-nt;let it=nt;(ArrayBuffer.isView(_e)||_e instanceof IOBuffer)&&(_e.byteLength!==_e.buffer.byteLength&&(it=_e.byteOffset+nt),_e=_e.buffer),tt?this.lastWrittenByte=rt:this.lastWrittenByte=0,this.buffer=_e,this.length=rt,this.byteLength=rt,this.byteOffset=it,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,it,rt),this._mark=0,this._marks=[]}available(_e=1){return this.offset+_e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(_e=1){return this.offset+=_e,this}back(_e=1){return this.offset-=_e,this}seek(_e){return this.offset=_e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const _e=this._marks.pop();if(_e===void 0)throw new Error("Mark stack empty");return this.seek(_e),this}rewind(){return this.offset=0,this}ensureAvailable(_e=1){if(!this.available(_e)){const tt=(this.offset+_e)*2,nt=new Uint8Array(tt);nt.set(new Uint8Array(this.buffer)),this.buffer=nt.buffer,this.length=this.byteLength=tt,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(_e=1){return this.readArray(_e,"uint8")}readArray(_e,et){const tt=typedArrays[et].BYTES_PER_ELEMENT*_e,nt=this.byteOffset+this.offset,rt=this.buffer.slice(nt,nt+tt);if(this.littleEndian===hostBigEndian&&et!=="uint8"&&et!=="int8"){const ot=new Uint8Array(this.buffer.slice(nt,nt+tt));ot.reverse();const lt=new typedArrays[et](ot.buffer);return this.offset+=tt,lt.reverse(),lt}const it=new typedArrays[et](rt);return this.offset+=tt,it}readInt16(){const _e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,_e}readUint16(){const _e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,_e}readInt32(){const _e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,_e}readUint32(){const _e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,_e}readFloat32(){const _e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_e}readFloat64(){const _e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_e}readBigInt64(){const _e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,_e}readBigUint64(){const _e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,_e}readChar(){return String.fromCharCode(this.readInt8())}readChars(_e=1){let et="";for(let tt=0;tt<_e;tt++)et+=this.readChar();return et}readUtf8(_e=1){return decode$3(this.readBytes(_e))}decodeText(_e=1,et="utf-8"){return decode$3(this.readBytes(_e),et)}writeBoolean(_e){return this.writeUint8(_e?255:0),this}writeInt8(_e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,_e),this._updateLastWrittenByte(),this}writeUint8(_e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,_e),this._updateLastWrittenByte(),this}writeByte(_e){return this.writeUint8(_e)}writeBytes(_e){this.ensureAvailable(_e.length);for(let et=0;et<_e.length;et++)this._data.setUint8(this.offset++,_e[et]);return this._updateLastWrittenByte(),this}writeInt16(_e){return this.ensureAvailable(2),this._data.setInt16(this.offset,_e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(_e){return this.ensureAvailable(2),this._data.setUint16(this.offset,_e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(_e){return this.ensureAvailable(4),this._data.setInt32(this.offset,_e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(_e){return this.ensureAvailable(4),this._data.setUint32(this.offset,_e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(_e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,_e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(_e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,_e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(_e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,_e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(_e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,_e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(_e){return this.writeUint8(_e.charCodeAt(0))}writeChars(_e){for(let et=0;et<_e.length;et++)this.writeUint8(_e.charCodeAt(et));return this}writeUtf8(_e){return this.writeBytes(encode$1(_e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function guessStripByteCounts(_){if(_.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const _e=_.rowsPerStrip*_.width*_.samplesPerPixel*(_.bitsPerSample/8);return new Array(_.stripOffsets.length).fill(_e)}function applyHorizontalDifferencing8Bit(_,_e,et){let tt=0;for(;tt<_.length;){for(let nt=et;nt<_e*et;nt+=et)for(let rt=0;rt<et;rt++)_[tt+nt+rt]=_[tt+nt+rt]+_[tt+nt-(et-rt)]&255;tt+=_e*et}}function applyHorizontalDifferencing16Bit(_,_e,et){let tt=0;for(;tt<_.length;){for(let nt=et;nt<_e*et;nt+=et)for(let rt=0;rt<et;rt++)_[tt+nt+rt]=_[tt+nt+rt]+_[tt+nt-(et-rt)]&65535;tt+=_e*et}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let _ in tagsById$2)tagsByName$2[tagsById$2[_]]=Number(_);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let _ in tagsById$1)tagsByName$1[tagsById$1[_]]=Number(_);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let _ in tagsById)tagsByName[tagsById[_]]=Number(_);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(_e){if(!_e)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=_e,this._hasMap=!1,this._map={}}get(_e){if(typeof _e=="number")return this.fields.get(_e);if(typeof _e=="string")return this.fields.get(tags[this.kind].tagsByName[_e]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const _e=tags[this.kind].tagsById;for(let et of this.fields.keys())_e[et]&&(this._map[_e[et]]=this.fields.get(et));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(_,_e){const et=types.get(_);if(!et)throw new Error(`type not found: ${_}`);return et[0]*_e}function readData(_,_e,et){const tt=types.get(_e);if(!tt)throw new Error(`type not found: ${_e}`);return tt[1](_,et)}function readByte(_,_e){if(_e===1)return _.readUint8();let et=new Uint8Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readUint8();return et}function readASCII(_,_e){let et=[],tt="";for(let nt=0;nt<_e;nt++){let rt=String.fromCharCode(_.readUint8());rt==="\0"?(et.push(tt),tt=""):tt+=rt}return et.length===1?et[0]:et}function readShort(_,_e){if(_e===1)return _.readUint16();let et=new Uint16Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readUint16();return et}function readLong(_,_e){if(_e===1)return _.readUint32();let et=new Uint32Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readUint32();return et}function readRational(_,_e){if(_e===1)return _.readUint32()/_.readUint32();let et=new Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readUint32()/_.readUint32();return et}function readSByte(_,_e){if(_e===1)return _.readInt8();let et=new Int8Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readInt8();return et}function readSShort(_,_e){if(_e===1)return _.readInt16();let et=new Int16Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readInt16();return et}function readSLong(_,_e){if(_e===1)return _.readInt32();let et=new Int32Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readInt32();return et}function readSRational(_,_e){if(_e===1)return _.readInt32()/_.readInt32();let et=new Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readInt32()/_.readInt32();return et}function readFloat(_,_e){if(_e===1)return _.readFloat32();let et=new Float32Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readFloat32();return et}function readDouble(_,_e){if(_e===1)return _.readFloat64();let et=new Float64Array(_e);for(let tt=0;tt<_e;tt++)et[tt]=_.readFloat64();return et}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let _e=0;_e<256;_e++)stringTable.push([_e]);const _=[];for(let _e=256;_e<4096;_e++)stringTable.push(_)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(_e){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(_e.buffer,_e.byteOffset,_e.byteLength),this.outData=new IOBuffer(_e.byteLength),this.initializeTable()}decode(){let _e=0,et=0;for(;(_e=this.getNextCode())!==EOI_CODE;)if(_e===CLEAR_CODE){if(this.initializeTable(),_e=this.getNextCode(),_e===EOI_CODE)break;this.writeString(this.stringFromCode(_e)),et=_e}else if(this.isInTable(_e))this.writeString(this.stringFromCode(_e)),this.addStringToTable(this.stringFromCode(et).concat(this.stringFromCode(_e)[0])),et=_e;else{const nt=this.stringFromCode(et).concat(this.stringFromCode(et)[0]);this.writeString(nt),this.addStringToTable(nt),et=_e}const tt=this.outData.toArray();return new DataView(tt.buffer,tt.byteOffset,tt.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(_e){this.outData.writeBytes(_e)}stringFromCode(_e){return stringTable[_e]}isInTable(_e){return _e<this.tableLength}addStringToTable(_e){if(stringTable[this.tableLength++]=_e,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const _e=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:_e}}function decompressLzw(_){return new LzwDecoder(_).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let _e=new Date,et=dateTimeRegex.exec(this.dateTime);if(et===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return _e.setFullYear(Number(et[1]),Number(et[2])-1,Number(et[3])),_e.setHours(Number(et[4]),Number(et[5]),Number(et[6])),_e}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const _e=this.get("BitsPerSample");return _e&&typeof _e!="number"?_e[0]:_e}get alpha(){const _e=this.extraSamples;return _e?_e[0]!==0:!1}get associatedAlpha(){const _e=this.extraSamples;return _e?_e[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const _e=2**this.bitsPerSample,et=this.get("ColorMap");if(!et)return;if(et.length!==3*_e)throw new Error(`ColorMap size must be ${_e}`);const tt=[];for(let nt=0;nt<_e;nt++)tt.push([et[nt],et[nt+_e],et[nt+2*_e]]);return tt}}function alwaysArray(_){return typeof _=="number"?[_]:_}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(_){let _e=_.length;for(;--_e>=0;)_[_e]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(_,_e,et,tt,nt){this.static_tree=_,this.extra_bits=_e,this.extra_base=et,this.elems=tt,this.max_length=nt,this.has_stree=_&&_.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(_,_e){this.dyn_tree=_,this.max_code=0,this.stat_desc=_e}const d_code=_=>_<256?_dist_code[_]:_dist_code[256+(_>>>7)],put_short=(_,_e)=>{_.pending_buf[_.pending++]=_e&255,_.pending_buf[_.pending++]=_e>>>8&255},send_bits=(_,_e,et)=>{_.bi_valid>Buf_size-et?(_.bi_buf|=_e<<_.bi_valid&65535,put_short(_,_.bi_buf),_.bi_buf=_e>>Buf_size-_.bi_valid,_.bi_valid+=et-Buf_size):(_.bi_buf|=_e<<_.bi_valid&65535,_.bi_valid+=et)},send_code=(_,_e,et)=>{send_bits(_,et[_e*2],et[_e*2+1])},bi_reverse=(_,_e)=>{let et=0;do et|=_&1,_>>>=1,et<<=1;while(--_e>0);return et>>>1},bi_flush=_=>{_.bi_valid===16?(put_short(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=_.bi_buf&255,_.bi_buf>>=8,_.bi_valid-=8)},gen_bitlen=(_,_e)=>{const et=_e.dyn_tree,tt=_e.max_code,nt=_e.stat_desc.static_tree,rt=_e.stat_desc.has_stree,it=_e.stat_desc.extra_bits,ot=_e.stat_desc.extra_base,lt=_e.stat_desc.max_length;let st,at,ut,ct,ht,dt,vt=0;for(ct=0;ct<=MAX_BITS$1;ct++)_.bl_count[ct]=0;for(et[_.heap[_.heap_max]*2+1]=0,st=_.heap_max+1;st<HEAP_SIZE$1;st++)at=_.heap[st],ct=et[et[at*2+1]*2+1]+1,ct>lt&&(ct=lt,vt++),et[at*2+1]=ct,!(at>tt)&&(_.bl_count[ct]++,ht=0,at>=ot&&(ht=it[at-ot]),dt=et[at*2],_.opt_len+=dt*(ct+ht),rt&&(_.static_len+=dt*(nt[at*2+1]+ht)));if(vt!==0){do{for(ct=lt-1;_.bl_count[ct]===0;)ct--;_.bl_count[ct]--,_.bl_count[ct+1]+=2,_.bl_count[lt]--,vt-=2}while(vt>0);for(ct=lt;ct!==0;ct--)for(at=_.bl_count[ct];at!==0;)ut=_.heap[--st],!(ut>tt)&&(et[ut*2+1]!==ct&&(_.opt_len+=(ct-et[ut*2+1])*et[ut*2],et[ut*2+1]=ct),at--)}},gen_codes=(_,_e,et)=>{const tt=new Array(MAX_BITS$1+1);let nt=0,rt,it;for(rt=1;rt<=MAX_BITS$1;rt++)nt=nt+et[rt-1]<<1,tt[rt]=nt;for(it=0;it<=_e;it++){let ot=_[it*2+1];ot!==0&&(_[it*2]=bi_reverse(tt[ot]++,ot))}},tr_static_init=()=>{let _,_e,et,tt,nt;const rt=new Array(MAX_BITS$1+1);for(et=0,tt=0;tt<LENGTH_CODES$1-1;tt++)for(base_length[tt]=et,_=0;_<1<<extra_lbits[tt];_++)_length_code[et++]=tt;for(_length_code[et-1]=tt,nt=0,tt=0;tt<16;tt++)for(base_dist[tt]=nt,_=0;_<1<<extra_dbits[tt];_++)_dist_code[nt++]=tt;for(nt>>=7;tt<D_CODES$1;tt++)for(base_dist[tt]=nt<<7,_=0;_<1<<extra_dbits[tt]-7;_++)_dist_code[256+nt++]=tt;for(_e=0;_e<=MAX_BITS$1;_e++)rt[_e]=0;for(_=0;_<=143;)static_ltree[_*2+1]=8,_++,rt[8]++;for(;_<=255;)static_ltree[_*2+1]=9,_++,rt[9]++;for(;_<=279;)static_ltree[_*2+1]=7,_++,rt[7]++;for(;_<=287;)static_ltree[_*2+1]=8,_++,rt[8]++;for(gen_codes(static_ltree,L_CODES$1+1,rt),_=0;_<D_CODES$1;_++)static_dtree[_*2+1]=5,static_dtree[_*2]=bi_reverse(_,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=_=>{let _e;for(_e=0;_e<L_CODES$1;_e++)_.dyn_ltree[_e*2]=0;for(_e=0;_e<D_CODES$1;_e++)_.dyn_dtree[_e*2]=0;for(_e=0;_e<BL_CODES$1;_e++)_.bl_tree[_e*2]=0;_.dyn_ltree[END_BLOCK*2]=1,_.opt_len=_.static_len=0,_.sym_next=_.matches=0},bi_windup=_=>{_.bi_valid>8?put_short(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0},smaller=(_,_e,et,tt)=>{const nt=_e*2,rt=et*2;return _[nt]<_[rt]||_[nt]===_[rt]&&tt[_e]<=tt[et]},pqdownheap=(_,_e,et)=>{const tt=_.heap[et];let nt=et<<1;for(;nt<=_.heap_len&&(nt<_.heap_len&&smaller(_e,_.heap[nt+1],_.heap[nt],_.depth)&&nt++,!smaller(_e,tt,_.heap[nt],_.depth));)_.heap[et]=_.heap[nt],et=nt,nt<<=1;_.heap[et]=tt},compress_block=(_,_e,et)=>{let tt,nt,rt=0,it,ot;if(_.sym_next!==0)do tt=_.pending_buf[_.sym_buf+rt++]&255,tt+=(_.pending_buf[_.sym_buf+rt++]&255)<<8,nt=_.pending_buf[_.sym_buf+rt++],tt===0?send_code(_,nt,_e):(it=_length_code[nt],send_code(_,it+LITERALS$1+1,_e),ot=extra_lbits[it],ot!==0&&(nt-=base_length[it],send_bits(_,nt,ot)),tt--,it=d_code(tt),send_code(_,it,et),ot=extra_dbits[it],ot!==0&&(tt-=base_dist[it],send_bits(_,tt,ot)));while(rt<_.sym_next);send_code(_,END_BLOCK,_e)},build_tree=(_,_e)=>{const et=_e.dyn_tree,tt=_e.stat_desc.static_tree,nt=_e.stat_desc.has_stree,rt=_e.stat_desc.elems;let it,ot,lt=-1,st;for(_.heap_len=0,_.heap_max=HEAP_SIZE$1,it=0;it<rt;it++)et[it*2]!==0?(_.heap[++_.heap_len]=lt=it,_.depth[it]=0):et[it*2+1]=0;for(;_.heap_len<2;)st=_.heap[++_.heap_len]=lt<2?++lt:0,et[st*2]=1,_.depth[st]=0,_.opt_len--,nt&&(_.static_len-=tt[st*2+1]);for(_e.max_code=lt,it=_.heap_len>>1;it>=1;it--)pqdownheap(_,et,it);st=rt;do it=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pqdownheap(_,et,1),ot=_.heap[1],_.heap[--_.heap_max]=it,_.heap[--_.heap_max]=ot,et[st*2]=et[it*2]+et[ot*2],_.depth[st]=(_.depth[it]>=_.depth[ot]?_.depth[it]:_.depth[ot])+1,et[it*2+1]=et[ot*2+1]=st,_.heap[1]=st++,pqdownheap(_,et,1);while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],gen_bitlen(_,_e),gen_codes(et,lt,_.bl_count)},scan_tree=(_,_e,et)=>{let tt,nt=-1,rt,it=_e[0*2+1],ot=0,lt=7,st=4;for(it===0&&(lt=138,st=3),_e[(et+1)*2+1]=65535,tt=0;tt<=et;tt++)rt=it,it=_e[(tt+1)*2+1],!(++ot<lt&&rt===it)&&(ot<st?_.bl_tree[rt*2]+=ot:rt!==0?(rt!==nt&&_.bl_tree[rt*2]++,_.bl_tree[REP_3_6*2]++):ot<=10?_.bl_tree[REPZ_3_10*2]++:_.bl_tree[REPZ_11_138*2]++,ot=0,nt=rt,it===0?(lt=138,st=3):rt===it?(lt=6,st=3):(lt=7,st=4))},send_tree=(_,_e,et)=>{let tt,nt=-1,rt,it=_e[0*2+1],ot=0,lt=7,st=4;for(it===0&&(lt=138,st=3),tt=0;tt<=et;tt++)if(rt=it,it=_e[(tt+1)*2+1],!(++ot<lt&&rt===it)){if(ot<st)do send_code(_,rt,_.bl_tree);while(--ot!==0);else rt!==0?(rt!==nt&&(send_code(_,rt,_.bl_tree),ot--),send_code(_,REP_3_6,_.bl_tree),send_bits(_,ot-3,2)):ot<=10?(send_code(_,REPZ_3_10,_.bl_tree),send_bits(_,ot-3,3)):(send_code(_,REPZ_11_138,_.bl_tree),send_bits(_,ot-11,7));ot=0,nt=rt,it===0?(lt=138,st=3):rt===it?(lt=6,st=3):(lt=7,st=4)}},build_bl_tree=_=>{let _e;for(scan_tree(_,_.dyn_ltree,_.l_desc.max_code),scan_tree(_,_.dyn_dtree,_.d_desc.max_code),build_tree(_,_.bl_desc),_e=BL_CODES$1-1;_e>=3&&_.bl_tree[bl_order[_e]*2+1]===0;_e--);return _.opt_len+=3*(_e+1)+5+5+4,_e},send_all_trees=(_,_e,et,tt)=>{let nt;for(send_bits(_,_e-257,5),send_bits(_,et-1,5),send_bits(_,tt-4,4),nt=0;nt<tt;nt++)send_bits(_,_.bl_tree[bl_order[nt]*2+1],3);send_tree(_,_.dyn_ltree,_e-1),send_tree(_,_.dyn_dtree,et-1)},detect_data_type=_=>{let _e=4093624447,et;for(et=0;et<=31;et++,_e>>>=1)if(_e&1&&_.dyn_ltree[et*2]!==0)return Z_BINARY;if(_.dyn_ltree[9*2]!==0||_.dyn_ltree[10*2]!==0||_.dyn_ltree[13*2]!==0)return Z_TEXT;for(et=32;et<LITERALS$1;et++)if(_.dyn_ltree[et*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=_=>{static_init_done||(tr_static_init(),static_init_done=!0),_.l_desc=new TreeDesc(_.dyn_ltree,static_l_desc),_.d_desc=new TreeDesc(_.dyn_dtree,static_d_desc),_.bl_desc=new TreeDesc(_.bl_tree,static_bl_desc),_.bi_buf=0,_.bi_valid=0,init_block(_)},_tr_stored_block$1=(_,_e,et,tt)=>{send_bits(_,(STORED_BLOCK<<1)+(tt?1:0),3),bi_windup(_),put_short(_,et),put_short(_,~et),et&&_.pending_buf.set(_.window.subarray(_e,_e+et),_.pending),_.pending+=et},_tr_align$1=_=>{send_bits(_,STATIC_TREES<<1,3),send_code(_,END_BLOCK,static_ltree),bi_flush(_)},_tr_flush_block$1=(_,_e,et,tt)=>{let nt,rt,it=0;_.level>0?(_.strm.data_type===Z_UNKNOWN$1&&(_.strm.data_type=detect_data_type(_)),build_tree(_,_.l_desc),build_tree(_,_.d_desc),it=build_bl_tree(_),nt=_.opt_len+3+7>>>3,rt=_.static_len+3+7>>>3,rt<=nt&&(nt=rt)):nt=rt=et+5,et+4<=nt&&_e!==-1?_tr_stored_block$1(_,_e,et,tt):_.strategy===Z_FIXED$1||rt===nt?(send_bits(_,(STATIC_TREES<<1)+(tt?1:0),3),compress_block(_,static_ltree,static_dtree)):(send_bits(_,(DYN_TREES<<1)+(tt?1:0),3),send_all_trees(_,_.l_desc.max_code+1,_.d_desc.max_code+1,it+1),compress_block(_,_.dyn_ltree,_.dyn_dtree)),init_block(_),tt&&bi_windup(_)},_tr_tally$1=(_,_e,et)=>(_.pending_buf[_.sym_buf+_.sym_next++]=_e,_.pending_buf[_.sym_buf+_.sym_next++]=_e>>8,_.pending_buf[_.sym_buf+_.sym_next++]=et,_e===0?_.dyn_ltree[et*2]++:(_.matches++,_e--,_.dyn_ltree[(_length_code[et]+LITERALS$1+1)*2]++,_.dyn_dtree[d_code(_e)*2]++),_.sym_next===_.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(_,_e,et,tt)=>{let nt=_&65535|0,rt=_>>>16&65535|0,it=0;for(;et!==0;){it=et>2e3?2e3:et,et-=it;do nt=nt+_e[tt++]|0,rt=rt+nt|0;while(--it);nt%=65521,rt%=65521}return nt|rt<<16|0};var adler32_1=adler32;const makeTable=()=>{let _,_e=[];for(var et=0;et<256;et++){_=et;for(var tt=0;tt<8;tt++)_=_&1?3988292384^_>>>1:_>>>1;_e[et]=_}return _e},crcTable$1=new Uint32Array(makeTable()),crc32=(_,_e,et,tt)=>{const nt=crcTable$1,rt=tt+et;_^=-1;for(let it=tt;it<rt;it++)_=_>>>8^nt[(_^_e[it])&255];return _^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(_,_e)=>(_.msg=messages[_e],_e),rank=_=>_*2-(_>4?9:0),zero=_=>{let _e=_.length;for(;--_e>=0;)_[_e]=0},slide_hash=_=>{let _e,et,tt,nt=_.w_size;_e=_.hash_size,tt=_e;do et=_.head[--tt],_.head[tt]=et>=nt?et-nt:0;while(--_e);_e=nt,tt=_e;do et=_.prev[--tt],_.prev[tt]=et>=nt?et-nt:0;while(--_e)};let HASH_ZLIB=(_,_e,et)=>(_e<<_.hash_shift^et)&_.hash_mask,HASH=HASH_ZLIB;const flush_pending=_=>{const _e=_.state;let et=_e.pending;et>_.avail_out&&(et=_.avail_out),et!==0&&(_.output.set(_e.pending_buf.subarray(_e.pending_out,_e.pending_out+et),_.next_out),_.next_out+=et,_e.pending_out+=et,_.total_out+=et,_.avail_out-=et,_e.pending-=et,_e.pending===0&&(_e.pending_out=0))},flush_block_only=(_,_e)=>{_tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,_e),_.block_start=_.strstart,flush_pending(_.strm)},put_byte=(_,_e)=>{_.pending_buf[_.pending++]=_e},putShortMSB=(_,_e)=>{_.pending_buf[_.pending++]=_e>>>8&255,_.pending_buf[_.pending++]=_e&255},read_buf=(_,_e,et,tt)=>{let nt=_.avail_in;return nt>tt&&(nt=tt),nt===0?0:(_.avail_in-=nt,_e.set(_.input.subarray(_.next_in,_.next_in+nt),et),_.state.wrap===1?_.adler=adler32_1(_.adler,_e,nt,et):_.state.wrap===2&&(_.adler=crc32_1(_.adler,_e,nt,et)),_.next_in+=nt,_.total_in+=nt,nt)},longest_match=(_,_e)=>{let et=_.max_chain_length,tt=_.strstart,nt,rt,it=_.prev_length,ot=_.nice_match;const lt=_.strstart>_.w_size-MIN_LOOKAHEAD?_.strstart-(_.w_size-MIN_LOOKAHEAD):0,st=_.window,at=_.w_mask,ut=_.prev,ct=_.strstart+MAX_MATCH;let ht=st[tt+it-1],dt=st[tt+it];_.prev_length>=_.good_match&&(et>>=2),ot>_.lookahead&&(ot=_.lookahead);do if(nt=_e,!(st[nt+it]!==dt||st[nt+it-1]!==ht||st[nt]!==st[tt]||st[++nt]!==st[tt+1])){tt+=2,nt++;do;while(st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&st[++tt]===st[++nt]&&tt<ct);if(rt=MAX_MATCH-(ct-tt),tt=ct-MAX_MATCH,rt>it){if(_.match_start=_e,it=rt,rt>=ot)break;ht=st[tt+it-1],dt=st[tt+it]}}while((_e=ut[_e&at])>lt&&--et!==0);return it<=_.lookahead?it:_.lookahead},fill_window=_=>{const _e=_.w_size;let et,tt,nt;do{if(tt=_.window_size-_.lookahead-_.strstart,_.strstart>=_e+(_e-MIN_LOOKAHEAD)&&(_.window.set(_.window.subarray(_e,_e+_e-tt),0),_.match_start-=_e,_.strstart-=_e,_.block_start-=_e,_.insert>_.strstart&&(_.insert=_.strstart),slide_hash(_),tt+=_e),_.strm.avail_in===0)break;if(et=read_buf(_.strm,_.window,_.strstart+_.lookahead,tt),_.lookahead+=et,_.lookahead+_.insert>=MIN_MATCH)for(nt=_.strstart-_.insert,_.ins_h=_.window[nt],_.ins_h=HASH(_,_.ins_h,_.window[nt+1]);_.insert&&(_.ins_h=HASH(_,_.ins_h,_.window[nt+MIN_MATCH-1]),_.prev[nt&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=nt,nt++,_.insert--,!(_.lookahead+_.insert<MIN_MATCH)););}while(_.lookahead<MIN_LOOKAHEAD&&_.strm.avail_in!==0)},deflate_stored=(_,_e)=>{let et=_.pending_buf_size-5>_.w_size?_.w_size:_.pending_buf_size-5,tt,nt,rt,it=0,ot=_.strm.avail_in;do{if(tt=65535,rt=_.bi_valid+42>>3,_.strm.avail_out<rt||(rt=_.strm.avail_out-rt,nt=_.strstart-_.block_start,tt>nt+_.strm.avail_in&&(tt=nt+_.strm.avail_in),tt>rt&&(tt=rt),tt<et&&(tt===0&&_e!==Z_FINISH$3||_e===Z_NO_FLUSH$2||tt!==nt+_.strm.avail_in)))break;it=_e===Z_FINISH$3&&tt===nt+_.strm.avail_in?1:0,_tr_stored_block(_,0,0,it),_.pending_buf[_.pending-4]=tt,_.pending_buf[_.pending-3]=tt>>8,_.pending_buf[_.pending-2]=~tt,_.pending_buf[_.pending-1]=~tt>>8,flush_pending(_.strm),nt&&(nt>tt&&(nt=tt),_.strm.output.set(_.window.subarray(_.block_start,_.block_start+nt),_.strm.next_out),_.strm.next_out+=nt,_.strm.avail_out-=nt,_.strm.total_out+=nt,_.block_start+=nt,tt-=nt),tt&&(read_buf(_.strm,_.strm.output,_.strm.next_out,tt),_.strm.next_out+=tt,_.strm.avail_out-=tt,_.strm.total_out+=tt)}while(it===0);return ot-=_.strm.avail_in,ot&&(ot>=_.w_size?(_.matches=2,_.window.set(_.strm.input.subarray(_.strm.next_in-_.w_size,_.strm.next_in),0),_.strstart=_.w_size,_.insert=_.strstart):(_.window_size-_.strstart<=ot&&(_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,_.insert>_.strstart&&(_.insert=_.strstart)),_.window.set(_.strm.input.subarray(_.strm.next_in-ot,_.strm.next_in),_.strstart),_.strstart+=ot,_.insert+=ot>_.w_size-_.insert?_.w_size-_.insert:ot),_.block_start=_.strstart),_.high_water<_.strstart&&(_.high_water=_.strstart),it?BS_FINISH_DONE:_e!==Z_NO_FLUSH$2&&_e!==Z_FINISH$3&&_.strm.avail_in===0&&_.strstart===_.block_start?BS_BLOCK_DONE:(rt=_.window_size-_.strstart,_.strm.avail_in>rt&&_.block_start>=_.w_size&&(_.block_start-=_.w_size,_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,rt+=_.w_size,_.insert>_.strstart&&(_.insert=_.strstart)),rt>_.strm.avail_in&&(rt=_.strm.avail_in),rt&&(read_buf(_.strm,_.window,_.strstart,rt),_.strstart+=rt,_.insert+=rt>_.w_size-_.insert?_.w_size-_.insert:rt),_.high_water<_.strstart&&(_.high_water=_.strstart),rt=_.bi_valid+42>>3,rt=_.pending_buf_size-rt>65535?65535:_.pending_buf_size-rt,et=rt>_.w_size?_.w_size:rt,nt=_.strstart-_.block_start,(nt>=et||(nt||_e===Z_FINISH$3)&&_e!==Z_NO_FLUSH$2&&_.strm.avail_in===0&&nt<=rt)&&(tt=nt>rt?rt:nt,it=_e===Z_FINISH$3&&_.strm.avail_in===0&&tt===nt?1:0,_tr_stored_block(_,_.block_start,tt,it),_.block_start+=tt,flush_pending(_.strm)),it?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(_,_e)=>{let et,tt;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(et=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),et!==0&&_.strstart-et<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,et)),_.match_length>=MIN_MATCH)if(tt=_tr_tally(_,_.strstart-_.match_start,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=MIN_MATCH){_.match_length--;do _.strstart++,_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart;while(--_.match_length!==0);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+1]);else tt=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(tt&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(_,_e)=>{let et,tt,nt;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(et=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=MIN_MATCH-1,et!==0&&_.prev_length<_.max_lazy_match&&_.strstart-et<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,et),_.match_length<=5&&(_.strategy===Z_FILTERED||_.match_length===MIN_MATCH&&_.strstart-_.match_start>4096)&&(_.match_length=MIN_MATCH-1)),_.prev_length>=MIN_MATCH&&_.match_length<=_.prev_length){nt=_.strstart+_.lookahead-MIN_MATCH,tt=_tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-MIN_MATCH),_.lookahead-=_.prev_length-1,_.prev_length-=2;do++_.strstart<=nt&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),et=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart);while(--_.prev_length!==0);if(_.match_available=0,_.match_length=MIN_MATCH-1,_.strstart++,tt&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}else if(_.match_available){if(tt=_tr_tally(_,0,_.window[_.strstart-1]),tt&&flush_block_only(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return BS_NEED_MORE}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(tt=_tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(_,_e)=>{let et,tt,nt,rt;const it=_.window;for(;;){if(_.lookahead<=MAX_MATCH){if(fill_window(_),_.lookahead<=MAX_MATCH&&_e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(_.match_length=0,_.lookahead>=MIN_MATCH&&_.strstart>0&&(nt=_.strstart-1,tt=it[nt],tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt])){rt=_.strstart+MAX_MATCH;do;while(tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&tt===it[++nt]&&nt<rt);_.match_length=MAX_MATCH-(rt-nt),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=MIN_MATCH?(et=_tr_tally(_,1,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(et=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),et&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(_,_e)=>{let et;for(;;){if(_.lookahead===0&&(fill_window(_),_.lookahead===0)){if(_e===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(_.match_length=0,et=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,et&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,_e===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(_,_e,et,tt,nt){this.good_length=_,this.max_lazy=_e,this.nice_length=et,this.max_chain=tt,this.func=nt}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=_=>{_.window_size=2*_.w_size,zero(_.head),_.max_lazy_match=configuration_table[_.level].max_lazy,_.good_match=configuration_table[_.level].good_length,_.nice_match=configuration_table[_.level].nice_length,_.max_chain_length=configuration_table[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=MIN_MATCH-1,_.match_available=0,_.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=_=>{if(!_)return 1;const _e=_.state;return!_e||_e.strm!==_||_e.status!==INIT_STATE&&_e.status!==GZIP_STATE&&_e.status!==EXTRA_STATE&&_e.status!==NAME_STATE&&_e.status!==COMMENT_STATE&&_e.status!==HCRC_STATE&&_e.status!==BUSY_STATE&&_e.status!==FINISH_STATE?1:0},deflateResetKeep=_=>{if(deflateStateCheck(_))return err(_,Z_STREAM_ERROR$2);_.total_in=_.total_out=0,_.data_type=Z_UNKNOWN;const _e=_.state;return _e.pending=0,_e.pending_out=0,_e.wrap<0&&(_e.wrap=-_e.wrap),_e.status=_e.wrap===2?GZIP_STATE:_e.wrap?INIT_STATE:BUSY_STATE,_.adler=_e.wrap===2?0:1,_e.last_flush=-2,_tr_init(_e),Z_OK$3},deflateReset=_=>{const _e=deflateResetKeep(_);return _e===Z_OK$3&&lm_init(_.state),_e},deflateSetHeader=(_,_e)=>deflateStateCheck(_)||_.state.wrap!==2?Z_STREAM_ERROR$2:(_.state.gzhead=_e,Z_OK$3),deflateInit2=(_,_e,et,tt,nt,rt)=>{if(!_)return Z_STREAM_ERROR$2;let it=1;if(_e===Z_DEFAULT_COMPRESSION$1&&(_e=6),tt<0?(it=0,tt=-tt):tt>15&&(it=2,tt-=16),nt<1||nt>MAX_MEM_LEVEL||et!==Z_DEFLATED$2||tt<8||tt>15||_e<0||_e>9||rt<0||rt>Z_FIXED||tt===8&&it!==1)return err(_,Z_STREAM_ERROR$2);tt===8&&(tt=9);const ot=new DeflateState;return _.state=ot,ot.strm=_,ot.status=INIT_STATE,ot.wrap=it,ot.gzhead=null,ot.w_bits=tt,ot.w_size=1<<ot.w_bits,ot.w_mask=ot.w_size-1,ot.hash_bits=nt+7,ot.hash_size=1<<ot.hash_bits,ot.hash_mask=ot.hash_size-1,ot.hash_shift=~~((ot.hash_bits+MIN_MATCH-1)/MIN_MATCH),ot.window=new Uint8Array(ot.w_size*2),ot.head=new Uint16Array(ot.hash_size),ot.prev=new Uint16Array(ot.w_size),ot.lit_bufsize=1<<nt+6,ot.pending_buf_size=ot.lit_bufsize*4,ot.pending_buf=new Uint8Array(ot.pending_buf_size),ot.sym_buf=ot.lit_bufsize,ot.sym_end=(ot.lit_bufsize-1)*3,ot.level=_e,ot.strategy=rt,ot.method=et,deflateReset(_)},deflateInit=(_,_e)=>deflateInit2(_,_e,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(_,_e)=>{if(deflateStateCheck(_)||_e>Z_BLOCK$1||_e<0)return _?err(_,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const et=_.state;if(!_.output||_.avail_in!==0&&!_.input||et.status===FINISH_STATE&&_e!==Z_FINISH$3)return err(_,_.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const tt=et.last_flush;if(et.last_flush=_e,et.pending!==0){if(flush_pending(_),_.avail_out===0)return et.last_flush=-1,Z_OK$3}else if(_.avail_in===0&&rank(_e)<=rank(tt)&&_e!==Z_FINISH$3)return err(_,Z_BUF_ERROR$1);if(et.status===FINISH_STATE&&_.avail_in!==0)return err(_,Z_BUF_ERROR$1);if(et.status===INIT_STATE&&et.wrap===0&&(et.status=BUSY_STATE),et.status===INIT_STATE){let nt=Z_DEFLATED$2+(et.w_bits-8<<4)<<8,rt=-1;if(et.strategy>=Z_HUFFMAN_ONLY||et.level<2?rt=0:et.level<6?rt=1:et.level===6?rt=2:rt=3,nt|=rt<<6,et.strstart!==0&&(nt|=PRESET_DICT),nt+=31-nt%31,putShortMSB(et,nt),et.strstart!==0&&(putShortMSB(et,_.adler>>>16),putShortMSB(et,_.adler&65535)),_.adler=1,et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(et.status===GZIP_STATE){if(_.adler=0,put_byte(et,31),put_byte(et,139),put_byte(et,8),et.gzhead)put_byte(et,(et.gzhead.text?1:0)+(et.gzhead.hcrc?2:0)+(et.gzhead.extra?4:0)+(et.gzhead.name?8:0)+(et.gzhead.comment?16:0)),put_byte(et,et.gzhead.time&255),put_byte(et,et.gzhead.time>>8&255),put_byte(et,et.gzhead.time>>16&255),put_byte(et,et.gzhead.time>>24&255),put_byte(et,et.level===9?2:et.strategy>=Z_HUFFMAN_ONLY||et.level<2?4:0),put_byte(et,et.gzhead.os&255),et.gzhead.extra&&et.gzhead.extra.length&&(put_byte(et,et.gzhead.extra.length&255),put_byte(et,et.gzhead.extra.length>>8&255)),et.gzhead.hcrc&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending,0)),et.gzindex=0,et.status=EXTRA_STATE;else if(put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,0),put_byte(et,et.level===9?2:et.strategy>=Z_HUFFMAN_ONLY||et.level<2?4:0),put_byte(et,OS_CODE),et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(et.status===EXTRA_STATE){if(et.gzhead.extra){let nt=et.pending,rt=(et.gzhead.extra.length&65535)-et.gzindex;for(;et.pending+rt>et.pending_buf_size;){let ot=et.pending_buf_size-et.pending;if(et.pending_buf.set(et.gzhead.extra.subarray(et.gzindex,et.gzindex+ot),et.pending),et.pending=et.pending_buf_size,et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt)),et.gzindex+=ot,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;nt=0,rt-=ot}let it=new Uint8Array(et.gzhead.extra);et.pending_buf.set(it.subarray(et.gzindex,et.gzindex+rt),et.pending),et.pending+=rt,et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt)),et.gzindex=0}et.status=NAME_STATE}if(et.status===NAME_STATE){if(et.gzhead.name){let nt=et.pending,rt;do{if(et.pending===et.pending_buf_size){if(et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt)),flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;nt=0}et.gzindex<et.gzhead.name.length?rt=et.gzhead.name.charCodeAt(et.gzindex++)&255:rt=0,put_byte(et,rt)}while(rt!==0);et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt)),et.gzindex=0}et.status=COMMENT_STATE}if(et.status===COMMENT_STATE){if(et.gzhead.comment){let nt=et.pending,rt;do{if(et.pending===et.pending_buf_size){if(et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt)),flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3;nt=0}et.gzindex<et.gzhead.comment.length?rt=et.gzhead.comment.charCodeAt(et.gzindex++)&255:rt=0,put_byte(et,rt)}while(rt!==0);et.gzhead.hcrc&&et.pending>nt&&(_.adler=crc32_1(_.adler,et.pending_buf,et.pending-nt,nt))}et.status=HCRC_STATE}if(et.status===HCRC_STATE){if(et.gzhead.hcrc){if(et.pending+2>et.pending_buf_size&&(flush_pending(_),et.pending!==0))return et.last_flush=-1,Z_OK$3;put_byte(et,_.adler&255),put_byte(et,_.adler>>8&255),_.adler=0}if(et.status=BUSY_STATE,flush_pending(_),et.pending!==0)return et.last_flush=-1,Z_OK$3}if(_.avail_in!==0||et.lookahead!==0||_e!==Z_NO_FLUSH$2&&et.status!==FINISH_STATE){let nt=et.level===0?deflate_stored(et,_e):et.strategy===Z_HUFFMAN_ONLY?deflate_huff(et,_e):et.strategy===Z_RLE?deflate_rle(et,_e):configuration_table[et.level].func(et,_e);if((nt===BS_FINISH_STARTED||nt===BS_FINISH_DONE)&&(et.status=FINISH_STATE),nt===BS_NEED_MORE||nt===BS_FINISH_STARTED)return _.avail_out===0&&(et.last_flush=-1),Z_OK$3;if(nt===BS_BLOCK_DONE&&(_e===Z_PARTIAL_FLUSH?_tr_align(et):_e!==Z_BLOCK$1&&(_tr_stored_block(et,0,0,!1),_e===Z_FULL_FLUSH$1&&(zero(et.head),et.lookahead===0&&(et.strstart=0,et.block_start=0,et.insert=0))),flush_pending(_),_.avail_out===0))return et.last_flush=-1,Z_OK$3}return _e!==Z_FINISH$3?Z_OK$3:et.wrap<=0?Z_STREAM_END$3:(et.wrap===2?(put_byte(et,_.adler&255),put_byte(et,_.adler>>8&255),put_byte(et,_.adler>>16&255),put_byte(et,_.adler>>24&255),put_byte(et,_.total_in&255),put_byte(et,_.total_in>>8&255),put_byte(et,_.total_in>>16&255),put_byte(et,_.total_in>>24&255)):(putShortMSB(et,_.adler>>>16),putShortMSB(et,_.adler&65535)),flush_pending(_),et.wrap>0&&(et.wrap=-et.wrap),et.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=_=>{if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const _e=_.state.status;return _.state=null,_e===BUSY_STATE?err(_,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(_,_e)=>{let et=_e.length;if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const tt=_.state,nt=tt.wrap;if(nt===2||nt===1&&tt.status!==INIT_STATE||tt.lookahead)return Z_STREAM_ERROR$2;if(nt===1&&(_.adler=adler32_1(_.adler,_e,et,0)),tt.wrap=0,et>=tt.w_size){nt===0&&(zero(tt.head),tt.strstart=0,tt.block_start=0,tt.insert=0);let lt=new Uint8Array(tt.w_size);lt.set(_e.subarray(et-tt.w_size,et),0),_e=lt,et=tt.w_size}const rt=_.avail_in,it=_.next_in,ot=_.input;for(_.avail_in=et,_.next_in=0,_.input=_e,fill_window(tt);tt.lookahead>=MIN_MATCH;){let lt=tt.strstart,st=tt.lookahead-(MIN_MATCH-1);do tt.ins_h=HASH(tt,tt.ins_h,tt.window[lt+MIN_MATCH-1]),tt.prev[lt&tt.w_mask]=tt.head[tt.ins_h],tt.head[tt.ins_h]=lt,lt++;while(--st);tt.strstart=lt,tt.lookahead=MIN_MATCH-1,fill_window(tt)}return tt.strstart+=tt.lookahead,tt.block_start=tt.strstart,tt.insert=tt.lookahead,tt.lookahead=0,tt.match_length=tt.prev_length=MIN_MATCH-1,tt.match_available=0,_.next_in=it,_.input=ot,_.avail_in=rt,tt.wrap=nt,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(_,_e)=>Object.prototype.hasOwnProperty.call(_,_e);var assign=function(_){const _e=Array.prototype.slice.call(arguments,1);for(;_e.length;){const et=_e.shift();if(et){if(typeof et!="object")throw new TypeError(et+"must be non-object");for(const tt in et)_has(et,tt)&&(_[tt]=et[tt])}}return _},flattenChunks=_=>{let _e=0;for(let tt=0,nt=_.length;tt<nt;tt++)_e+=_[tt].length;const et=new Uint8Array(_e);for(let tt=0,nt=0,rt=_.length;tt<rt;tt++){let it=_[tt];et.set(it,nt),nt+=it.length}return et},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let _=0;_<256;_++)_utf8len[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=_=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(_);let _e,et,tt,nt,rt,it=_.length,ot=0;for(nt=0;nt<it;nt++)et=_.charCodeAt(nt),(et&64512)===55296&&nt+1<it&&(tt=_.charCodeAt(nt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),nt++)),ot+=et<128?1:et<2048?2:et<65536?3:4;for(_e=new Uint8Array(ot),rt=0,nt=0;rt<ot;nt++)et=_.charCodeAt(nt),(et&64512)===55296&&nt+1<it&&(tt=_.charCodeAt(nt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),nt++)),et<128?_e[rt++]=et:et<2048?(_e[rt++]=192|et>>>6,_e[rt++]=128|et&63):et<65536?(_e[rt++]=224|et>>>12,_e[rt++]=128|et>>>6&63,_e[rt++]=128|et&63):(_e[rt++]=240|et>>>18,_e[rt++]=128|et>>>12&63,_e[rt++]=128|et>>>6&63,_e[rt++]=128|et&63);return _e};const buf2binstring=(_,_e)=>{if(_e<65534&&_.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,_.length===_e?_:_.subarray(0,_e));let et="";for(let tt=0;tt<_e;tt++)et+=String.fromCharCode(_[tt]);return et};var buf2string=(_,_e)=>{const et=_e||_.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(_.subarray(0,_e));let tt,nt;const rt=new Array(et*2);for(nt=0,tt=0;tt<et;){let it=_[tt++];if(it<128){rt[nt++]=it;continue}let ot=_utf8len[it];if(ot>4){rt[nt++]=65533,tt+=ot-1;continue}for(it&=ot===2?31:ot===3?15:7;ot>1&&tt<et;)it=it<<6|_[tt++]&63,ot--;if(ot>1){rt[nt++]=65533;continue}it<65536?rt[nt++]=it:(it-=65536,rt[nt++]=55296|it>>10&1023,rt[nt++]=56320|it&1023)}return buf2binstring(rt,nt)},utf8border=(_,_e)=>{_e=_e||_.length,_e>_.length&&(_e=_.length);let et=_e-1;for(;et>=0&&(_[et]&192)===128;)et--;return et<0||et===0?_e:et+_utf8len[_[et]]>_e?et:_e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(_){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},_||{});let _e=this.options;_e.raw&&_e.windowBits>0?_e.windowBits=-_e.windowBits:_e.gzip&&_e.windowBits>0&&_e.windowBits<16&&(_e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let et=deflate_1$2.deflateInit2(this.strm,_e.level,_e.method,_e.windowBits,_e.memLevel,_e.strategy);if(et!==Z_OK$2)throw new Error(messages[et]);if(_e.header&&deflate_1$2.deflateSetHeader(this.strm,_e.header),_e.dictionary){let tt;if(typeof _e.dictionary=="string"?tt=strings.string2buf(_e.dictionary):toString$1.call(_e.dictionary)==="[object ArrayBuffer]"?tt=new Uint8Array(_e.dictionary):tt=_e.dictionary,et=deflate_1$2.deflateSetDictionary(this.strm,tt),et!==Z_OK$2)throw new Error(messages[et]);this._dict_set=!0}}Deflate$1.prototype.push=function(_,_e){const et=this.strm,tt=this.options.chunkSize;let nt,rt;if(this.ended)return!1;for(_e===~~_e?rt=_e:rt=_e===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof _=="string"?et.input=strings.string2buf(_):toString$1.call(_)==="[object ArrayBuffer]"?et.input=new Uint8Array(_):et.input=_,et.next_in=0,et.avail_in=et.input.length;;){if(et.avail_out===0&&(et.output=new Uint8Array(tt),et.next_out=0,et.avail_out=tt),(rt===Z_SYNC_FLUSH||rt===Z_FULL_FLUSH)&&et.avail_out<=6){this.onData(et.output.subarray(0,et.next_out)),et.avail_out=0;continue}if(nt=deflate_1$2.deflate(et,rt),nt===Z_STREAM_END$2)return et.next_out>0&&this.onData(et.output.subarray(0,et.next_out)),nt=deflate_1$2.deflateEnd(this.strm),this.onEnd(nt),this.ended=!0,nt===Z_OK$2;if(et.avail_out===0){this.onData(et.output);continue}if(rt>0&&et.next_out>0){this.onData(et.output.subarray(0,et.next_out)),et.avail_out=0;continue}if(et.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(_){this.chunks.push(_)};Deflate$1.prototype.onEnd=function(_){_===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};const BAD$1=16209,TYPE$1=16191;var inffast=function _(_e,et){let tt,nt,rt,it,ot,lt,st,at,ut,ct,ht,dt,vt,yt,gt,xt,ft,pt,mt,_t,St,Et,kt,wt;const bt=_e.state;tt=_e.next_in,kt=_e.input,nt=tt+(_e.avail_in-5),rt=_e.next_out,wt=_e.output,it=rt-(et-_e.avail_out),ot=rt+(_e.avail_out-257),lt=bt.dmax,st=bt.wsize,at=bt.whave,ut=bt.wnext,ct=bt.window,ht=bt.hold,dt=bt.bits,vt=bt.lencode,yt=bt.distcode,gt=(1<<bt.lenbits)-1,xt=(1<<bt.distbits)-1;e:do{dt<15&&(ht+=kt[tt++]<<dt,dt+=8,ht+=kt[tt++]<<dt,dt+=8),ft=vt[ht&gt];t:for(;;){if(pt=ft>>>24,ht>>>=pt,dt-=pt,pt=ft>>>16&255,pt===0)wt[rt++]=ft&65535;else if(pt&16){mt=ft&65535,pt&=15,pt&&(dt<pt&&(ht+=kt[tt++]<<dt,dt+=8),mt+=ht&(1<<pt)-1,ht>>>=pt,dt-=pt),dt<15&&(ht+=kt[tt++]<<dt,dt+=8,ht+=kt[tt++]<<dt,dt+=8),ft=yt[ht&xt];n:for(;;){if(pt=ft>>>24,ht>>>=pt,dt-=pt,pt=ft>>>16&255,pt&16){if(_t=ft&65535,pt&=15,dt<pt&&(ht+=kt[tt++]<<dt,dt+=8,dt<pt&&(ht+=kt[tt++]<<dt,dt+=8)),_t+=ht&(1<<pt)-1,_t>lt){_e.msg="invalid distance too far back",bt.mode=BAD$1;break e}if(ht>>>=pt,dt-=pt,pt=rt-it,_t>pt){if(pt=_t-pt,pt>at&&bt.sane){_e.msg="invalid distance too far back",bt.mode=BAD$1;break e}if(St=0,Et=ct,ut===0){if(St+=st-pt,pt<mt){mt-=pt;do wt[rt++]=ct[St++];while(--pt);St=rt-_t,Et=wt}}else if(ut<pt){if(St+=st+ut-pt,pt-=ut,pt<mt){mt-=pt;do wt[rt++]=ct[St++];while(--pt);if(St=0,ut<mt){pt=ut,mt-=pt;do wt[rt++]=ct[St++];while(--pt);St=rt-_t,Et=wt}}}else if(St+=ut-pt,pt<mt){mt-=pt;do wt[rt++]=ct[St++];while(--pt);St=rt-_t,Et=wt}for(;mt>2;)wt[rt++]=Et[St++],wt[rt++]=Et[St++],wt[rt++]=Et[St++],mt-=3;mt&&(wt[rt++]=Et[St++],mt>1&&(wt[rt++]=Et[St++]))}else{St=rt-_t;do wt[rt++]=wt[St++],wt[rt++]=wt[St++],wt[rt++]=wt[St++],mt-=3;while(mt>2);mt&&(wt[rt++]=wt[St++],mt>1&&(wt[rt++]=wt[St++]))}}else if(pt&64){_e.msg="invalid distance code",bt.mode=BAD$1;break e}else{ft=yt[(ft&65535)+(ht&(1<<pt)-1)];continue n}break}}else if(pt&64)if(pt&32){bt.mode=TYPE$1;break e}else{_e.msg="invalid literal/length code",bt.mode=BAD$1;break e}else{ft=vt[(ft&65535)+(ht&(1<<pt)-1)];continue t}break}}while(tt<nt&&rt<ot);mt=dt>>3,tt-=mt,dt-=mt<<3,ht&=(1<<dt)-1,_e.next_in=tt,_e.next_out=rt,_e.avail_in=tt<nt?5+(nt-tt):5-(tt-nt),_e.avail_out=rt<ot?257+(ot-rt):257-(rt-ot),bt.hold=ht,bt.bits=dt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(_,_e,et,tt,nt,rt,it,ot)=>{const lt=ot.bits;let st=0,at=0,ut=0,ct=0,ht=0,dt=0,vt=0,yt=0,gt=0,xt=0,ft,pt,mt,_t,St,Et=null,kt;const wt=new Uint16Array(MAXBITS+1),bt=new Uint16Array(MAXBITS+1);let Mt=null,Rt,It,$t;for(st=0;st<=MAXBITS;st++)wt[st]=0;for(at=0;at<tt;at++)wt[_e[et+at]]++;for(ht=lt,ct=MAXBITS;ct>=1&&wt[ct]===0;ct--);if(ht>ct&&(ht=ct),ct===0)return nt[rt++]=1<<24|64<<16|0,nt[rt++]=1<<24|64<<16|0,ot.bits=1,0;for(ut=1;ut<ct&&wt[ut]===0;ut++);for(ht<ut&&(ht=ut),yt=1,st=1;st<=MAXBITS;st++)if(yt<<=1,yt-=wt[st],yt<0)return-1;if(yt>0&&(_===CODES$1||ct!==1))return-1;for(bt[1]=0,st=1;st<MAXBITS;st++)bt[st+1]=bt[st]+wt[st];for(at=0;at<tt;at++)_e[et+at]!==0&&(it[bt[_e[et+at]]++]=at);if(_===CODES$1?(Et=Mt=it,kt=20):_===LENS$1?(Et=lbase,Mt=lext,kt=257):(Et=dbase,Mt=dext,kt=0),xt=0,at=0,st=ut,St=rt,dt=ht,vt=0,mt=-1,gt=1<<ht,_t=gt-1,_===LENS$1&&gt>ENOUGH_LENS$1||_===DISTS$1&&gt>ENOUGH_DISTS$1)return 1;for(;;){Rt=st-vt,it[at]+1<kt?(It=0,$t=it[at]):it[at]>=kt?(It=Mt[it[at]-kt],$t=Et[it[at]-kt]):(It=32+64,$t=0),ft=1<<st-vt,pt=1<<dt,ut=pt;do pt-=ft,nt[St+(xt>>vt)+pt]=Rt<<24|It<<16|$t|0;while(pt!==0);for(ft=1<<st-1;xt&ft;)ft>>=1;if(ft!==0?(xt&=ft-1,xt+=ft):xt=0,at++,--wt[st]===0){if(st===ct)break;st=_e[et+it[at]]}if(st>ht&&(xt&_t)!==mt){for(vt===0&&(vt=ht),St+=ut,dt=st-vt,yt=1<<dt;dt+vt<ct&&(yt-=wt[dt+vt],!(yt<=0));)dt++,yt<<=1;if(gt+=1<<dt,_===LENS$1&&gt>ENOUGH_LENS$1||_===DISTS$1&&gt>ENOUGH_DISTS$1)return 1;mt=xt&_t,nt[mt]=ht<<24|dt<<16|St-rt|0}}return xt!==0&&(nt[St+xt]=st-vt<<24|64<<16|0),ot.bits=ht,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=_=>(_>>>24&255)+(_>>>8&65280)+((_&65280)<<8)+((_&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=_=>{if(!_)return 1;const _e=_.state;return!_e||_e.strm!==_||_e.mode<HEAD||_e.mode>SYNC?1:0},inflateResetKeep=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const _e=_.state;return _.total_in=_.total_out=_e.total=0,_.msg="",_e.wrap&&(_.adler=_e.wrap&1),_e.mode=HEAD,_e.last=0,_e.havedict=0,_e.flags=-1,_e.dmax=32768,_e.head=null,_e.hold=0,_e.bits=0,_e.lencode=_e.lendyn=new Int32Array(ENOUGH_LENS),_e.distcode=_e.distdyn=new Int32Array(ENOUGH_DISTS),_e.sane=1,_e.back=-1,Z_OK$1},inflateReset=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const _e=_.state;return _e.wsize=0,_e.whave=0,_e.wnext=0,inflateResetKeep(_)},inflateReset2=(_,_e)=>{let et;if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const tt=_.state;return _e<0?(et=0,_e=-_e):(et=(_e>>4)+5,_e<48&&(_e&=15)),_e&&(_e<8||_e>15)?Z_STREAM_ERROR$1:(tt.window!==null&&tt.wbits!==_e&&(tt.window=null),tt.wrap=et,tt.wbits=_e,inflateReset(_))},inflateInit2=(_,_e)=>{if(!_)return Z_STREAM_ERROR$1;const et=new InflateState;_.state=et,et.strm=_,et.window=null,et.mode=HEAD;const tt=inflateReset2(_,_e);return tt!==Z_OK$1&&(_.state=null),tt},inflateInit=_=>inflateInit2(_,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=_=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let _e=0;for(;_e<144;)_.lens[_e++]=8;for(;_e<256;)_.lens[_e++]=9;for(;_e<280;)_.lens[_e++]=7;for(;_e<288;)_.lens[_e++]=8;for(inftrees(LENS,_.lens,0,288,lenfix,0,_.work,{bits:9}),_e=0;_e<32;)_.lens[_e++]=5;inftrees(DISTS,_.lens,0,32,distfix,0,_.work,{bits:5}),virgin=!1}_.lencode=lenfix,_.lenbits=9,_.distcode=distfix,_.distbits=5},updatewindow=(_,_e,et,tt)=>{let nt;const rt=_.state;return rt.window===null&&(rt.wsize=1<<rt.wbits,rt.wnext=0,rt.whave=0,rt.window=new Uint8Array(rt.wsize)),tt>=rt.wsize?(rt.window.set(_e.subarray(et-rt.wsize,et),0),rt.wnext=0,rt.whave=rt.wsize):(nt=rt.wsize-rt.wnext,nt>tt&&(nt=tt),rt.window.set(_e.subarray(et-tt,et-tt+nt),rt.wnext),tt-=nt,tt?(rt.window.set(_e.subarray(et-tt,et),0),rt.wnext=tt,rt.whave=rt.wsize):(rt.wnext+=nt,rt.wnext===rt.wsize&&(rt.wnext=0),rt.whave<rt.wsize&&(rt.whave+=nt))),0},inflate$2=(_,_e)=>{let et,tt,nt,rt,it,ot,lt,st,at,ut,ct,ht,dt,vt,yt=0,gt,xt,ft,pt,mt,_t,St,Et;const kt=new Uint8Array(4);let wt,bt;const Mt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(_)||!_.output||!_.input&&_.avail_in!==0)return Z_STREAM_ERROR$1;et=_.state,et.mode===TYPE&&(et.mode=TYPEDO),it=_.next_out,nt=_.output,lt=_.avail_out,rt=_.next_in,tt=_.input,ot=_.avail_in,st=et.hold,at=et.bits,ut=ot,ct=lt,Et=Z_OK$1;e:for(;;)switch(et.mode){case HEAD:if(et.wrap===0){et.mode=TYPEDO;break}for(;at<16;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(et.wrap&2&&st===35615){et.wbits===0&&(et.wbits=15),et.check=0,kt[0]=st&255,kt[1]=st>>>8&255,et.check=crc32_1(et.check,kt,2,0),st=0,at=0,et.mode=FLAGS;break}if(et.head&&(et.head.done=!1),!(et.wrap&1)||(((st&255)<<8)+(st>>8))%31){_.msg="incorrect header check",et.mode=BAD;break}if((st&15)!==Z_DEFLATED){_.msg="unknown compression method",et.mode=BAD;break}if(st>>>=4,at-=4,St=(st&15)+8,et.wbits===0&&(et.wbits=St),St>15||St>et.wbits){_.msg="invalid window size",et.mode=BAD;break}et.dmax=1<<et.wbits,et.flags=0,_.adler=et.check=1,et.mode=st&512?DICTID:TYPE,st=0,at=0;break;case FLAGS:for(;at<16;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(et.flags=st,(et.flags&255)!==Z_DEFLATED){_.msg="unknown compression method",et.mode=BAD;break}if(et.flags&57344){_.msg="unknown header flags set",et.mode=BAD;break}et.head&&(et.head.text=st>>8&1),et.flags&512&&et.wrap&4&&(kt[0]=st&255,kt[1]=st>>>8&255,et.check=crc32_1(et.check,kt,2,0)),st=0,at=0,et.mode=TIME;case TIME:for(;at<32;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.head&&(et.head.time=st),et.flags&512&&et.wrap&4&&(kt[0]=st&255,kt[1]=st>>>8&255,kt[2]=st>>>16&255,kt[3]=st>>>24&255,et.check=crc32_1(et.check,kt,4,0)),st=0,at=0,et.mode=OS;case OS:for(;at<16;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.head&&(et.head.xflags=st&255,et.head.os=st>>8),et.flags&512&&et.wrap&4&&(kt[0]=st&255,kt[1]=st>>>8&255,et.check=crc32_1(et.check,kt,2,0)),st=0,at=0,et.mode=EXLEN;case EXLEN:if(et.flags&1024){for(;at<16;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.length=st,et.head&&(et.head.extra_len=st),et.flags&512&&et.wrap&4&&(kt[0]=st&255,kt[1]=st>>>8&255,et.check=crc32_1(et.check,kt,2,0)),st=0,at=0}else et.head&&(et.head.extra=null);et.mode=EXTRA;case EXTRA:if(et.flags&1024&&(ht=et.length,ht>ot&&(ht=ot),ht&&(et.head&&(St=et.head.extra_len-et.length,et.head.extra||(et.head.extra=new Uint8Array(et.head.extra_len)),et.head.extra.set(tt.subarray(rt,rt+ht),St)),et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,ht,rt)),ot-=ht,rt+=ht,et.length-=ht),et.length))break e;et.length=0,et.mode=NAME;case NAME:if(et.flags&2048){if(ot===0)break e;ht=0;do St=tt[rt+ht++],et.head&&St&&et.length<65536&&(et.head.name+=String.fromCharCode(St));while(St&&ht<ot);if(et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,ht,rt)),ot-=ht,rt+=ht,St)break e}else et.head&&(et.head.name=null);et.length=0,et.mode=COMMENT;case COMMENT:if(et.flags&4096){if(ot===0)break e;ht=0;do St=tt[rt+ht++],et.head&&St&&et.length<65536&&(et.head.comment+=String.fromCharCode(St));while(St&&ht<ot);if(et.flags&512&&et.wrap&4&&(et.check=crc32_1(et.check,tt,ht,rt)),ot-=ht,rt+=ht,St)break e}else et.head&&(et.head.comment=null);et.mode=HCRC;case HCRC:if(et.flags&512){for(;at<16;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(et.wrap&4&&st!==(et.check&65535)){_.msg="header crc mismatch",et.mode=BAD;break}st=0,at=0}et.head&&(et.head.hcrc=et.flags>>9&1,et.head.done=!0),_.adler=et.check=0,et.mode=TYPE;break;case DICTID:for(;at<32;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}_.adler=et.check=zswap32(st),st=0,at=0,et.mode=DICT;case DICT:if(et.havedict===0)return _.next_out=it,_.avail_out=lt,_.next_in=rt,_.avail_in=ot,et.hold=st,et.bits=at,Z_NEED_DICT$1;_.adler=et.check=1,et.mode=TYPE;case TYPE:if(_e===Z_BLOCK||_e===Z_TREES)break e;case TYPEDO:if(et.last){st>>>=at&7,at-=at&7,et.mode=CHECK;break}for(;at<3;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}switch(et.last=st&1,st>>>=1,at-=1,st&3){case 0:et.mode=STORED;break;case 1:if(fixedtables(et),et.mode=LEN_,_e===Z_TREES){st>>>=2,at-=2;break e}break;case 2:et.mode=TABLE;break;case 3:_.msg="invalid block type",et.mode=BAD}st>>>=2,at-=2;break;case STORED:for(st>>>=at&7,at-=at&7;at<32;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if((st&65535)!==(st>>>16^65535)){_.msg="invalid stored block lengths",et.mode=BAD;break}if(et.length=st&65535,st=0,at=0,et.mode=COPY_,_e===Z_TREES)break e;case COPY_:et.mode=COPY;case COPY:if(ht=et.length,ht){if(ht>ot&&(ht=ot),ht>lt&&(ht=lt),ht===0)break e;nt.set(tt.subarray(rt,rt+ht),it),ot-=ht,rt+=ht,lt-=ht,it+=ht,et.length-=ht;break}et.mode=TYPE;break;case TABLE:for(;at<14;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(et.nlen=(st&31)+257,st>>>=5,at-=5,et.ndist=(st&31)+1,st>>>=5,at-=5,et.ncode=(st&15)+4,st>>>=4,at-=4,et.nlen>286||et.ndist>30){_.msg="too many length or distance symbols",et.mode=BAD;break}et.have=0,et.mode=LENLENS;case LENLENS:for(;et.have<et.ncode;){for(;at<3;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.lens[Mt[et.have++]]=st&7,st>>>=3,at-=3}for(;et.have<19;)et.lens[Mt[et.have++]]=0;if(et.lencode=et.lendyn,et.lenbits=7,wt={bits:et.lenbits},Et=inftrees(CODES,et.lens,0,19,et.lencode,0,et.work,wt),et.lenbits=wt.bits,Et){_.msg="invalid code lengths set",et.mode=BAD;break}et.have=0,et.mode=CODELENS;case CODELENS:for(;et.have<et.nlen+et.ndist;){for(;yt=et.lencode[st&(1<<et.lenbits)-1],gt=yt>>>24,xt=yt>>>16&255,ft=yt&65535,!(gt<=at);){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(ft<16)st>>>=gt,at-=gt,et.lens[et.have++]=ft;else{if(ft===16){for(bt=gt+2;at<bt;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(st>>>=gt,at-=gt,et.have===0){_.msg="invalid bit length repeat",et.mode=BAD;break}St=et.lens[et.have-1],ht=3+(st&3),st>>>=2,at-=2}else if(ft===17){for(bt=gt+3;at<bt;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}st>>>=gt,at-=gt,St=0,ht=3+(st&7),st>>>=3,at-=3}else{for(bt=gt+7;at<bt;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}st>>>=gt,at-=gt,St=0,ht=11+(st&127),st>>>=7,at-=7}if(et.have+ht>et.nlen+et.ndist){_.msg="invalid bit length repeat",et.mode=BAD;break}for(;ht--;)et.lens[et.have++]=St}}if(et.mode===BAD)break;if(et.lens[256]===0){_.msg="invalid code -- missing end-of-block",et.mode=BAD;break}if(et.lenbits=9,wt={bits:et.lenbits},Et=inftrees(LENS,et.lens,0,et.nlen,et.lencode,0,et.work,wt),et.lenbits=wt.bits,Et){_.msg="invalid literal/lengths set",et.mode=BAD;break}if(et.distbits=6,et.distcode=et.distdyn,wt={bits:et.distbits},Et=inftrees(DISTS,et.lens,et.nlen,et.ndist,et.distcode,0,et.work,wt),et.distbits=wt.bits,Et){_.msg="invalid distances set",et.mode=BAD;break}if(et.mode=LEN_,_e===Z_TREES)break e;case LEN_:et.mode=LEN;case LEN:if(ot>=6&&lt>=258){_.next_out=it,_.avail_out=lt,_.next_in=rt,_.avail_in=ot,et.hold=st,et.bits=at,inffast(_,ct),it=_.next_out,nt=_.output,lt=_.avail_out,rt=_.next_in,tt=_.input,ot=_.avail_in,st=et.hold,at=et.bits,et.mode===TYPE&&(et.back=-1);break}for(et.back=0;yt=et.lencode[st&(1<<et.lenbits)-1],gt=yt>>>24,xt=yt>>>16&255,ft=yt&65535,!(gt<=at);){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(xt&&!(xt&240)){for(pt=gt,mt=xt,_t=ft;yt=et.lencode[_t+((st&(1<<pt+mt)-1)>>pt)],gt=yt>>>24,xt=yt>>>16&255,ft=yt&65535,!(pt+gt<=at);){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}st>>>=pt,at-=pt,et.back+=pt}if(st>>>=gt,at-=gt,et.back+=gt,et.length=ft,xt===0){et.mode=LIT;break}if(xt&32){et.back=-1,et.mode=TYPE;break}if(xt&64){_.msg="invalid literal/length code",et.mode=BAD;break}et.extra=xt&15,et.mode=LENEXT;case LENEXT:if(et.extra){for(bt=et.extra;at<bt;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.length+=st&(1<<et.extra)-1,st>>>=et.extra,at-=et.extra,et.back+=et.extra}et.was=et.length,et.mode=DIST;case DIST:for(;yt=et.distcode[st&(1<<et.distbits)-1],gt=yt>>>24,xt=yt>>>16&255,ft=yt&65535,!(gt<=at);){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(!(xt&240)){for(pt=gt,mt=xt,_t=ft;yt=et.distcode[_t+((st&(1<<pt+mt)-1)>>pt)],gt=yt>>>24,xt=yt>>>16&255,ft=yt&65535,!(pt+gt<=at);){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}st>>>=pt,at-=pt,et.back+=pt}if(st>>>=gt,at-=gt,et.back+=gt,xt&64){_.msg="invalid distance code",et.mode=BAD;break}et.offset=ft,et.extra=xt&15,et.mode=DISTEXT;case DISTEXT:if(et.extra){for(bt=et.extra;at<bt;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}et.offset+=st&(1<<et.extra)-1,st>>>=et.extra,at-=et.extra,et.back+=et.extra}if(et.offset>et.dmax){_.msg="invalid distance too far back",et.mode=BAD;break}et.mode=MATCH;case MATCH:if(lt===0)break e;if(ht=ct-lt,et.offset>ht){if(ht=et.offset-ht,ht>et.whave&&et.sane){_.msg="invalid distance too far back",et.mode=BAD;break}ht>et.wnext?(ht-=et.wnext,dt=et.wsize-ht):dt=et.wnext-ht,ht>et.length&&(ht=et.length),vt=et.window}else vt=nt,dt=it-et.offset,ht=et.length;ht>lt&&(ht=lt),lt-=ht,et.length-=ht;do nt[it++]=vt[dt++];while(--ht);et.length===0&&(et.mode=LEN);break;case LIT:if(lt===0)break e;nt[it++]=et.length,lt--,et.mode=LEN;break;case CHECK:if(et.wrap){for(;at<32;){if(ot===0)break e;ot--,st|=tt[rt++]<<at,at+=8}if(ct-=lt,_.total_out+=ct,et.total+=ct,et.wrap&4&&ct&&(_.adler=et.check=et.flags?crc32_1(et.check,nt,ct,it-ct):adler32_1(et.check,nt,ct,it-ct)),ct=lt,et.wrap&4&&(et.flags?st:zswap32(st))!==et.check){_.msg="incorrect data check",et.mode=BAD;break}st=0,at=0}et.mode=LENGTH;case LENGTH:if(et.wrap&&et.flags){for(;at<32;){if(ot===0)break e;ot--,st+=tt[rt++]<<at,at+=8}if(et.wrap&4&&st!==(et.total&4294967295)){_.msg="incorrect length check",et.mode=BAD;break}st=0,at=0}et.mode=DONE;case DONE:Et=Z_STREAM_END$1;break e;case BAD:Et=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return _.next_out=it,_.avail_out=lt,_.next_in=rt,_.avail_in=ot,et.hold=st,et.bits=at,(et.wsize||ct!==_.avail_out&&et.mode<BAD&&(et.mode<CHECK||_e!==Z_FINISH$1))&&updatewindow(_,_.output,_.next_out,ct-_.avail_out),ut-=_.avail_in,ct-=_.avail_out,_.total_in+=ut,_.total_out+=ct,et.total+=ct,et.wrap&4&&ct&&(_.adler=et.check=et.flags?crc32_1(et.check,nt,ct,_.next_out-ct):adler32_1(et.check,nt,ct,_.next_out-ct)),_.data_type=et.bits+(et.last?64:0)+(et.mode===TYPE?128:0)+(et.mode===LEN_||et.mode===COPY_?256:0),(ut===0&&ct===0||_e===Z_FINISH$1)&&Et===Z_OK$1&&(Et=Z_BUF_ERROR),Et},inflateEnd=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;let _e=_.state;return _e.window&&(_e.window=null),_.state=null,Z_OK$1},inflateGetHeader=(_,_e)=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const et=_.state;return et.wrap&2?(et.head=_e,_e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(_,_e)=>{const et=_e.length;let tt,nt,rt;return inflateStateCheck(_)||(tt=_.state,tt.wrap!==0&&tt.mode!==DICT)?Z_STREAM_ERROR$1:tt.mode===DICT&&(nt=1,nt=adler32_1(nt,_e,et,0),nt!==tt.check)?Z_DATA_ERROR$1:(rt=updatewindow(_,_e,et,et),rt?(tt.mode=MEM,Z_MEM_ERROR$1):(tt.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(_){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const _e=this.options;_e.raw&&_e.windowBits>=0&&_e.windowBits<16&&(_e.windowBits=-_e.windowBits,_e.windowBits===0&&(_e.windowBits=-15)),_e.windowBits>=0&&_e.windowBits<16&&!(_&&_.windowBits)&&(_e.windowBits+=32),_e.windowBits>15&&_e.windowBits<48&&(_e.windowBits&15||(_e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let et=inflate_1$2.inflateInit2(this.strm,_e.windowBits);if(et!==Z_OK)throw new Error(messages[et]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),_e.dictionary&&(typeof _e.dictionary=="string"?_e.dictionary=strings.string2buf(_e.dictionary):toString.call(_e.dictionary)==="[object ArrayBuffer]"&&(_e.dictionary=new Uint8Array(_e.dictionary)),_e.raw&&(et=inflate_1$2.inflateSetDictionary(this.strm,_e.dictionary),et!==Z_OK)))throw new Error(messages[et])}Inflate$1.prototype.push=function(_,_e){const et=this.strm,tt=this.options.chunkSize,nt=this.options.dictionary;let rt,it,ot;if(this.ended)return!1;for(_e===~~_e?it=_e:it=_e===!0?Z_FINISH:Z_NO_FLUSH,toString.call(_)==="[object ArrayBuffer]"?et.input=new Uint8Array(_):et.input=_,et.next_in=0,et.avail_in=et.input.length;;){for(et.avail_out===0&&(et.output=new Uint8Array(tt),et.next_out=0,et.avail_out=tt),rt=inflate_1$2.inflate(et,it),rt===Z_NEED_DICT&&nt&&(rt=inflate_1$2.inflateSetDictionary(et,nt),rt===Z_OK?rt=inflate_1$2.inflate(et,it):rt===Z_DATA_ERROR&&(rt=Z_NEED_DICT));et.avail_in>0&&rt===Z_STREAM_END&&et.state.wrap>0&&_[et.next_in]!==0;)inflate_1$2.inflateReset(et),rt=inflate_1$2.inflate(et,it);switch(rt){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(rt),this.ended=!0,!1}if(ot=et.avail_out,et.next_out&&(et.avail_out===0||rt===Z_STREAM_END))if(this.options.to==="string"){let lt=strings.utf8border(et.output,et.next_out),st=et.next_out-lt,at=strings.buf2string(et.output,lt);et.next_out=st,et.avail_out=tt-st,st&&et.output.set(et.output.subarray(lt,lt+st),0),this.onData(at)}else this.onData(et.output.length===et.next_out?et.output:et.output.subarray(0,et.next_out));if(!(rt===Z_OK&&ot===0)){if(rt===Z_STREAM_END)return rt=inflate_1$2.inflateEnd(this.strm),this.onEnd(rt),this.ended=!0,!0;if(et.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(_){this.chunks.push(_)};Inflate$1.prototype.onEnd=function(_){_===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function inflate$1(_,_e){const et=new Inflate$1(_e);if(et.push(_),et.err)throw et.msg||messages[et.err];return et.result}function inflateRaw$1(_,_e){return _e=_e||{},_e.raw=!0,inflate$1(_,_e)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;function decompressZlib(_){const _e=new Uint8Array(_.buffer,_.byteOffset,_.byteLength),et=inflate_1(_e);return new DataView(et.buffer,et.byteOffset,et.byteLength)}const defaultOptions={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer{constructor(_e){super(_e),this._nextIFD=0}get isMultiPage(){let _e=0;for(this.decodeHeader();this._nextIFD;)if(_e++,this.decodeIFD({ignoreImageData:!0},!0),_e===2)return!0;if(_e===1)return!1;throw unsupported("ifdCount",_e)}get pageCount(){let _e=0;for(this.decodeHeader();this._nextIFD;)_e++,this.decodeIFD({ignoreImageData:!0},!0);if(_e>0)return _e;throw unsupported("ifdCount",_e)}decode(_e={}){_e=Object.assign({},defaultOptions,_e);const et=[];for(this.decodeHeader();this._nextIFD;)if(et.push(this.decodeIFD(_e,!0)),_e.onlyFirst)return[et[0]];return et}decodeHeader(){const _e=this.readUint16();if(_e===18761)this.setLittleEndian();else if(_e===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${_e.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(_e,et){this.seek(this._nextIFD);let tt;if(et)tt=new TiffIfd;else{if(!_e.kind)throw new Error("kind is missing");tt=new IFD(_e.kind)}const nt=this.readUint16();for(let rt=0;rt<nt;rt++)this.decodeIFDEntry(tt);if(!_e.ignoreImageData){if(!(tt instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(tt)}return this._nextIFD=this.readUint32(),tt}decodeIFDEntry(_e){const et=this.offset,tt=this.readUint16(),nt=this.readUint16(),rt=this.readUint32();if(nt<1||nt>12){this.skip(4);return}getByteLength(nt,rt)>4&&this.seek(this.readUint32());const ot=readData(this,nt,rt);if(_e.fields.set(tt,ot),tt===34665||tt===34853){let lt=this.offset,st="exif";tt===34665?st="exif":tt===34853&&(st="gps"),this._nextIFD=ot,_e[st]=this.decodeIFD({kind:st,ignoreImageData:!0},!1),this.offset=lt}this.seek(et),this.skip(12)}decodeImageData(_e){const et=_e.orientation;if(et&&et!==1)throw unsupported("orientation",et);switch(_e.type){case 0:case 1:case 2:case 3:this.readStripData(_e);break;default:throw unsupported("image type",_e.type)}if(this.applyPredictor(_e),this.convertAlpha(_e),_e.type===0){const tt=_e.bitsPerSample,nt=Math.pow(2,tt)-1;for(let rt=0;rt<_e.data.length;rt++)_e.data[rt]=nt-_e.data[rt]}}readStripData(_e){const et=_e.width,tt=_e.height,nt=_e.bitsPerSample,rt=_e.sampleFormat,it=et*tt*_e.samplesPerPixel,ot=getDataArray(it,nt,rt),st=_e.rowsPerStrip*et*_e.samplesPerPixel,at=_e.stripOffsets,ut=_e.stripByteCounts||guessStripByteCounts(_e);let ct=it,ht=0;for(let dt=0;dt<at.length;dt++){let vt=new DataView(this.buffer,this.byteOffset+at[dt],ut[dt]),yt=ct>st?st:ct;ct-=yt;let gt=vt;switch(_e.compression){case 1:break;case 5:{gt=decompressLzw(vt);break}case 8:{gt=decompressZlib(vt);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",_e.compression)}ht=this.fillUncompressed(nt,rt,ot,gt,ht,yt)}_e.data=ot}fillUncompressed(_e,et,tt,nt,rt,it){if(_e===8)return fill8bit(tt,nt,rt,it);if(_e===16)return fill16bit(tt,nt,rt,it,this.isLittleEndian());if(_e===32&&et===3)return fillFloat32(tt,nt,rt,it,this.isLittleEndian());throw unsupported("bitDepth",_e)}applyPredictor(_e){const et=_e.bitsPerSample;switch(_e.predictor){case 1:break;case 2:{if(et===8)applyHorizontalDifferencing8Bit(_e.data,_e.width,_e.components);else if(et===16)applyHorizontalDifferencing16Bit(_e.data,_e.width,_e.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${et}`);break}default:throw new Error(`invalid predictor: ${_e.predictor}`)}}convertAlpha(_e){if(_e.alpha&&_e.associatedAlpha){const{data:et,components:tt,maxSampleValue:nt}=_e;for(let rt=0;rt<et.length;rt+=tt){const it=et[rt+tt-1];for(let ot=0;ot<tt-1;ot++)et[rt+ot]=Math.round(et[rt+ot]*nt/it)}}}}function getDataArray(_,_e,et){if(_e===8)return new Uint8Array(_);if(_e===16)return new Uint16Array(_);if(_e===32&&et===3)return new Float32Array(_);throw unsupported("bit depth / sample format",`${_e} / ${et}`)}function fill8bit(_,_e,et,tt){for(let nt=0;nt<tt;nt++)_[et++]=_e.getUint8(nt);return et}function fill16bit(_,_e,et,tt,nt){for(let rt=0;rt<tt*2;rt+=2)_[et++]=_e.getUint16(rt,nt);return et}function fillFloat32(_,_e,et,tt,nt){for(let rt=0;rt<tt*4;rt+=4)_[et++]=_e.getFloat32(rt,nt);return et}function unsupported(_,_e){return new Error(`Unsupported ${_}: ${_e}`)}function decodeTIFF(_,_e){return new TIFFDecoder(_).decode(_e)}function decode$2(_){const _e=new IOBuffer(_),et={};if(_e.setBigEndian(),_e.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(_e.readUint16()===65505){_e.skip(2);const rt=_e.readBytes(6);rt[0]===69&&rt[1]===120&&rt[2]===105&&rt[3]===102&&rt[4]===0&&rt[5]===0&&(et.exif=decodeTIFF(new Uint8Array(_e.buffer,_e.byteOffset+12,_e.byteLength-12),{onlyFirst:!0,ignoreImageData:!0}))}return et}var encoder={exports:{}};(function(_){function _e(tt){var nt=Math.floor,rt=new Array(64),it=new Array(64),ot=new Array(64),lt=new Array(64),st,at,ut,ct,ht=new Array(65535),dt=new Array(65535),vt=new Array(64),yt=new Array(64),gt=[],xt=0,ft=7,pt=new Array(64),mt=new Array(64),_t=new Array(64),St=new Array(256),Et=new Array(2048),kt,wt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],bt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mt=[0,1,2,3,4,5,6,7,8,9,10,11],Rt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],It=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$t=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ft=[0,1,2,3,4,5,6,7,8,9,10,11],Lt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Tt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Dt(Ct){for(var Kt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Wt=0;Wt<64;Wt++){var Qt=nt((Kt[Wt]*Ct+50)/100);Qt<1?Qt=1:Qt>255&&(Qt=255),rt[wt[Wt]]=Qt}for(var ln=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],gn=0;gn<64;gn++){var fn=nt((ln[gn]*Ct+50)/100);fn<1?fn=1:fn>255&&(fn=255),it[wt[gn]]=fn}for(var Ht=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gt=0,Xt=0;Xt<8;Xt++)for(var Yt=0;Yt<8;Yt++)ot[Gt]=1/(rt[wt[Gt]]*Ht[Xt]*Ht[Yt]*8),lt[Gt]=1/(it[wt[Gt]]*Ht[Xt]*Ht[Yt]*8),Gt++}function At(Ct,Kt){for(var Wt=0,Qt=0,ln=new Array,gn=1;gn<=16;gn++){for(var fn=1;fn<=Ct[gn];fn++)ln[Kt[Qt]]=[],ln[Kt[Qt]][0]=Wt,ln[Kt[Qt]][1]=gn,Qt++,Wt++;Wt*=2}return ln}function zt(){st=At(bt,Mt),at=At($t,Ft),ut=At(Rt,It),ct=At(Lt,Tt)}function jt(){for(var Ct=1,Kt=2,Wt=1;Wt<=15;Wt++){for(var Qt=Ct;Qt<Kt;Qt++)dt[32767+Qt]=Wt,ht[32767+Qt]=[],ht[32767+Qt][1]=Wt,ht[32767+Qt][0]=Qt;for(var ln=-(Kt-1);ln<=-Ct;ln++)dt[32767+ln]=Wt,ht[32767+ln]=[],ht[32767+ln][1]=Wt,ht[32767+ln][0]=Kt-1+ln;Ct<<=1,Kt<<=1}}function Nt(){for(var Ct=0;Ct<256;Ct++)Et[Ct]=19595*Ct,Et[Ct+256>>0]=38470*Ct,Et[Ct+512>>0]=7471*Ct+32768,Et[Ct+768>>0]=-11059*Ct,Et[Ct+1024>>0]=-21709*Ct,Et[Ct+1280>>0]=32768*Ct+8421375,Et[Ct+1536>>0]=-27439*Ct,Et[Ct+1792>>0]=-5329*Ct}function Pt(Ct){for(var Kt=Ct[0],Wt=Ct[1]-1;Wt>=0;)Kt&1<<Wt&&(xt|=1<<ft),Wt--,ft--,ft<0&&(xt==255?(Ot(255),Ot(0)):Ot(xt),ft=7,xt=0)}function Ot(Ct){gt.push(Ct)}function Vt(Ct){Ot(Ct>>8&255),Ot(Ct&255)}function Zt(Ct,Kt){var Wt,Qt,ln,gn,fn,Ht,Gt,Xt,Yt=0,nn,dn=8,Jt=64;for(nn=0;nn<dn;++nn){Wt=Ct[Yt],Qt=Ct[Yt+1],ln=Ct[Yt+2],gn=Ct[Yt+3],fn=Ct[Yt+4],Ht=Ct[Yt+5],Gt=Ct[Yt+6],Xt=Ct[Yt+7];var hn=Wt+Xt,cn=Wt-Xt,wn=Qt+Gt,xn=Qt-Gt,mn=ln+Ht,vn=ln-Ht,Tn=gn+fn,Dn=gn-fn,yn=hn+Tn,En=hn-Tn,bn=wn+mn,_n=wn-mn;Ct[Yt]=yn+bn,Ct[Yt+4]=yn-bn;var Sn=(_n+En)*.707106781;Ct[Yt+2]=En+Sn,Ct[Yt+6]=En-Sn,yn=Dn+vn,bn=vn+xn,_n=xn+cn;var kn=(yn-_n)*.382683433,Mn=.5411961*yn+kn,Pn=1.306562965*_n+kn,Nn=bn*.707106781,Bn=cn+Nn,Fn=cn-Nn;Ct[Yt+5]=Fn+Mn,Ct[Yt+3]=Fn-Mn,Ct[Yt+1]=Bn+Pn,Ct[Yt+7]=Bn-Pn,Yt+=8}for(Yt=0,nn=0;nn<dn;++nn){Wt=Ct[Yt],Qt=Ct[Yt+8],ln=Ct[Yt+16],gn=Ct[Yt+24],fn=Ct[Yt+32],Ht=Ct[Yt+40],Gt=Ct[Yt+48],Xt=Ct[Yt+56];var zn=Wt+Xt,$n=Wt-Xt,Ln=Qt+Gt,jn=Qt-Gt,Vn=ln+Ht,Un=ln-Ht,Hn=gn+fn,qn=gn-fn,Rn=zn+Hn,On=zn-Hn,Cn=Ln+Vn,In=Ln-Vn;Ct[Yt]=Rn+Cn,Ct[Yt+32]=Rn-Cn;var Zn=(In+On)*.707106781;Ct[Yt+16]=On+Zn,Ct[Yt+48]=On-Zn,Rn=qn+Un,Cn=Un+jn,In=jn+$n;var Yn=(Rn-In)*.382683433,Gn=.5411961*Rn+Yn,Kn=1.306562965*In+Yn,Wn=Cn*.707106781,Xn=$n+Wn,Qn=$n-Wn;Ct[Yt+40]=Qn+Gn,Ct[Yt+24]=Qn-Gn,Ct[Yt+8]=Xn+Kn,Ct[Yt+56]=Xn-Kn,Yt++}var An;for(nn=0;nn<Jt;++nn)An=Ct[nn]*Kt[nn],vt[nn]=An>0?An+.5|0:An-.5|0;return vt}function un(){Vt(65504),Vt(16),Ot(74),Ot(70),Ot(73),Ot(70),Ot(0),Ot(1),Ot(1),Ot(0),Vt(1),Vt(1),Ot(0),Ot(0)}function en(Ct){if(Ct){Vt(65505),Ct[0]===69&&Ct[1]===120&&Ct[2]===105&&Ct[3]===102?Vt(Ct.length+2):(Vt(Ct.length+5+2),Ot(69),Ot(120),Ot(105),Ot(102),Ot(0));for(var Kt=0;Kt<Ct.length;Kt++)Ot(Ct[Kt])}}function sn(Ct,Kt){Vt(65472),Vt(17),Ot(8),Vt(Kt),Vt(Ct),Ot(3),Ot(1),Ot(17),Ot(0),Ot(2),Ot(17),Ot(1),Ot(3),Ot(17),Ot(1)}function rn(){Vt(65499),Vt(132),Ot(0);for(var Ct=0;Ct<64;Ct++)Ot(rt[Ct]);Ot(1);for(var Kt=0;Kt<64;Kt++)Ot(it[Kt])}function pn(){Vt(65476),Vt(418),Ot(0);for(var Ct=0;Ct<16;Ct++)Ot(bt[Ct+1]);for(var Kt=0;Kt<=11;Kt++)Ot(Mt[Kt]);Ot(16);for(var Wt=0;Wt<16;Wt++)Ot(Rt[Wt+1]);for(var Qt=0;Qt<=161;Qt++)Ot(It[Qt]);Ot(1);for(var ln=0;ln<16;ln++)Ot($t[ln+1]);for(var gn=0;gn<=11;gn++)Ot(Ft[gn]);Ot(17);for(var fn=0;fn<16;fn++)Ot(Lt[fn+1]);for(var Ht=0;Ht<=161;Ht++)Ot(Tt[Ht])}function on(Ct){typeof Ct>"u"||Ct.constructor!==Array||Ct.forEach(Kt=>{if(typeof Kt=="string"){Vt(65534);var Wt=Kt.length;Vt(Wt+2);var Qt;for(Qt=0;Qt<Wt;Qt++)Ot(Kt.charCodeAt(Qt))}})}function Ut(){Vt(65498),Vt(12),Ot(3),Ot(1),Ot(0),Ot(2),Ot(17),Ot(3),Ot(17),Ot(0),Ot(63),Ot(0)}function Bt(Ct,Kt,Wt,Qt,ln){for(var gn=ln[0],fn=ln[240],Ht,Gt=16,Xt=63,Yt=64,nn=Zt(Ct,Kt),dn=0;dn<Yt;++dn)yt[wt[dn]]=nn[dn];var Jt=yt[0]-Wt;Wt=yt[0],Jt==0?Pt(Qt[0]):(Ht=32767+Jt,Pt(Qt[dt[Ht]]),Pt(ht[Ht]));for(var hn=63;hn>0&&yt[hn]==0;hn--);if(hn==0)return Pt(gn),Wt;for(var cn=1,wn;cn<=hn;){for(var xn=cn;yt[cn]==0&&cn<=hn;++cn);var mn=cn-xn;if(mn>=Gt){wn=mn>>4;for(var vn=1;vn<=wn;++vn)Pt(fn);mn=mn&15}Ht=32767+yt[cn],Pt(ln[(mn<<4)+dt[Ht]]),Pt(ht[Ht]),cn++}return hn!=Xt&&Pt(gn),Wt}function an(){for(var Ct=String.fromCharCode,Kt=0;Kt<256;Kt++)St[Kt]=Ct(Kt)}this.encode=function(Ct,Kt){new Date().getTime(),Kt&&qt(Kt),gt=new Array,xt=0,ft=7,Vt(65496),un(),on(Ct.comments),en(Ct.exifBuffer),rn(),sn(Ct.width,Ct.height),pn(),Ut();var Wt=0,Qt=0,ln=0;xt=0,ft=7,this.encode.displayName="_encode_";for(var gn=Ct.data,fn=Ct.width,Ht=Ct.height,Gt=fn*4,Xt,Yt=0,nn,dn,Jt,hn,cn,wn,xn,mn;Yt<Ht;){for(Xt=0;Xt<Gt;){for(hn=Gt*Yt+Xt,cn=hn,wn=-1,xn=0,mn=0;mn<64;mn++)xn=mn>>3,wn=(mn&7)*4,cn=hn+xn*Gt+wn,Yt+xn>=Ht&&(cn-=Gt*(Yt+1+xn-Ht)),Xt+wn>=Gt&&(cn-=Xt+wn-Gt+4),nn=gn[cn++],dn=gn[cn++],Jt=gn[cn++],pt[mn]=(Et[nn]+Et[dn+256>>0]+Et[Jt+512>>0]>>16)-128,mt[mn]=(Et[nn+768>>0]+Et[dn+1024>>0]+Et[Jt+1280>>0]>>16)-128,_t[mn]=(Et[nn+1280>>0]+Et[dn+1536>>0]+Et[Jt+1792>>0]>>16)-128;Wt=Bt(pt,ot,Wt,st,ut),Qt=Bt(mt,lt,Qt,at,ct),ln=Bt(_t,lt,ln,at,ct),Xt+=32}Yt+=8}if(ft>=0){var vn=[];vn[1]=ft+1,vn[0]=(1<<ft+1)-1,Pt(vn)}return Vt(65497),Buffer.from(gt)};function qt(Ct){if(Ct<=0&&(Ct=1),Ct>100&&(Ct=100),kt!=Ct){var Kt=0;Ct<50?Kt=Math.floor(5e3/Ct):Kt=Math.floor(200-Ct*2),Dt(Kt),kt=Ct}}function tn(){var Ct=new Date().getTime();tt||(tt=50),an(),zt(),jt(),Nt(),qt(tt),new Date().getTime()-Ct}tn()}_.exports=et;function et(tt,nt){typeof nt>"u"&&(nt=50);var rt=new _e(nt),it=rt.encode(tt,nt);return{data:it,width:tt.width,height:tt.height}}})(encoder);var encoderExports=encoder.exports,decoder={exports:{}};(function(_){var _e=function(){var nt=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),rt=4017,it=799,ot=3406,lt=2276,st=1567,at=3784,ut=5793,ct=2896;function ht(){}function dt(mt,_t){for(var St=0,Et=[],kt,wt,bt=16;bt>0&&!mt[bt-1];)bt--;Et.push({children:[],index:0});var Mt=Et[0],Rt;for(kt=0;kt<bt;kt++){for(wt=0;wt<mt[kt];wt++){for(Mt=Et.pop(),Mt.children[Mt.index]=_t[St];Mt.index>0;){if(Et.length===0)throw new Error("Could not recreate Huffman Table");Mt=Et.pop()}for(Mt.index++,Et.push(Mt);Et.length<=kt;)Et.push(Rt={children:[],index:0}),Mt.children[Mt.index]=Rt.children,Mt=Rt;St++}kt+1<bt&&(Et.push(Rt={children:[],index:0}),Mt.children[Mt.index]=Rt.children,Mt=Rt)}return Et[0].children}function vt(mt,_t,St,Et,kt,wt,bt,Mt,Rt,It){St.precision,St.samplesPerLine,St.scanLines;var $t=St.mcusPerLine,Ft=St.progressive;St.maxH,St.maxV;var Lt=_t,Tt=0,Dt=0;function At(){if(Dt>0)return Dt--,Tt>>Dt&1;if(Tt=mt[_t++],Tt==255){var Ht=mt[_t++];if(Ht)throw new Error("unexpected marker: "+(Tt<<8|Ht).toString(16))}return Dt=7,Tt>>>7}function zt(Ht){for(var Gt=Ht,Xt;(Xt=At())!==null;){if(Gt=Gt[Xt],typeof Gt=="number")return Gt;if(typeof Gt!="object")throw new Error("invalid huffman sequence")}return null}function jt(Ht){for(var Gt=0;Ht>0;){var Xt=At();if(Xt===null)return;Gt=Gt<<1|Xt,Ht--}return Gt}function Nt(Ht){var Gt=jt(Ht);return Gt>=1<<Ht-1?Gt:Gt+(-1<<Ht)+1}function Pt(Ht,Gt){var Xt=zt(Ht.huffmanTableDC),Yt=Xt===0?0:Nt(Xt);Gt[0]=Ht.pred+=Yt;for(var nn=1;nn<64;){var dn=zt(Ht.huffmanTableAC),Jt=dn&15,hn=dn>>4;if(Jt===0){if(hn<15)break;nn+=16;continue}nn+=hn;var cn=nt[nn];Gt[cn]=Nt(Jt),nn++}}function Ot(Ht,Gt){var Xt=zt(Ht.huffmanTableDC),Yt=Xt===0?0:Nt(Xt)<<Rt;Gt[0]=Ht.pred+=Yt}function Vt(Ht,Gt){Gt[0]|=At()<<Rt}var Zt=0;function un(Ht,Gt){if(Zt>0){Zt--;return}for(var Xt=wt,Yt=bt;Xt<=Yt;){var nn=zt(Ht.huffmanTableAC),dn=nn&15,Jt=nn>>4;if(dn===0){if(Jt<15){Zt=jt(Jt)+(1<<Jt)-1;break}Xt+=16;continue}Xt+=Jt;var hn=nt[Xt];Gt[hn]=Nt(dn)*(1<<Rt),Xt++}}var en=0,sn;function rn(Ht,Gt){for(var Xt=wt,Yt=bt,nn=0;Xt<=Yt;){var dn=nt[Xt],Jt=Gt[dn]<0?-1:1;switch(en){case 0:var hn=zt(Ht.huffmanTableAC),cn=hn&15,nn=hn>>4;if(cn===0)nn<15?(Zt=jt(nn)+(1<<nn),en=4):(nn=16,en=1);else{if(cn!==1)throw new Error("invalid ACn encoding");sn=Nt(cn),en=nn?2:3}continue;case 1:case 2:Gt[dn]?Gt[dn]+=(At()<<Rt)*Jt:(nn--,nn===0&&(en=en==2?3:0));break;case 3:Gt[dn]?Gt[dn]+=(At()<<Rt)*Jt:(Gt[dn]=sn<<Rt,en=0);break;case 4:Gt[dn]&&(Gt[dn]+=(At()<<Rt)*Jt);break}Xt++}en===4&&(Zt--,Zt===0&&(en=0))}function pn(Ht,Gt,Xt,Yt,nn){var dn=Xt/$t|0,Jt=Xt%$t,hn=dn*Ht.v+Yt,cn=Jt*Ht.h+nn;Ht.blocks[hn]===void 0&&It.tolerantDecoding||Gt(Ht,Ht.blocks[hn][cn])}function on(Ht,Gt,Xt){var Yt=Xt/Ht.blocksPerLine|0,nn=Xt%Ht.blocksPerLine;Ht.blocks[Yt]===void 0&&It.tolerantDecoding||Gt(Ht,Ht.blocks[Yt][nn])}var Ut=Et.length,Bt,an,qt,tn,Ct,Kt;Ft?wt===0?Kt=Mt===0?Ot:Vt:Kt=Mt===0?un:rn:Kt=Pt;var Wt=0,Qt,ln;Ut==1?ln=Et[0].blocksPerLine*Et[0].blocksPerColumn:ln=$t*St.mcusPerColumn,kt||(kt=ln);for(var gn,fn;Wt<ln;){for(an=0;an<Ut;an++)Et[an].pred=0;if(Zt=0,Ut==1)for(Bt=Et[0],Ct=0;Ct<kt;Ct++)on(Bt,Kt,Wt),Wt++;else for(Ct=0;Ct<kt;Ct++){for(an=0;an<Ut;an++)for(Bt=Et[an],gn=Bt.h,fn=Bt.v,qt=0;qt<fn;qt++)for(tn=0;tn<gn;tn++)pn(Bt,Kt,Wt,qt,tn);if(Wt++,Wt===ln)break}if(Wt===ln)do{if(mt[_t]===255&&mt[_t+1]!==0)break;_t+=1}while(_t<mt.length-2);if(Dt=0,Qt=mt[_t]<<8|mt[_t+1],Qt<65280)throw new Error("marker was not found");if(Qt>=65488&&Qt<=65495)_t+=2;else break}return _t-Lt}function yt(mt,_t){var St=[],Et=_t.blocksPerLine,kt=_t.blocksPerColumn,wt=Et<<3,bt=new Int32Array(64),Mt=new Uint8Array(64);function Rt(jt,Nt,Pt){var Ot=_t.quantizationTable,Vt,Zt,un,en,sn,rn,pn,on,Ut,Bt=Pt,an;for(an=0;an<64;an++)Bt[an]=jt[an]*Ot[an];for(an=0;an<8;++an){var qt=8*an;if(Bt[1+qt]==0&&Bt[2+qt]==0&&Bt[3+qt]==0&&Bt[4+qt]==0&&Bt[5+qt]==0&&Bt[6+qt]==0&&Bt[7+qt]==0){Ut=ut*Bt[0+qt]+512>>10,Bt[0+qt]=Ut,Bt[1+qt]=Ut,Bt[2+qt]=Ut,Bt[3+qt]=Ut,Bt[4+qt]=Ut,Bt[5+qt]=Ut,Bt[6+qt]=Ut,Bt[7+qt]=Ut;continue}Vt=ut*Bt[0+qt]+128>>8,Zt=ut*Bt[4+qt]+128>>8,un=Bt[2+qt],en=Bt[6+qt],sn=ct*(Bt[1+qt]-Bt[7+qt])+128>>8,on=ct*(Bt[1+qt]+Bt[7+qt])+128>>8,rn=Bt[3+qt]<<4,pn=Bt[5+qt]<<4,Ut=Vt-Zt+1>>1,Vt=Vt+Zt+1>>1,Zt=Ut,Ut=un*at+en*st+128>>8,un=un*st-en*at+128>>8,en=Ut,Ut=sn-pn+1>>1,sn=sn+pn+1>>1,pn=Ut,Ut=on+rn+1>>1,rn=on-rn+1>>1,on=Ut,Ut=Vt-en+1>>1,Vt=Vt+en+1>>1,en=Ut,Ut=Zt-un+1>>1,Zt=Zt+un+1>>1,un=Ut,Ut=sn*lt+on*ot+2048>>12,sn=sn*ot-on*lt+2048>>12,on=Ut,Ut=rn*it+pn*rt+2048>>12,rn=rn*rt-pn*it+2048>>12,pn=Ut,Bt[0+qt]=Vt+on,Bt[7+qt]=Vt-on,Bt[1+qt]=Zt+pn,Bt[6+qt]=Zt-pn,Bt[2+qt]=un+rn,Bt[5+qt]=un-rn,Bt[3+qt]=en+sn,Bt[4+qt]=en-sn}for(an=0;an<8;++an){var tn=an;if(Bt[8+tn]==0&&Bt[16+tn]==0&&Bt[24+tn]==0&&Bt[32+tn]==0&&Bt[40+tn]==0&&Bt[48+tn]==0&&Bt[56+tn]==0){Ut=ut*Pt[an+0]+8192>>14,Bt[0+tn]=Ut,Bt[8+tn]=Ut,Bt[16+tn]=Ut,Bt[24+tn]=Ut,Bt[32+tn]=Ut,Bt[40+tn]=Ut,Bt[48+tn]=Ut,Bt[56+tn]=Ut;continue}Vt=ut*Bt[0+tn]+2048>>12,Zt=ut*Bt[32+tn]+2048>>12,un=Bt[16+tn],en=Bt[48+tn],sn=ct*(Bt[8+tn]-Bt[56+tn])+2048>>12,on=ct*(Bt[8+tn]+Bt[56+tn])+2048>>12,rn=Bt[24+tn],pn=Bt[40+tn],Ut=Vt-Zt+1>>1,Vt=Vt+Zt+1>>1,Zt=Ut,Ut=un*at+en*st+2048>>12,un=un*st-en*at+2048>>12,en=Ut,Ut=sn-pn+1>>1,sn=sn+pn+1>>1,pn=Ut,Ut=on+rn+1>>1,rn=on-rn+1>>1,on=Ut,Ut=Vt-en+1>>1,Vt=Vt+en+1>>1,en=Ut,Ut=Zt-un+1>>1,Zt=Zt+un+1>>1,un=Ut,Ut=sn*lt+on*ot+2048>>12,sn=sn*ot-on*lt+2048>>12,on=Ut,Ut=rn*it+pn*rt+2048>>12,rn=rn*rt-pn*it+2048>>12,pn=Ut,Bt[0+tn]=Vt+on,Bt[56+tn]=Vt-on,Bt[8+tn]=Zt+pn,Bt[48+tn]=Zt-pn,Bt[16+tn]=un+rn,Bt[40+tn]=un-rn,Bt[24+tn]=en+sn,Bt[32+tn]=en-sn}for(an=0;an<64;++an){var Ct=128+(Bt[an]+8>>4);Nt[an]=Ct<0?0:Ct>255?255:Ct}}pt(wt*kt*8);for(var It,$t,Ft=0;Ft<kt;Ft++){var Lt=Ft<<3;for(It=0;It<8;It++)St.push(new Uint8Array(wt));for(var Tt=0;Tt<Et;Tt++){Rt(_t.blocks[Ft][Tt],Mt,bt);var Dt=0,At=Tt<<3;for($t=0;$t<8;$t++){var zt=St[Lt+$t];for(It=0;It<8;It++)zt[At+It]=Mt[Dt++]}}}return St}function gt(mt){return mt<0?0:mt>255?255:mt}ht.prototype={load:function(_t){var St=new XMLHttpRequest;St.open("GET",_t,!0),St.responseType="arraybuffer",St.onload=(function(){var Et=new Uint8Array(St.response||St.mozResponseArrayBuffer);this.parse(Et),this.onload&&this.onload()}).bind(this),St.send(null)},parse:function(_t){var St=this.opts.maxResolutionInMP*1e3*1e3,Et=0;_t.length;function kt(){var Jt=_t[Et]<<8|_t[Et+1];return Et+=2,Jt}function wt(){var Jt=kt(),hn=_t.subarray(Et,Et+Jt-2);return Et+=hn.length,hn}function bt(Jt){var hn=1,cn=1,wn,xn;for(xn in Jt.components)Jt.components.hasOwnProperty(xn)&&(wn=Jt.components[xn],hn<wn.h&&(hn=wn.h),cn<wn.v&&(cn=wn.v));var mn=Math.ceil(Jt.samplesPerLine/8/hn),vn=Math.ceil(Jt.scanLines/8/cn);for(xn in Jt.components)if(Jt.components.hasOwnProperty(xn)){wn=Jt.components[xn];var Tn=Math.ceil(Math.ceil(Jt.samplesPerLine/8)*wn.h/hn),Dn=Math.ceil(Math.ceil(Jt.scanLines/8)*wn.v/cn),yn=mn*wn.h,En=vn*wn.v,bn=En*yn,_n=[];pt(bn*256);for(var Sn=0;Sn<En;Sn++){for(var kn=[],Mn=0;Mn<yn;Mn++)kn.push(new Int32Array(64));_n.push(kn)}wn.blocksPerLine=Tn,wn.blocksPerColumn=Dn,wn.blocks=_n}Jt.maxH=hn,Jt.maxV=cn,Jt.mcusPerLine=mn,Jt.mcusPerColumn=vn}var Mt=null,Rt=null,It,$t,Ft=[],Lt=[],Tt=[],Dt=[],At=kt(),zt=-1;if(this.comments=[],At!=65496)throw new Error("SOI not found");for(At=kt();At!=65497;){var jt,Nt;switch(At){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Pt=wt();if(At===65534){var Ot=String.fromCharCode.apply(null,Pt);this.comments.push(Ot)}At===65504&&Pt[0]===74&&Pt[1]===70&&Pt[2]===73&&Pt[3]===70&&Pt[4]===0&&(Mt={version:{major:Pt[5],minor:Pt[6]},densityUnits:Pt[7],xDensity:Pt[8]<<8|Pt[9],yDensity:Pt[10]<<8|Pt[11],thumbWidth:Pt[12],thumbHeight:Pt[13],thumbData:Pt.subarray(14,14+3*Pt[12]*Pt[13])}),At===65505&&Pt[0]===69&&Pt[1]===120&&Pt[2]===105&&Pt[3]===102&&Pt[4]===0&&(this.exifBuffer=Pt.subarray(5,Pt.length)),At===65518&&Pt[0]===65&&Pt[1]===100&&Pt[2]===111&&Pt[3]===98&&Pt[4]===101&&Pt[5]===0&&(Rt={version:Pt[6],flags0:Pt[7]<<8|Pt[8],flags1:Pt[9]<<8|Pt[10],transformCode:Pt[11]});break;case 65499:for(var Vt=kt(),Zt=Vt+Et-2;Et<Zt;){var un=_t[Et++];pt(256);var en=new Int32Array(64);if(un>>4)if(un>>4===1)for(Nt=0;Nt<64;Nt++){var sn=nt[Nt];en[sn]=kt()}else throw new Error("DQT: invalid table spec");else for(Nt=0;Nt<64;Nt++){var sn=nt[Nt];en[sn]=_t[Et++]}Ft[un&15]=en}break;case 65472:case 65473:case 65474:kt(),It={},It.extended=At===65473,It.progressive=At===65474,It.precision=_t[Et++],It.scanLines=kt(),It.samplesPerLine=kt(),It.components={},It.componentsOrder=[];var rn=It.scanLines*It.samplesPerLine;if(rn>St){var pn=Math.ceil((rn-St)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${pn}MP`)}var on=_t[Et++],Ut;for(jt=0;jt<on;jt++){Ut=_t[Et];var Bt=_t[Et+1]>>4,an=_t[Et+1]&15,qt=_t[Et+2];if(Bt<=0||an<=0)throw new Error("Invalid sampling factor, expected values above 0");It.componentsOrder.push(Ut),It.components[Ut]={h:Bt,v:an,quantizationIdx:qt},Et+=3}bt(It),Lt.push(It);break;case 65476:var tn=kt();for(jt=2;jt<tn;){var Ct=_t[Et++],Kt=new Uint8Array(16),Wt=0;for(Nt=0;Nt<16;Nt++,Et++)Wt+=Kt[Nt]=_t[Et];pt(16+Wt);var Qt=new Uint8Array(Wt);for(Nt=0;Nt<Wt;Nt++,Et++)Qt[Nt]=_t[Et];jt+=17+Wt,(Ct>>4?Tt:Dt)[Ct&15]=dt(Kt,Qt)}break;case 65501:kt(),$t=kt();break;case 65500:kt(),kt();break;case 65498:kt();var ln=_t[Et++],gn=[],fn;for(jt=0;jt<ln;jt++){fn=It.components[_t[Et++]];var Ht=_t[Et++];fn.huffmanTableDC=Dt[Ht>>4],fn.huffmanTableAC=Tt[Ht&15],gn.push(fn)}var Gt=_t[Et++],Xt=_t[Et++],Yt=_t[Et++],nn=vt(_t,Et,It,gn,$t,Gt,Xt,Yt>>4,Yt&15,this.opts);Et+=nn;break;case 65535:_t[Et]!==255&&Et--;break;default:if(_t[Et-3]==255&&_t[Et-2]>=192&&_t[Et-2]<=254){Et-=3;break}else if(At===224||At==225){if(zt!==-1)throw new Error(`first unknown JPEG marker at offset ${zt.toString(16)}, second unknown JPEG marker ${At.toString(16)} at offset ${(Et-1).toString(16)}`);zt=Et-1;const Jt=kt();if(_t[Et+Jt-2]===255){Et+=Jt-2;break}}throw new Error("unknown JPEG marker "+At.toString(16))}At=kt()}if(Lt.length!=1)throw new Error("only single frame JPEGs supported");for(var jt=0;jt<Lt.length;jt++){var dn=Lt[jt].components;for(var Nt in dn)dn[Nt].quantizationTable=Ft[dn[Nt].quantizationIdx],delete dn[Nt].quantizationIdx}this.width=It.samplesPerLine,this.height=It.scanLines,this.jfif=Mt,this.adobe=Rt,this.components=[];for(var jt=0;jt<It.componentsOrder.length;jt++){var fn=It.components[It.componentsOrder[jt]];this.components.push({lines:yt(It,fn),scaleX:fn.h/It.maxH,scaleY:fn.v/It.maxV})}},getData:function(_t,St){var Et=this.width/_t,kt=this.height/St,wt,bt,Mt,Rt,It,$t,Ft,Lt,Tt,Dt,At=0,zt,jt,Nt,Pt,Ot,Vt,Zt,un,en,sn,rn,pn=_t*St*this.components.length;pt(pn);var on=new Uint8Array(pn);switch(this.components.length){case 1:for(wt=this.components[0],Dt=0;Dt<St;Dt++)for(It=wt.lines[0|Dt*wt.scaleY*kt],Tt=0;Tt<_t;Tt++)zt=It[0|Tt*wt.scaleX*Et],on[At++]=zt;break;case 2:for(wt=this.components[0],bt=this.components[1],Dt=0;Dt<St;Dt++)for(It=wt.lines[0|Dt*wt.scaleY*kt],$t=bt.lines[0|Dt*bt.scaleY*kt],Tt=0;Tt<_t;Tt++)zt=It[0|Tt*wt.scaleX*Et],on[At++]=zt,zt=$t[0|Tt*bt.scaleX*Et],on[At++]=zt;break;case 3:for(rn=!0,this.adobe&&this.adobe.transformCode?rn=!0:typeof this.opts.colorTransform<"u"&&(rn=!!this.opts.colorTransform),wt=this.components[0],bt=this.components[1],Mt=this.components[2],Dt=0;Dt<St;Dt++)for(It=wt.lines[0|Dt*wt.scaleY*kt],$t=bt.lines[0|Dt*bt.scaleY*kt],Ft=Mt.lines[0|Dt*Mt.scaleY*kt],Tt=0;Tt<_t;Tt++)rn?(zt=It[0|Tt*wt.scaleX*Et],jt=$t[0|Tt*bt.scaleX*Et],Nt=Ft[0|Tt*Mt.scaleX*Et],un=gt(zt+1.402*(Nt-128)),en=gt(zt-.3441363*(jt-128)-.71413636*(Nt-128)),sn=gt(zt+1.772*(jt-128))):(un=It[0|Tt*wt.scaleX*Et],en=$t[0|Tt*bt.scaleX*Et],sn=Ft[0|Tt*Mt.scaleX*Et]),on[At++]=un,on[At++]=en,on[At++]=sn;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(rn=!1,this.adobe&&this.adobe.transformCode?rn=!0:typeof this.opts.colorTransform<"u"&&(rn=!!this.opts.colorTransform),wt=this.components[0],bt=this.components[1],Mt=this.components[2],Rt=this.components[3],Dt=0;Dt<St;Dt++)for(It=wt.lines[0|Dt*wt.scaleY*kt],$t=bt.lines[0|Dt*bt.scaleY*kt],Ft=Mt.lines[0|Dt*Mt.scaleY*kt],Lt=Rt.lines[0|Dt*Rt.scaleY*kt],Tt=0;Tt<_t;Tt++)rn?(zt=It[0|Tt*wt.scaleX*Et],jt=$t[0|Tt*bt.scaleX*Et],Nt=Ft[0|Tt*Mt.scaleX*Et],Pt=Lt[0|Tt*Rt.scaleX*Et],Ot=255-gt(zt+1.402*(Nt-128)),Vt=255-gt(zt-.3441363*(jt-128)-.71413636*(Nt-128)),Zt=255-gt(zt+1.772*(jt-128))):(Ot=It[0|Tt*wt.scaleX*Et],Vt=$t[0|Tt*bt.scaleX*Et],Zt=Ft[0|Tt*Mt.scaleX*Et],Pt=Lt[0|Tt*Rt.scaleX*Et]),on[At++]=255-Ot,on[At++]=255-Vt,on[At++]=255-Zt,on[At++]=255-Pt;break;default:throw new Error("Unsupported color mode")}return on},copyToImageData:function(_t,St){var Et=_t.width,kt=_t.height,wt=_t.data,bt=this.getData(Et,kt),Mt=0,Rt=0,It,$t,Ft,Lt,Tt,Dt,At,zt,jt;switch(this.components.length){case 1:for($t=0;$t<kt;$t++)for(It=0;It<Et;It++)Ft=bt[Mt++],wt[Rt++]=Ft,wt[Rt++]=Ft,wt[Rt++]=Ft,St&&(wt[Rt++]=255);break;case 3:for($t=0;$t<kt;$t++)for(It=0;It<Et;It++)At=bt[Mt++],zt=bt[Mt++],jt=bt[Mt++],wt[Rt++]=At,wt[Rt++]=zt,wt[Rt++]=jt,St&&(wt[Rt++]=255);break;case 4:for($t=0;$t<kt;$t++)for(It=0;It<Et;It++)Tt=bt[Mt++],Dt=bt[Mt++],Ft=bt[Mt++],Lt=bt[Mt++],At=255-gt(Tt*(1-Lt/255)+Lt),zt=255-gt(Dt*(1-Lt/255)+Lt),jt=255-gt(Ft*(1-Lt/255)+Lt),wt[Rt++]=At,wt[Rt++]=zt,wt[Rt++]=jt,St&&(wt[Rt++]=255);break;default:throw new Error("Unsupported color mode")}}};var xt=0,ft=0;function pt(mt=0){var _t=xt+mt;if(_t>ft){var St=Math.ceil((_t-ft)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${St}MB`)}xt=_t}return ht.resetMaxMemoryUsage=function(mt){xt=0,ft=mt},ht.getBytesAllocated=function(){return xt},ht.requestMemoryAllocation=pt,ht}();_.exports=et;function et(tt,nt={}){var rt={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},it={...rt,...nt},ot=new Uint8Array(tt),lt=new _e;lt.opts=it,_e.resetMaxMemoryUsage(it.maxMemoryUsageInMB*1024*1024),lt.parse(ot);var st=it.formatAsRGBA?4:3,at=lt.width*lt.height*st;try{_e.requestMemoryAllocation(at);var ut={width:lt.width,height:lt.height,exifBuffer:lt.exifBuffer,data:it.useTArray?new Uint8Array(at):Buffer.alloc(at)};lt.comments.length>0&&(ut.comments=lt.comments)}catch(ct){throw ct instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+at):ct instanceof ReferenceError&&ct.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):ct}return lt.copyToImageData(ut,it.formatAsRGBA),ut}})(decoder);var decoderExports=decoder.exports,encode=encoderExports,decode$1=decoderExports,jpegJs={encode,decode:decode$1};function getMetadata(_){return{tiff:{fields:_.fields,tags:_.map},exif:_.exif}}function decodeJpeg(_){var nt;const _e=jpegJs.decode(_,{useTArray:!0,maxMemoryUsageInMB:Number.POSITIVE_INFINITY,maxResolutionInMP:Number.POSITIVE_INFINITY}),et=decode$2(_),tt=(nt=et.exif)!=null&&nt[0]?getMetadata(et.exif[0]):void 0;return new Image(_e.width,_e.height,{data:_e.data,colorModel:"RGBA",meta:tt})}const pngSignature=[137,80,78,71,13,10,26,10],crcTable=[];for(let _=0;_<256;_++){let _e=_;for(let et=0;et<8;et++)_e&1?_e=3988292384^_e>>>1:_e=_e>>>1;crcTable[_]=_e}const initialCrc=4294967295;function updateCrc(_,_e,et){let tt=_;for(let nt=0;nt<et;nt++)tt=crcTable[(tt^_e[nt])&255]^tt>>>8;return tt}function crc(_,_e){return(updateCrc(initialCrc,_,_e)^initialCrc)>>>0}var ColorType;(function(_){_[_.UNKNOWN=-1]="UNKNOWN",_[_.GREYSCALE=0]="GREYSCALE",_[_.TRUECOLOUR=2]="TRUECOLOUR",_[_.INDEXED_COLOUR=3]="INDEXED_COLOUR",_[_.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",_[_.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(ColorType||(ColorType={}));var CompressionMethod;(function(_){_[_.UNKNOWN=-1]="UNKNOWN",_[_.DEFLATE=0]="DEFLATE"})(CompressionMethod||(CompressionMethod={}));var FilterMethod;(function(_){_[_.UNKNOWN=-1]="UNKNOWN",_[_.ADAPTIVE=0]="ADAPTIVE"})(FilterMethod||(FilterMethod={}));var InterlaceMethod;(function(_){_[_.UNKNOWN=-1]="UNKNOWN",_[_.NO_INTERLACE=0]="NO_INTERLACE",_[_.ADAM7=1]="ADAM7"})(InterlaceMethod||(InterlaceMethod={}));const empty=new Uint8Array(0),NULL="\0",uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255;class PngDecoder extends IOBuffer{constructor(_e,et={}){super(_e);const{checkCrc:tt=!1}=et;this._checkCrc=tt,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let _e=0;_e<pngSignature.length;_e++)if(this.readUint8()!==pngSignature[_e])throw new Error(`wrong PNG signature. Byte at ${_e} should be ${pngSignature[_e]}.`)}decodeChunk(){const _e=this.readUint32(),et=this.readChars(4),tt=this.offset;switch(et){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(_e);break;case"IDAT":this.decodeIDAT(_e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(_e);break;case"iCCP":this.decodeiCCP(_e);break;case"tEXt":this.decodetEXt(_e);break;case"pHYs":this.decodepHYs();break;default:this.skip(_e);break}if(this.offset-tt!==_e)throw new Error(`Length mismatch while decoding chunk ${et}`);if(this._checkCrc){const nt=this.readUint32(),rt=_e+4,it=crc(new Uint8Array(this.buffer,this.byteOffset+this.offset-rt-4,rt),rt);if(it!==nt)throw new Error(`CRC mismatch for chunk ${et}. Expected ${nt}, found ${it}`)}else this.skip(4)}decodeIHDR(){const _e=this._png;_e.width=this.readUint32(),_e.height=this.readUint32(),_e.depth=checkBitDepth(this.readUint8());const et=this.readUint8();this._colorType=et;let tt;switch(et){case ColorType.GREYSCALE:tt=1;break;case ColorType.TRUECOLOUR:tt=3;break;case ColorType.INDEXED_COLOUR:tt=1;break;case ColorType.GREYSCALE_ALPHA:tt=2;break;case ColorType.TRUECOLOUR_ALPHA:tt=4;break;default:throw new Error(`Unknown color type: ${et}`)}if(this._png.channels=tt,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(_e){if(_e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${_e}`);const et=_e/3;this._hasPalette=!0;const tt=[];this._palette=tt;for(let nt=0;nt<et;nt++)tt.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(_e){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,_e)),this.skip(_e)}decodetRNS(_e){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(_e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${_e}`);if(_e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${_e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(_e/2);for(let et=0;et<_e/2;et++)this._transparency[et]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(_e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${_e} vs ${this._palette.length})`);let et=0;for(;et<_e;et++){const tt=this.readByte();this._palette[et].push(tt)}for(;et<this._palette.length;et++)this._palette[et].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(_e){let et="",tt;for(;(tt=this.readChar())!==NULL;)et+=tt;const nt=this.readUint8();if(nt!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${nt}`);const rt=this.readBytes(_e-et.length-2);this._png.iccEmbeddedProfile={name:et,profile:inflate_1(rt)}}decodetEXt(_e){let et="",tt;for(;(tt=this.readChar())!==NULL;)et+=tt;this._png.text[et]=this.readChars(_e-et.length-1)}decodepHYs(){const _e=this.readUint32(),et=this.readUint32(),tt=this.readByte();this._png.resolution={x:_e,y:et,unit:tt}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const _e=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this.decodeInterlaceNull(_e);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(_e){const et=this._png.height,tt=this._png.channels*this._png.depth/8,nt=this._png.width*tt,rt=new Uint8Array(this._png.height*nt);let it=empty,ot=0,lt,st;for(let at=0;at<et;at++){switch(lt=_e.subarray(ot+1,ot+1+nt),st=rt.subarray(at*nt,(at+1)*nt),_e[ot]){case 0:unfilterNone(lt,st,nt);break;case 1:unfilterSub(lt,st,nt,tt);break;case 2:unfilterUp(lt,st,it,nt);break;case 3:unfilterAverage(lt,st,it,nt,tt);break;case 4:unfilterPaeth(lt,st,it,nt,tt);break;default:throw new Error(`Unsupported filter: ${_e[ot]}`)}it=st,ot+=nt+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),this._png.depth===16){const at=new Uint16Array(rt.buffer);if(osIsLittleEndian)for(let ut=0;ut<at.length;ut++)at[ut]=swap16(at[ut]);this._png.data=at}else this._png.data=rt}}function unfilterNone(_,_e,et){for(let tt=0;tt<et;tt++)_e[tt]=_[tt]}function unfilterSub(_,_e,et,tt){let nt=0;for(;nt<tt;nt++)_e[nt]=_[nt];for(;nt<et;nt++)_e[nt]=_[nt]+_e[nt-tt]&255}function unfilterUp(_,_e,et,tt){let nt=0;if(et.length===0)for(;nt<tt;nt++)_e[nt]=_[nt];else for(;nt<tt;nt++)_e[nt]=_[nt]+et[nt]&255}function unfilterAverage(_,_e,et,tt,nt){let rt=0;if(et.length===0){for(;rt<nt;rt++)_e[rt]=_[rt];for(;rt<tt;rt++)_e[rt]=_[rt]+(_e[rt-nt]>>1)&255}else{for(;rt<nt;rt++)_e[rt]=_[rt]+(et[rt]>>1)&255;for(;rt<tt;rt++)_e[rt]=_[rt]+(_e[rt-nt]+et[rt]>>1)&255}}function unfilterPaeth(_,_e,et,tt,nt){let rt=0;if(et.length===0){for(;rt<nt;rt++)_e[rt]=_[rt];for(;rt<tt;rt++)_e[rt]=_[rt]+_e[rt-nt]&255}else{for(;rt<nt;rt++)_e[rt]=_[rt]+et[rt]&255;for(;rt<tt;rt++)_e[rt]=_[rt]+paethPredictor(_e[rt-nt],et[rt],et[rt-nt])&255}}function paethPredictor(_,_e,et){const tt=_+_e-et,nt=Math.abs(tt-_),rt=Math.abs(tt-_e),it=Math.abs(tt-et);return nt<=rt&&nt<=it?_:rt<=it?_e:et}function swap16(_){return(_&255)<<8|_>>8&255}function checkBitDepth(_){if(_!==1&&_!==2&&_!==4&&_!==8&&_!==16)throw new Error(`invalid bit depth: ${_}`);return _}var ResolutionUnitSpecifier;(function(_){_[_.UNKNOWN=0]="UNKNOWN",_[_.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng$1(_,_e){return new PngDecoder(_,_e).decode()}function decodePng(_){const _e=decodePng$1(_);let et;const tt=_e.depth===16?16:8;if(_e.palette)return loadPalettePng(_e);switch(_e.channels){case 1:et="GREY";break;case 2:et="GREYA";break;case 3:et="RGB";break;case 4:et="RGBA";break;default:throw new RangeError(`invalid number of channels: ${_e.channels}`)}return new Image(_e.width,_e.height,{colorModel:et,bitDepth:tt,data:_e.data})}function loadPalettePng(_){assert$1(_.palette);const _e=_.width*_.height,et=new Uint8Array(_e*3),tt=8/_.depth,nt=_.depth<8?tt:1,rt=Number.parseInt("1".repeat(_.depth),2);let it=0;for(let ot=0;ot<_e;ot++){const lt=Math.floor(ot/nt);let st=_.data[lt];_.depth<8&&(st=st>>>_.depth*(tt-1-ot%tt)&rt);const at=_.palette[st];et[it++]=at[0],et[it++]=at[1],et[it++]=at[2]}return new Image(_.width,_.height,{data:et})}function decodeTiff(_){let _e=decodeTIFF(_);return getImageFromIFD(_e[0])}function getImageFromIFD(_){if(_.type===3){const _e=new Uint16Array(3*_.width*_.height),et=_.palette;let tt=0;for(let nt of _.data){const rt=et[nt];_e[tt++]=rt[0],_e[tt++]=rt[1],_e[tt++]=rt[2]}return new Image(_.width,_.height,{data:_e,colorModel:_.alpha?"RGBA":"RGB",bitDepth:16,meta:getMetadata(_)})}else return new Image(_.width,_.height,{data:_.data,bitDepth:_.bitsPerSample,colorModel:_.type===2?_.alpha?"RGBA":"RGB":_.alpha?"GREYA":"GREY",meta:getMetadata(_)})}function decode(_){const _e=new Uint8Array(_.buffer,_.byteOffset,_.byteLength),et=imageType$1(_e);switch(et==null?void 0:et.mime){case"image/png":return decodePng(_e);case"image/jpeg":return decodeJpeg(_e);case"image/tiff":return decodeTiff(_e);default:throw new RangeError(`invalid data format: ${et==null?void 0:et.mime}`)}}globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;function writeCanvas(_,_e,et={}){_.colorModel!=="RGBA"&&(_=_.convertColor("RGBA")),_.bitDepth!==8&&_ instanceof Image&&(_=_.convertBitDepth(8));const{resizeCanvas:tt=!0,dx:nt=0,dy:rt=0,dirtyX:it=0,dirtyY:ot=0,dirtyWidth:lt=_.width,dirtyHeight:st=_.height}=et;tt&&(_e.width=_.width,_e.height=_.height);const at=_e.getContext("2d");assert$1(at);const ut=_.getRawImage().data;at.putImageData(new ImageData(new Uint8ClampedArray(ut.buffer,ut.byteOffset,ut.byteLength),_.width,_.height),nt,rt,it,ot,lt,st)}const roiStateContext=reactExports.createContext(null),roiDispatchContext=reactExports.createContext(null),committedRoisContext=reactExports.createContext(null),roisContext=reactExports.createContext(null),roiContainerRefContext=reactExports.createContext(null),panZoomContext=reactExports.createContext({scale:1.5,translation:[0,0]});function useRoiState(){const _=reactExports.useContext(roiStateContext);if(!_)throw new Error("useRoiState must be used within a RoiProvider");return _}function useRoiDispatch(){const _=reactExports.useContext(roiDispatchContext);if(!_)throw new Error("roiDispatchContext is not defined, please check if you are using RoiProvider");return _}function useRoiActions(){const _=useRoiDispatch();return reactExports.useMemo(()=>({createRoi:et=>{_({type:"CREATE_ROI",payload:et})},updateRoi:(et,tt)=>{_({type:"UPDATE_ROI",payload:{...tt,id:et}})},removeRoi:et=>{_({type:"REMOVE_ROI",payload:et})},setMode:et=>_({type:"SET_MODE",payload:et})}),[_])}function useCommitedRois(){const _=reactExports.useContext(committedRoisContext);if(!_)throw new Error("useCommitedRois must be used within a RoiProvider");return _}function useRois(){const _=reactExports.useContext(roisContext);if(!_)throw new Error("useRois must be used within a RoiProvider");return _}function assertUnreachable(_,_e){throw new Error(`unreachable: ${_e||(typeof _=="string"?_:"reached assertUnreachable")}`)}function assert(_,_e){if(!_)throw new Error(`unreachable${_e?`: ${_e}`:""}`)}function getAllCorners(_){const{x:_e,y:et,width:tt,height:nt}=_;return[{xPosition:"left",yPosition:"top",cursor:"nwse-resize",cx:_e,cy:et},{xPosition:"left",yPosition:"bottom",cursor:"nesw-resize",cx:_e,cy:et+nt},{xPosition:"right",yPosition:"bottom",cursor:"nwse-resize",cx:_e+tt,cy:et+nt},{cursor:"nesw-resize",xPosition:"right",yPosition:"top",cx:_e+tt,cy:et},{xPosition:"middle",yPosition:"top",cursor:"ns-resize",cx:_e+tt/2,cy:et},{xPosition:"middle",yPosition:"bottom",cursor:"ns-resize",cx:_e+tt/2,cy:et+nt},{xPosition:"left",yPosition:"middle",cursor:"ew-resize",cx:_e,cy:et+nt/2},{xPosition:"right",yPosition:"middle",cursor:"ew-resize",cx:_e+tt,cy:et+nt/2}]}function Box({id:_,x:_e,y:et,width:tt,height:nt,style:rt,label:it}){const ot=useRoiDispatch(),lt=useRoiState();return jsxRuntimeExports.jsx("div",{id:_,style:{position:"absolute",left:_e,top:et,width:tt,height:nt,cursor:lt.mode==="draw"?"crosshair":"grab",...rt},onMouseDown:st=>{st.altKey||(ot({type:"SELECT_BOX_AND_START_MOVE",payload:{id:_}}),lt.mode==="select"&&st.stopPropagation())},children:it})}const cursorSize=4;function RoiBoxCorner({corner:_,roiId:_e}){const et=useRoiDispatch();return jsxRuntimeExports.jsx("div",{id:`corner-${_.xPosition}-${_.yPosition}`,style:{backgroundColor:"#44aaff",opacity:.5,stroke:"black",position:"absolute",top:_.cy-cursorSize,left:_.cx-cursorSize,width:cursorSize*2,height:cursorSize*2,cursor:_.cursor},onMouseDown:tt=>{tt.altKey||(tt.stopPropagation(),et({type:"START_RESIZE",payload:{id:_e,xAxisCorner:_.xPosition,yAxisCorner:_.yPosition}}))}})}function RoiBoxInternal({roi:_}){const _e=useRoiState(),{style:et,selectedStyle:tt,x:nt,y:rt,width:it,height:ot}=_,lt=_.id===_e.selectedRoi;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Box,{id:_.id,x:nt,y:rt,width:it,height:ot,style:lt?tt:et,label:_.label}),_e.mode==="select"&&lt&&getAllCorners(_).map(st=>jsxRuntimeExports.jsx(RoiBoxCorner,{corner:st,roiId:_.id},`corner-${st.xPosition}-${st.yPosition}`))]})}const RoiBox=reactExports.memo(RoiBoxInternal),defaultModifiers={ctrl:!1,shift:void 0,alt:!1};function cleanShortcuts(_){const _e=[];for(const et of _)for(const tt of et){const[nt,...rt]=shortcutToObjects(tt.shortcut);_e.push({shortcut:nt,aliases:rt,handler:tt.handler,meta:tt.meta,maxFrequency:tt.maxFrequency??0})}return _e}function shortcutToObjects(_){return typeof _=="string"?[{...defaultModifiers,key:_.toLowerCase()}]:Array.isArray(_)?_.map(_e=>typeof _e=="string"?{...defaultModifiers,key:_e.toLowerCase()}:"key"in _e?{...defaultModifiers,..._e,key:_e.key.toLowerCase()}:{...defaultModifiers,..._e,code:_e.code.toLowerCase()}):"key"in _?[{...defaultModifiers,..._,key:_.key.toLowerCase()}]:[{...defaultModifiers,..._,code:_.code.toLowerCase()}]}const isMac=typeof navigator<"u"&&navigator.platform==="MacIntel";function isMultiplatformCtrlKey(_){return isMac?_.metaKey:_.ctrlKey}function shortcutToKeys(_){return[...shortcutObjectToKey(_.shortcut),..._.aliases.map(shortcutObjectToKey).flat()]}function shortcutObjectToKey(_){const _e=`ctrl[${boolToString(_.ctrl)}]_alt[${boolToString(_.alt)}]`;let et;return"key"in _?et=`key[${_.key}]_${_e}`:et=`code[${_.code}]_${_e}`,typeof _.shift=="boolean"?[`${et}_shift[${boolToString(_.shift)}]`]:[`${et}_shift[true]`,`${et}_shift[false]`]}function eventToKeyOrCode(_){const _e=`ctrl[${boolToString(isMultiplatformCtrlKey(_))}]_alt[${boolToString(_.altKey)}]_shift[${boolToString(_.shiftKey)}]`;return{key:`key[${_.key.toLowerCase()}]_${_e}`,code:`code[${_.code.toLowerCase()}]_${_e}`}}function boolToString(_){return _?"true":"false"}function combineShortcuts(_){const _e={};for(const et of _){const tt=shortcutToKeys(et);for(const nt of tt)_e[nt]!==void 0&&console.warn(`A global shortcut was already defined for key the combination ${nt}. It will be overridden.`),_e[nt]=et}return _e}const inputElements=new Set(["INPUT","TEXTAREA","SELECT"]);function shouldIgnoreElement(_){return inputElements.has(_.tagName)||_.isContentEditable||_.hasAttribute("data-kbs-ignore")}function useLastTriggerRef(){return reactExports.useRef({keyOrCode:"",timestamp:0})}function getKeyDownHandler(_,_e){return function(tt){if(shouldIgnoreElement(tt.target))return;const{key:nt,code:rt}=eventToKeyOrCode(tt);let it,ot;if(_e[nt]?(ot=_e[nt],it=nt):(ot=_e[rt],it=rt),ot){if(tt.stopPropagation(),tt.preventDefault(),ot.maxFrequency>0){const lt=performance.now();if(tt.repeat&&_.current.keyOrCode===it&&lt-_.current.timestamp<1e3/ot.maxFrequency)return;_.current={keyOrCode:it,timestamp:lt}}ot.handler(tt)}}}const initialKbsState={inputShortcuts:[],cleanedShortcuts:[],combinedShortcuts:{},disableCount:0},kbsContext=reactExports.createContext(initialKbsState),kbsDispatchContext=reactExports.createContext(null);function useKbsDispatch(){const _=reactExports.useContext(kbsDispatchContext);if(!_)throw new Error("missing context");return _}function kbsReducer(_,_e){switch(_e.type){case"INIT":{const et=[..._.inputShortcuts,_e.shortcuts],tt=cleanShortcuts(et);return{..._,inputShortcuts:et,cleanedShortcuts:tt,combinedShortcuts:combineShortcuts(tt)}}case"CLEANUP":{const et=_.inputShortcuts.filter(nt=>nt!==_e.shortcuts),tt=cleanShortcuts(et);return{..._,inputShortcuts:et,cleanedShortcuts:tt,combinedShortcuts:combineShortcuts(tt)}}case"DISABLE_GLOBAL":return{..._,disableCount:_.disableCount+1};case"ENABLE_GLOBAL":return{..._,disableCount:_.disableCount-1};default:throw new Error("unreachable")}}function KbsProvider(_){const[_e,et]=reactExports.useReducer(kbsReducer,initialKbsState),tt=useLastTriggerRef();return reactExports.useEffect(()=>{if(_e.disableCount!==0)return;const nt=getKeyDownHandler(tt,_e.combinedShortcuts);return document.body.addEventListener("keydown",nt),()=>document.body.removeEventListener("keydown",nt)},[_e.disableCount,_e.combinedShortcuts,tt]),jsxRuntimeExports.jsx(kbsContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(kbsDispatchContext.Provider,{value:et,children:_.children})})}function useKbsGlobal(_){const _e=useKbsDispatch();reactExports.useEffect(()=>(_e({type:"INIT",shortcuts:_}),()=>_e({type:"CLEANUP",shortcuts:_})),[_e,_])}var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(_){return _.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(_){return _.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var _;typeof ErrorEvent=="function"?_=new ErrorEvent("error",{message:msg}):(_=document.createEvent("Event"),_.initEvent("error",!1,!1),_.message=msg),window.dispatchEvent(_)},ResizeObserverBoxOptions;(function(_){_.BORDER_BOX="border-box",_.CONTENT_BOX="content-box",_.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze$1=function(_){return Object.freeze(_)},ResizeObserverSize=function(){function _(_e,et){this.inlineSize=_e,this.blockSize=et,freeze$1(this)}return _}(),DOMRectReadOnly=function(){function _(_e,et,tt,nt){return this.x=_e,this.y=et,this.width=tt,this.height=nt,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze$1(this)}return _.prototype.toJSON=function(){var _e=this,et=_e.x,tt=_e.y,nt=_e.top,rt=_e.right,it=_e.bottom,ot=_e.left,lt=_e.width,st=_e.height;return{x:et,y:tt,top:nt,right:rt,bottom:it,left:ot,width:lt,height:st}},_.fromRect=function(_e){return new _(_e.x,_e.y,_e.width,_e.height)},_}(),isSVG=function(_){return _ instanceof SVGElement&&"getBBox"in _},isHidden=function(_){if(isSVG(_)){var _e=_.getBBox(),et=_e.width,tt=_e.height;return!et&&!tt}var nt=_,rt=nt.offsetWidth,it=nt.offsetHeight;return!(rt||it||_.getClientRects().length)},isElement=function(_){var _e;if(_ instanceof Element)return!0;var et=(_e=_==null?void 0:_.ownerDocument)===null||_e===void 0?void 0:_e.defaultView;return!!(et&&_ instanceof et.Element)},isReplacedElement=function(_){switch(_.tagName){case"INPUT":if(_.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global.navigator&&global.navigator.userAgent),parseDimension=function(_){return parseFloat(_||"0")},size=function(_,_e,et){return _===void 0&&(_=0),_e===void 0&&(_e=0),et===void 0&&(et=!1),new ResizeObserverSize((et?_e:_)||0,(et?_:_e)||0)},zeroBoxes=freeze$1({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(_,_e){if(_e===void 0&&(_e=!1),cache.has(_)&&!_e)return cache.get(_);if(isHidden(_))return cache.set(_,zeroBoxes),zeroBoxes;var et=getComputedStyle(_),tt=isSVG(_)&&_.ownerSVGElement&&_.getBBox(),nt=!IE&&et.boxSizing==="border-box",rt=verticalRegexp.test(et.writingMode||""),it=!tt&&scrollRegexp.test(et.overflowY||""),ot=!tt&&scrollRegexp.test(et.overflowX||""),lt=tt?0:parseDimension(et.paddingTop),st=tt?0:parseDimension(et.paddingRight),at=tt?0:parseDimension(et.paddingBottom),ut=tt?0:parseDimension(et.paddingLeft),ct=tt?0:parseDimension(et.borderTopWidth),ht=tt?0:parseDimension(et.borderRightWidth),dt=tt?0:parseDimension(et.borderBottomWidth),vt=tt?0:parseDimension(et.borderLeftWidth),yt=ut+st,gt=lt+at,xt=vt+ht,ft=ct+dt,pt=ot?_.offsetHeight-ft-_.clientHeight:0,mt=it?_.offsetWidth-xt-_.clientWidth:0,_t=nt?yt+xt:0,St=nt?gt+ft:0,Et=tt?tt.width:parseDimension(et.width)-_t-mt,kt=tt?tt.height:parseDimension(et.height)-St-pt,wt=Et+yt+mt+xt,bt=kt+gt+pt+ft,Mt=freeze$1({devicePixelContentBoxSize:size(Math.round(Et*devicePixelRatio),Math.round(kt*devicePixelRatio),rt),borderBoxSize:size(wt,bt,rt),contentBoxSize:size(Et,kt,rt),contentRect:new DOMRectReadOnly(ut,lt,Et,kt)});return cache.set(_,Mt),Mt},calculateBoxSize=function(_,_e,et){var tt=calculateBoxSizes(_,et),nt=tt.borderBoxSize,rt=tt.contentBoxSize,it=tt.devicePixelContentBoxSize;switch(_e){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return it;case ResizeObserverBoxOptions.BORDER_BOX:return nt;default:return rt}},ResizeObserverEntry=function(){function _(_e){var et=calculateBoxSizes(_e);this.target=_e,this.contentRect=et.contentRect,this.borderBoxSize=freeze$1([et.borderBoxSize]),this.contentBoxSize=freeze$1([et.contentBoxSize]),this.devicePixelContentBoxSize=freeze$1([et.devicePixelContentBoxSize])}return _}(),calculateDepthForNode=function(_){if(isHidden(_))return 1/0;for(var _e=0,et=_.parentNode;et;)_e+=1,et=et.parentNode;return _e},broadcastActiveObservations=function(){var _=1/0,_e=[];resizeObservers.forEach(function(it){if(it.activeTargets.length!==0){var ot=[];it.activeTargets.forEach(function(st){var at=new ResizeObserverEntry(st.target),ut=calculateDepthForNode(st.target);ot.push(at),st.lastReportedSize=calculateBoxSize(st.target,st.observedBox),ut<_&&(_=ut)}),_e.push(function(){it.callback.call(it.observer,ot,it.observer)}),it.activeTargets.splice(0,it.activeTargets.length)}});for(var et=0,tt=_e;et<tt.length;et++){var nt=tt[et];nt()}return _},gatherActiveObservationsAtDepth=function(_){resizeObservers.forEach(function(et){et.activeTargets.splice(0,et.activeTargets.length),et.skippedTargets.splice(0,et.skippedTargets.length),et.observationTargets.forEach(function(nt){nt.isActive()&&(calculateDepthForNode(nt.target)>_?et.activeTargets.push(nt):et.skippedTargets.push(nt))})})},process=function(){var _=0;for(gatherActiveObservationsAtDepth(_);hasActiveObservations();)_=broadcastActiveObservations(),gatherActiveObservationsAtDepth(_);return hasSkippedObservations()&&deliverResizeLoopError(),_>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(_){return _()})},queueMicroTask=function(_){if(!trigger){var _e=0,et=document.createTextNode(""),tt={characterData:!0};new MutationObserver(function(){return notify()}).observe(et,tt),trigger=function(){et.textContent="".concat(_e?_e--:_e++)}}callbacks.push(_),trigger()},queueResizeObserver=function(_){queueMicroTask(function(){requestAnimationFrame(_)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(_){return _===void 0&&(_=0),Date.now()+_},scheduled=!1,Scheduler=function(){function _(){var _e=this;this.stopped=!0,this.listener=function(){return _e.schedule()}}return _.prototype.run=function(_e){var et=this;if(_e===void 0&&(_e=CATCH_PERIOD),!scheduled){scheduled=!0;var tt=time(_e);queueResizeObserver(function(){var nt=!1;try{nt=process()}finally{if(scheduled=!1,_e=tt-time(),!isWatching())return;nt?et.run(1e3):_e>0?et.run(_e):et.start()}})}},_.prototype.schedule=function(){this.stop(),this.run()},_.prototype.observe=function(){var _e=this,et=function(){return _e.observer&&_e.observer.observe(document.body,observerConfig)};document.body?et():global.addEventListener("DOMContentLoaded",et)},_.prototype.start=function(){var _e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(et){return global.addEventListener(et,_e.listener,!0)}))},_.prototype.stop=function(){var _e=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(et){return global.removeEventListener(et,_e.listener,!0)}),this.stopped=!0)},_}(),scheduler=new Scheduler,updateCount=function(_){!watching&&_>0&&scheduler.start(),watching+=_,!watching&&scheduler.stop()},skipNotifyOnElement=function(_){return!isSVG(_)&&!isReplacedElement(_)&&getComputedStyle(_).display==="inline"},ResizeObservation=function(){function _(_e,et){this.target=_e,this.observedBox=et||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return _.prototype.isActive=function(){var _e=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=_e),this.lastReportedSize.inlineSize!==_e.inlineSize||this.lastReportedSize.blockSize!==_e.blockSize},_}(),ResizeObserverDetail=function(){function _(_e,et){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=_e,this.callback=et}return _}(),observerMap=new WeakMap,getObservationIndex=function(_,_e){for(var et=0;et<_.length;et+=1)if(_[et].target===_e)return et;return-1},ResizeObserverController=function(){function _(){}return _.connect=function(_e,et){var tt=new ResizeObserverDetail(_e,et);observerMap.set(_e,tt)},_.observe=function(_e,et,tt){var nt=observerMap.get(_e),rt=nt.observationTargets.length===0;getObservationIndex(nt.observationTargets,et)<0&&(rt&&resizeObservers.push(nt),nt.observationTargets.push(new ResizeObservation(et,tt&&tt.box)),updateCount(1),scheduler.schedule())},_.unobserve=function(_e,et){var tt=observerMap.get(_e),nt=getObservationIndex(tt.observationTargets,et),rt=tt.observationTargets.length===1;nt>=0&&(rt&&resizeObservers.splice(resizeObservers.indexOf(tt),1),tt.observationTargets.splice(nt,1),updateCount(-1))},_.disconnect=function(_e){var et=this,tt=observerMap.get(_e);tt.observationTargets.slice().forEach(function(nt){return et.unobserve(_e,nt.target)}),tt.activeTargets.splice(0,tt.activeTargets.length)},_}(),ResizeObserver$1=function(){function _(_e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof _e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,_e)}return _.prototype.observe=function(_e,et){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(_e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,_e,et)},_.prototype.unobserve=function(_e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(_e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,_e)},_.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},_.toString=function(){return"function ResizeObserver () { [polyfill code] }"},_}();const usePassiveLayoutEffect=React[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],useLayoutEffect=usePassiveLayoutEffect,useLatest=_=>{const _e=reactExports.useRef(_);return reactExports.useEffect(()=>{_e.current=_}),_e},useLatest$1=useLatest,ResizeObserver=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:ResizeObserver$1;function _ref(){}function useResizeObserver(_,_e){const et=getResizeObserver(),tt=useLatest$1(_e);return useLayoutEffect(()=>{let nt=!1;const rt=_&&"current"in _?_.current:_;if(!rt)return _ref;function it(ot,lt){nt||tt.current(ot,lt)}return et.subscribe(rt,it),()=>{nt=!0,et.unsubscribe(rt,it)}},[_,et,tt]),et.observer}function createResizeObserver(){let _=!1,_e=[];const et=new Map,tt=new ResizeObserver((nt,rt)=>{_e=_e.concat(nt);function it(){const ot=new Set;for(let lt=0;lt<_e.length;lt++){if(ot.has(_e[lt].target))continue;ot.add(_e[lt].target);const st=et.get(_e[lt].target);st==null||st.forEach(at=>at(_e[lt],rt))}_e=[],_=!1}_||window.requestAnimationFrame(it),_=!0});return{observer:tt,subscribe(nt,rt){var it;tt.observe(nt);const ot=(it=et.get(nt))!==null&&it!==void 0?it:[];ot.push(rt),et.set(nt,ot)},unsubscribe(nt,rt){var it;const ot=(it=et.get(nt))!==null&&it!==void 0?it:[];if(ot.length===1){tt.unobserve(nt),et.delete(nt);return}const lt=ot.indexOf(rt);lt!==-1&&ot.splice(lt,1),et.set(nt,ot)}}}let _resizeObserver;const getResizeObserver=()=>_resizeObserver||(_resizeObserver=createResizeObserver());function usePanZoom(){return reactExports.useContext(panZoomContext)}function usePanZoomTransform(){const{scale:_,translation:_e}=usePanZoom();return`matrix(${_}, 0, 0, ${_}, ${_e[0]}, ${_e[1]})`}function throttle(_,_e){let et=0;return function(...nt){const rt=new Date().getTime();rt-et>=_e&&(_(...nt),et=rt)}}function ContainerComponent({target:_,children:_e,id:et}){const tt=useRoiDispatch(),nt=useRoiState(),rt=usePanZoomTransform(),it=reactExports.useRef(null),ot=reactExports.useMemo(()=>throttle(lt=>{lt.altKey&&(lt.stopPropagation(),tt({type:"ZOOM",payload:{scale:lt.deltaY>0?.92:1/.92,clientX:lt.clientX,clientY:lt.clientY,refBoundingClientRect:it.current.getBoundingClientRect()}}))},25),[tt]);return useResizeObserver(it,lt=>{tt({type:"SET_SIZE",payload:{width:lt.contentRect.width,height:lt.contentRect.height}})}),reactExports.useEffect(()=>{function lt(at){tt({type:"MOUSE_MOVE",payload:at})}function st(){tt({type:"END_ACTION"})}return document.addEventListener("mousemove",lt),document.addEventListener("mouseup",st),()=>{document.removeEventListener("mousemove",lt),document.removeEventListener("mouseup",st)}}),jsxRuntimeExports.jsx(roiContainerRefContext.Provider,{value:it,children:jsxRuntimeExports.jsx("div",{id:et,ref:it,style:{position:"relative",overflow:"hidden",margin:0,padding:0,cursor:nt.mode==="draw"?"crosshair":"default",userSelect:"none"},onDoubleClick:()=>{tt({type:"RESET_ZOOM"})},onWheel:ot,onMouseDown:lt=>{const st=it.current.getBoundingClientRect();tt({type:"START_DRAW",payload:{event:lt,containerBoundingRect:st,isPanZooming:lt.altKey}})},children:jsxRuntimeExports.jsxs("div",{style:{transform:rt,transformOrigin:"0 0"},children:[_,jsxRuntimeExports.jsx("div",{style:{userSelect:"none",width:"100%",height:"100%",position:"absolute",margin:0,padding:0,top:0,left:0},children:_e})]})})})}function RoiContainer({target:_,children:_e,id:et}){const tt=useRoiDispatch();return useKbsGlobal([{shortcut:["delete","backspace"],handler:nt=>{nt.isTrusted&&tt({type:"REMOVE_ROI",payload:void 0})}},{shortcut:["Escape"],handler:nt=>{nt.preventDefault(),nt.isTrusted&&tt({type:"CANCEL_ACTION",payload:nt})}}]),jsxRuntimeExports.jsx(ContainerComponent,{id:et,target:_,children:_e})}function RoiList(){const _=useRois();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_.map(_e=>jsxRuntimeExports.jsx(RoiBox,{roi:_e},_e.id))})}function normalizeValue(_,_e){return _/_e}function denormalizeValue(_,_e){return _*_e}function normalizeBox(_,_e){const{x:et,y:tt,width:nt,height:rt}=_;return{x:normalizeValue(et,_e.width),y:normalizeValue(tt,_e.height),width:normalizeValue(nt,_e.width),height:normalizeValue(rt,_e.height)}}function denormalizeBox(_,_e){const{x:et,y:tt,width:nt,height:rt}=_;return{x:denormalizeValue(et,_e.width),y:denormalizeValue(tt,_e.height),width:denormalizeValue(nt,_e.width),height:denormalizeValue(rt,_e.height)}}function createInitialBox(){return{x:0,y:0,width:0,height:0}}function createCommitedRoi(_,_e={}){return{id:_,label:"",...createInitialBox(),style:{backgroundColor:"black",opacity:.5},selectedStyle:{backgroundColor:"blue",opacity:.5},..._e}}function createRoi(_,_e,et={}){const tt=createCommitedRoi(_,et);return{...tt,action:{type:"idle"},...et,...denormalizeBox(tt,_e)}}function createCommitedRoiFromRoi(_,_e){const{action:et,...tt}=_;return{...tt,x:normalizeValue(_.x,_e.width),y:normalizeValue(_.y,_e.height),width:normalizeValue(_.width,_e.width),height:normalizeValue(_.height,_e.height)}}function createRoiFromCommittedRoi(_,_e){const{...et}=_;return{...et,action:{type:"idle"},...denormalizeBox(_,_e)}}function renormalizeRoiPosition(_,_e,et){const tt=et.width/_e.width,nt=et.height/_e.height;return{x:_.x*tt,y:_.y*nt,width:_.width*tt,height:_.height*nt}}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(_,..._e){throw new Error(`[Immer] minified error nr: ${_}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(_){return!!_&&!!_[DRAFT_STATE]}function isDraftable(_){var _e;return _?isPlainObject(_)||Array.isArray(_)||!!_[DRAFTABLE]||!!((_e=_.constructor)!=null&&_e[DRAFTABLE])||isMap(_)||isSet(_):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(_){if(!_||typeof _!="object")return!1;const _e=getPrototypeOf(_);if(_e===null)return!0;const et=Object.hasOwnProperty.call(_e,"constructor")&&_e.constructor;return et===Object?!0:typeof et=="function"&&Function.toString.call(et)===objectCtorString}function each(_,_e){getArchtype(_)===0?Object.entries(_).forEach(([et,tt])=>{_e(et,tt,_)}):_.forEach((et,tt)=>_e(tt,et,_))}function getArchtype(_){const _e=_[DRAFT_STATE];return _e?_e.type_:Array.isArray(_)?1:isMap(_)?2:isSet(_)?3:0}function has(_,_e){return getArchtype(_)===2?_.has(_e):Object.prototype.hasOwnProperty.call(_,_e)}function set(_,_e,et){const tt=getArchtype(_);tt===2?_.set(_e,et):tt===3?_.add(et):_[_e]=et}function is(_,_e){return _===_e?_!==0||1/_===1/_e:_!==_&&_e!==_e}function isMap(_){return _ instanceof Map}function isSet(_){return _ instanceof Set}function latest(_){return _.copy_||_.base_}function shallowCopy(_,_e){if(isMap(_))return new Map(_);if(isSet(_))return new Set(_);if(Array.isArray(_))return Array.prototype.slice.call(_);if(!_e&&isPlainObject(_))return getPrototypeOf(_)?{..._}:Object.assign(Object.create(null),_);const et=Object.getOwnPropertyDescriptors(_);delete et[DRAFT_STATE];let tt=Reflect.ownKeys(et);for(let nt=0;nt<tt.length;nt++){const rt=tt[nt],it=et[rt];it.writable===!1&&(it.writable=!0,it.configurable=!0),(it.get||it.set)&&(et[rt]={configurable:!0,writable:!0,enumerable:it.enumerable,value:_[rt]})}return Object.create(getPrototypeOf(_),et)}function freeze(_,_e=!1){return isFrozen(_)||isDraft(_)||!isDraftable(_)||(getArchtype(_)>1&&(_.set=_.add=_.clear=_.delete=dontMutateFrozenCollections),Object.freeze(_),_e&&each(_,(et,tt)=>freeze(tt,!0))),_}function dontMutateFrozenCollections(){die(2)}function isFrozen(_){return Object.isFrozen(_)}var plugins={};function getPlugin(_){const _e=plugins[_];return _e||die(0,_),_e}var currentScope;function getCurrentScope(){return currentScope}function createScope(_,_e){return{drafts_:[],parent_:_,immer_:_e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(_,_e){_e&&(getPlugin("Patches"),_.patches_=[],_.inversePatches_=[],_.patchListener_=_e)}function revokeScope(_){leaveScope(_),_.drafts_.forEach(revokeDraft),_.drafts_=null}function leaveScope(_){_===currentScope&&(currentScope=_.parent_)}function enterScope(_){return currentScope=createScope(currentScope,_)}function revokeDraft(_){const _e=_[DRAFT_STATE];_e.type_===0||_e.type_===1?_e.revoke_():_e.revoked_=!0}function processResult(_,_e){_e.unfinalizedDrafts_=_e.drafts_.length;const et=_e.drafts_[0];return _!==void 0&&_!==et?(et[DRAFT_STATE].modified_&&(revokeScope(_e),die(4)),isDraftable(_)&&(_=finalize(_e,_),_e.parent_||maybeFreeze(_e,_)),_e.patches_&&getPlugin("Patches").generateReplacementPatches_(et[DRAFT_STATE].base_,_,_e.patches_,_e.inversePatches_)):_=finalize(_e,et,[]),revokeScope(_e),_e.patches_&&_e.patchListener_(_e.patches_,_e.inversePatches_),_!==NOTHING?_:void 0}function finalize(_,_e,et){if(isFrozen(_e))return _e;const tt=_e[DRAFT_STATE];if(!tt)return each(_e,(nt,rt)=>finalizeProperty(_,tt,_e,nt,rt,et)),_e;if(tt.scope_!==_)return _e;if(!tt.modified_)return maybeFreeze(_,tt.base_,!0),tt.base_;if(!tt.finalized_){tt.finalized_=!0,tt.scope_.unfinalizedDrafts_--;const nt=tt.copy_;let rt=nt,it=!1;tt.type_===3&&(rt=new Set(nt),nt.clear(),it=!0),each(rt,(ot,lt)=>finalizeProperty(_,tt,nt,ot,lt,et,it)),maybeFreeze(_,nt,!1),et&&_.patches_&&getPlugin("Patches").generatePatches_(tt,et,_.patches_,_.inversePatches_)}return tt.copy_}function finalizeProperty(_,_e,et,tt,nt,rt,it){if(isDraft(nt)){const ot=rt&&_e&&_e.type_!==3&&!has(_e.assigned_,tt)?rt.concat(tt):void 0,lt=finalize(_,nt,ot);if(set(et,tt,lt),isDraft(lt))_.canAutoFreeze_=!1;else return}else it&&et.add(nt);if(isDraftable(nt)&&!isFrozen(nt)){if(!_.immer_.autoFreeze_&&_.unfinalizedDrafts_<1)return;finalize(_,nt),(!_e||!_e.scope_.parent_)&&maybeFreeze(_,nt)}}function maybeFreeze(_,_e,et=!1){!_.parent_&&_.immer_.autoFreeze_&&_.canAutoFreeze_&&freeze(_e,et)}function createProxyProxy(_,_e){const et=Array.isArray(_),tt={type_:et?1:0,scope_:_e?_e.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:_e,base_:_,draft_:null,copy_:null,revoke_:null,isManual_:!1};let nt=tt,rt=objectTraps;et&&(nt=[tt],rt=arrayTraps);const{revoke:it,proxy:ot}=Proxy.revocable(nt,rt);return tt.draft_=ot,tt.revoke_=it,ot}var objectTraps={get(_,_e){if(_e===DRAFT_STATE)return _;const et=latest(_);if(!has(et,_e))return readPropFromProto(_,et,_e);const tt=et[_e];return _.finalized_||!isDraftable(tt)?tt:tt===peek(_.base_,_e)?(prepareCopy(_),_.copy_[_e]=createProxy(tt,_)):tt},has(_,_e){return _e in latest(_)},ownKeys(_){return Reflect.ownKeys(latest(_))},set(_,_e,et){const tt=getDescriptorFromProto(latest(_),_e);if(tt!=null&&tt.set)return tt.set.call(_.draft_,et),!0;if(!_.modified_){const nt=peek(latest(_),_e),rt=nt==null?void 0:nt[DRAFT_STATE];if(rt&&rt.base_===et)return _.copy_[_e]=et,_.assigned_[_e]=!1,!0;if(is(et,nt)&&(et!==void 0||has(_.base_,_e)))return!0;prepareCopy(_),markChanged(_)}return _.copy_[_e]===et&&(et!==void 0||_e in _.copy_)||Number.isNaN(et)&&Number.isNaN(_.copy_[_e])||(_.copy_[_e]=et,_.assigned_[_e]=!0),!0},deleteProperty(_,_e){return peek(_.base_,_e)!==void 0||_e in _.base_?(_.assigned_[_e]=!1,prepareCopy(_),markChanged(_)):delete _.assigned_[_e],_.copy_&&delete _.copy_[_e],!0},getOwnPropertyDescriptor(_,_e){const et=latest(_),tt=Reflect.getOwnPropertyDescriptor(et,_e);return tt&&{writable:!0,configurable:_.type_!==1||_e!=="length",enumerable:tt.enumerable,value:et[_e]}},defineProperty(){die(11)},getPrototypeOf(_){return getPrototypeOf(_.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(_,_e)=>{arrayTraps[_]=function(){return arguments[0]=arguments[0][0],_e.apply(this,arguments)}});arrayTraps.deleteProperty=function(_,_e){return arrayTraps.set.call(this,_,_e,void 0)};arrayTraps.set=function(_,_e,et){return objectTraps.set.call(this,_[0],_e,et,_[0])};function peek(_,_e){const et=_[DRAFT_STATE];return(et?latest(et):_)[_e]}function readPropFromProto(_,_e,et){var nt;const tt=getDescriptorFromProto(_e,et);return tt?"value"in tt?tt.value:(nt=tt.get)==null?void 0:nt.call(_.draft_):void 0}function getDescriptorFromProto(_,_e){if(!(_e in _))return;let et=getPrototypeOf(_);for(;et;){const tt=Object.getOwnPropertyDescriptor(et,_e);if(tt)return tt;et=getPrototypeOf(et)}}function markChanged(_){_.modified_||(_.modified_=!0,_.parent_&&markChanged(_.parent_))}function prepareCopy(_){_.copy_||(_.copy_=shallowCopy(_.base_,_.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(_){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(_e,et,tt)=>{if(typeof _e=="function"&&typeof et!="function"){const rt=et;et=_e;const it=this;return function(lt=rt,...st){return it.produce(lt,at=>et.call(this,at,...st))}}typeof et!="function"&&die(6),tt!==void 0&&typeof tt!="function"&&die(7);let nt;if(isDraftable(_e)){const rt=enterScope(this),it=createProxy(_e,void 0);let ot=!0;try{nt=et(it),ot=!1}finally{ot?revokeScope(rt):leaveScope(rt)}return usePatchesInScope(rt,tt),processResult(nt,rt)}else if(!_e||typeof _e!="object"){if(nt=et(_e),nt===void 0&&(nt=_e),nt===NOTHING&&(nt=void 0),this.autoFreeze_&&freeze(nt,!0),tt){const rt=[],it=[];getPlugin("Patches").generateReplacementPatches_(_e,nt,rt,it),tt(rt,it)}return nt}else die(1,_e)},this.produceWithPatches=(_e,et)=>{if(typeof _e=="function")return(it,...ot)=>this.produceWithPatches(it,lt=>_e(lt,...ot));let tt,nt;return[this.produce(_e,et,(it,ot)=>{tt=it,nt=ot}),tt,nt]},typeof(_==null?void 0:_.autoFreeze)=="boolean"&&this.setAutoFreeze(_.autoFreeze),typeof(_==null?void 0:_.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(_.useStrictShallowCopy)}createDraft(_){isDraftable(_)||die(8),isDraft(_)&&(_=current(_));const _e=enterScope(this),et=createProxy(_,void 0);return et[DRAFT_STATE].isManual_=!0,leaveScope(_e),et}finishDraft(_,_e){const et=_&&_[DRAFT_STATE];(!et||!et.isManual_)&&die(9);const{scope_:tt}=et;return usePatchesInScope(tt,_e),processResult(void 0,tt)}setAutoFreeze(_){this.autoFreeze_=_}setUseStrictShallowCopy(_){this.useStrictShallowCopy_=_}applyPatches(_,_e){let et;for(et=_e.length-1;et>=0;et--){const nt=_e[et];if(nt.path.length===0&&nt.op==="replace"){_=nt.value;break}}et>-1&&(_e=_e.slice(et+1));const tt=getPlugin("Patches").applyPatches_;return isDraft(_)?tt(_,_e):this.produce(_,nt=>tt(nt,_e))}};function createProxy(_,_e){const et=isMap(_)?getPlugin("MapSet").proxyMap_(_,_e):isSet(_)?getPlugin("MapSet").proxySet_(_,_e):createProxyProxy(_,_e);return(_e?_e.scope_:getCurrentScope()).drafts_.push(et),et}function current(_){return isDraft(_)||die(10,_),currentImpl(_)}function currentImpl(_){if(!isDraftable(_)||isFrozen(_))return _;const _e=_[DRAFT_STATE];let et;if(_e){if(!_e.modified_)return _e.base_;_e.finalized_=!0,et=shallowCopy(_,_e.scope_.immer_.useStrictShallowCopy_)}else et=shallowCopy(_,!0);return each(et,(tt,nt)=>{set(et,tt,currentImpl(nt))}),_e&&(_e.finalized_=!1),et}var immer=new Immer2,produce=immer.produce;immer.produceWithPatches.bind(immer);immer.setAutoFreeze.bind(immer);immer.setUseStrictShallowCopy.bind(immer);immer.applyPatches.bind(immer);immer.createDraft.bind(immer);immer.finishDraft.bind(immer);function cancelAction(_){const _e=_.rois.filter(tt=>tt.action.type!=="idle");if(_e.length===0)return;assert(_e.length===1,"Multiple rois are being edited at the same time");const et=_e[0];if(et.action.type==="drawing"){const tt=_.rois.findIndex(nt=>nt.id===et.id);_.rois.splice(tt,1)}else{const tt=_.committedRois.find(nt=>nt.id===et.id);assert(tt),Object.assign(et,denormalizeBox(tt,_.size))}_.action="idle",et.action={type:"idle"}}function boundRoi(_,_e){const et={x:_.x,y:_.y,width:_.width,height:_.height};return _e==="drawing"||_e==="resizing"?(et.x<0&&(et.width+=et.x,et.x=0),et.y<0&&(et.height+=et.y,et.y=0),et.height+et.y>1&&(et.height=1-et.y),et.width+et.x>1&&(et.width=1-et.x)):(et.x<0&&(et.x=0),et.y<0&&(et.y=0),et.x+et.width>1&&(et.x=1-et.width),et.y+et.height>1&&(et.y=1-et.height)),et}function updateCommitedRoiPosition(_,_e,et){const tt=boundRoi(normalizeBox(et,_.size),et.action.type);tt.height===0||tt.width===0||Object.assign(_e,tt),Object.assign(et,denormalizeBox(_e,_.size))}function endAction(_){_.action="idle";const{selectedRoi:_e,rois:et,committedRois:tt}=_;if(!_e)return;const nt=et.find(it=>it.id===_e),rt=tt.find(it=>it.id===_e);if(assert(nt,"Selected ROI not found"),!!nt){if(rt)assert(nt.action.type!=="drawing","Drawing ROI should not be commited"),updateCommitedRoiPosition(_,rt,nt);else{assert(nt.action.type==="drawing");const it=createCommitedRoiFromRoi(nt,_.size);updateCommitedRoiPosition(_,it,nt),_.committedRois.push(it)}nt.action={type:"idle"}}}function mouseMove(_,_e){switch(_.action){case"idle":return;case"panning":_.panZoom.translation[0]+=_e.movementX,_.panZoom.translation[1]+=_e.movementY;return;case"moving":case"drawing":case"resizing":{const{selectedRoi:et,rois:tt}=_,nt=tt.find(rt=>rt.id===et);assert(nt),updateRoiBox(_,nt,{x:_e.movementX,y:_e.movementY});return}default:assertUnreachable(_.action,"Invalid action type")}}function updateRoiBox(_,_e,et){const tt=et.x/_.panZoom.scale,nt=et.y/_.panZoom.scale;switch(_e.action.type){case"idle":return;case"moving":_e.x+=tt,_e.y+=nt;break;case"resizing":{resize(_,_e,et);break}case"drawing":resize(_,_e,et);break;default:assertUnreachable(_e.action,"Invalid action type")}}function resize(_,_e,et){assert(_e.action.type==="resizing"||_e.action.type==="drawing");const tt=et.x/_.panZoom.scale,nt=et.y/_.panZoom.scale,rt=_e.action.xAxisCorner;switch(rt){case"left":{const ot=_e.x+tt;ot<=_e.x+_e.width?(_e.x=ot,_e.width-=tt):(_e.x=_e.x+_e.width,_e.width=ot-_e.x,_e.action.xAxisCorner="right");break}case"right":{const ot=_e.width+tt;ot>=0?_e.width=ot:(_e.x=_e.x+ot,_e.width=-ot,_e.action.xAxisCorner="left");break}case"middle":break;default:assertUnreachable(rt)}const it=_e.action.yAxisCorner;switch(it){case"top":{const ot=_e.y+nt;ot<=_e.y+_e.height?(_e.y=ot,_e.height-=nt):(_e.y=_e.y+_e.height,_e.height=ot-_e.y,_e.action.yAxisCorner="bottom");break}case"bottom":{const ot=_e.height+nt;ot>=0?_e.height=ot:(_e.y=_e.y+ot,_e.height=-ot,_e.action.yAxisCorner="top");break}case"middle":break;default:assertUnreachable(it)}}function applyInverseX(_,_e){return(_e-_.translation[0])/_.scale}function applyInverseY(_,_e){return(_e-_.translation[1])/_.scale}function startDraw(_,_e){const{event:et,containerBoundingRect:tt}=_e,nt=createRoi(crypto.randomUUID(),_.size);if(_e.isPanZooming){_.action="panning";return}switch(_.mode){case"draw":{const rt=applyInverseX(_.panZoom,et.clientX-tt.x),it=applyInverseY(_.panZoom,et.clientY-tt.y),ot={...nt,action:{type:"drawing",xAxisCorner:"left",yAxisCorner:"top"},x:rt,y:it,width:0,height:0,data:void 0};_.selectedRoi=ot.id,_.rois.push(ot),_.action="drawing";break}case"select":{_.selectedRoi=void 0;break}}}const MAX_ZOOM=10,MIN_ZOOM=.5;function zoomAction(_,_e){const{scale:et,refBoundingClientRect:tt,clientX:nt,clientY:rt}=_e,{scale:it,translation:ot}=_.panZoom,lt=Math.max(MIN_ZOOM,Math.min(it*et,MAX_ZOOM)),st=nt-tt.left,at=rt-tt.top,ut=applyInverseX(_.panZoom,st),ct=applyInverseY(_.panZoom,at);_.panZoom.scale=lt,ot[0]=(it-lt)*ut+ot[0],ot[1]=(it-lt)*ct+ot[1]}function resetZoomAction(_){_.panZoom.scale=1,_.panZoom.translation=[0,0]}function roiReducer(_,_e){return produce(_,et=>{const tt=_e.type;switch(tt){case"SET_MODE":et.mode=_e.payload;break;case"SET_SIZE":{if(_e.payload.width===0||_e.payload.height===0)return;et.rois.forEach(nt=>{Object.assign(nt,renormalizeRoiPosition(nt,et.size,_e.payload))}),et.size=_e.payload;break}case"REMOVE_ROI":{const nt=_e.payload??et.selectedRoi,rt=et.rois.findIndex(it=>it.id===nt);if(rt===-1)return;et.rois.splice(rt,1),et.committedRois.splice(rt,1),et.selectedRoi=void 0;return}case"CREATE_ROI":{const{id:nt,...rt}=_e.payload,it=createCommitedRoi(nt,rt);et.committedRois.push(it),et.rois.push(createRoi(nt,et.size,rt)),et.selectedRoi=it.id;break}case"UPDATE_ROI":{const{id:nt,...rt}=_e.payload;if(!nt)return;const it=et.committedRois.find(lt=>lt.id===nt),ot=et.rois.find(lt=>lt.id===nt);assert(ot,"ROI not found"),assert(it,"Commited ROI not found"),Object.assign(it,rt),Object.assign(ot,rt);break}case"START_RESIZE":{const{id:nt,xAxisCorner:rt,yAxisCorner:it}=_e.payload,{rois:ot}=et,lt=ot.find(st=>st.id===nt);assert(lt,"ROI not found"),et.action="resizing",lt.action={type:"resizing",xAxisCorner:rt,yAxisCorner:it};break}case"SELECT_BOX_AND_START_MOVE":{const{id:nt}=_e.payload;if(!nt)return;if(et.mode==="draw"){et.selectedRoi=void 0;return}const{rois:rt}=et;et.selectedRoi=nt;const it=rt.find(ot=>ot.id===nt);assert(it,"ROI not found"),et.action="moving",it.action={type:"moving"};break}case"START_DRAW":{startDraw(et,_e.payload);break}case"MOUSE_MOVE":{mouseMove(et,_e.payload);break}case"END_ACTION":{endAction(et);break}case"CANCEL_ACTION":{cancelAction(et);break}case"ZOOM":zoomAction(et,_e.payload);break;case"RESET_ZOOM":resetZoomAction(et);break;default:assertUnreachable(tt)}})}function createInitialState(_){const _e={width:1,height:1};return{mode:"select",action:"idle",size:_e,selectedRoi:void 0,committedRois:_,rois:_.map(tt=>createRoiFromCommittedRoi(tt,_e)),panZoom:{scale:1,translation:[0,0]}}}function RoiProvider({children:_,initialRois:_e=[]}){const et=createInitialState(_e),[tt,nt]=reactExports.useReducer(roiReducer,et),{rois:rt,committedRois:it,mode:ot,selectedRoi:lt,panZoom:st}=tt,at=reactExports.useMemo(()=>({mode:ot,selectedRoi:lt}),[ot,lt]);return jsxRuntimeExports.jsx(KbsProvider,{children:jsxRuntimeExports.jsx(panZoomContext.Provider,{value:st,children:jsxRuntimeExports.jsx(roiDispatchContext.Provider,{value:nt,children:jsxRuntimeExports.jsx(roisContext.Provider,{value:rt,children:jsxRuntimeExports.jsx(committedRoisContext.Provider,{value:it,children:jsxRuntimeExports.jsx(roiStateContext.Provider,{value:at,children:_})})})})})})}const imgUrl="/barbara.jpg",initialRois=[{id:crypto.randomUUID(),label:jsxRuntimeExports.jsx("div",{style:{color:"white",backgroundColor:"transparent",width:"100%",display:"flex",justifyContent:"center",justifyItems:"center",fontSize:"12px"},children:"Styled label"}),x:0,y:0,width:.5,height:.5,style:{backgroundColor:"black",opacity:.5},selectedStyle:{backgroundColor:"blue",opacity:.5},data:{blurMethod:"fill"}},{id:crypto.randomUUID(),x:.7,width:.3,y:.7,height:.3,style:{backgroundColor:"black",opacity:.5},selectedStyle:{backgroundColor:"green",opacity:.5},data:{blurMethod:"fill"}}];function App(){return jsxRuntimeExports.jsx(RoiProvider,{initialRois,children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[jsxRuntimeExports.jsx(Toolbar,{}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:12,alignItems:"start",width:"100%"},children:[jsxRuntimeExports.jsx("div",{style:{flexGrow:1},children:jsxRuntimeExports.jsx(ImageWithRois,{})}),jsxRuntimeExports.jsx(TransformedImage,{})]})]})})}function Toolbar(){const{mode:_,selectedRoi:_e}=useRoiState(),{setMode:et,createRoi:tt,updateRoi:nt,removeRoi:rt}=useRoiActions();return jsxRuntimeExports.jsxs("div",{style:{width:"fit-content",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",margin:"10px"},children:[jsxRuntimeExports.jsxs("div",{children:["Mode: ",_]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et("select"),children:"Select"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et("draw"),children:"Draw"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>tt({id:crypto.randomUUID(),x:.4,y:.4,width:.2,height:.2,label:"My new roi",style:{backgroundColor:"#ff5500",opacity:.6},selectedStyle:{backgroundColor:"#ffaa00",opacity:.4},data:{blurMethod:"pixelate"}}),children:"Create ROI"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{nt(_e,{y:.1,style:{backgroundColor:"green",opacity:.6},selectedStyle:{backgroundColor:"lightgreen",opacity:.4}})},children:"Update"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{rt(_e)},children:"Remove"})]})}function ImageWithRois(){return jsxRuntimeExports.jsx("div",{style:{maxWidth:800,border:"solid 5px gray"},children:jsxRuntimeExports.jsx(RoiContainer,{target:jsxRuntimeExports.jsx(ImageSource,{}),children:jsxRuntimeExports.jsx(RoiList,{})})})}function TransformedImage(){const _=reactExports.useRef(),_e=useCommitedRois();return reactExports.useEffect(()=>{fetch(imgUrl).then(et=>et.arrayBuffer()).then(et=>{const tt=decode(new DataView(et));for(const nt of _e)tt.drawRectangle({strokeColor:[255,255,255],origin:{column:Math.round(nt.x*tt.width),row:Math.round(nt.y*tt.height)},width:Math.round(nt.width*tt.width),height:Math.round(nt.height*tt.height),out:tt});writeCanvas(tt,_.current)}).catch(et=>{reportError(et)})},[_e]),jsxRuntimeExports.jsx("canvas",{ref:_,id:"transformed-image"})}function ImageSource(){const _=reactExports.useRef();return reactExports.useEffect(()=>{fetch("/barbara.jpg").then(_e=>_e.arrayBuffer()).then(_e=>{const et=decode(new DataView(_e));writeCanvas(et,_.current)}).catch(_e=>{reportError(_e)})},[]),jsxRuntimeExports.jsx("canvas",{ref:_,style:{width:"100%",display:"block"}})}const index="";createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
